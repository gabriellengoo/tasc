/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{289:function(t,e,n){"use strict";n.d(e,"a",(function(){return It})),n.d(e,"b",(function(){return Z})),n.d(e,"c",(function(){return At})),n.d(e,"d",(function(){return mi})),n.d(e,"e",(function(){return H})),n.d(e,"f",(function(){return Rt})),n.d(e,"g",(function(){return ve})),n.d(e,"h",(function(){return en})),n.d(e,"i",(function(){return gt})),n.d(e,"j",(function(){return Xi})),n.d(e,"k",(function(){return pl})),n.d(e,"l",(function(){return ad})),n.d(e,"m",(function(){return Bc})),n.d(e,"n",(function(){return Dc})),n.d(e,"o",(function(){return od})),n.d(e,"p",(function(){return rd})),n.d(e,"q",(function(){return xc})),n.d(e,"r",(function(){return Pu})),n.d(e,"s",(function(){return Bl})),n.d(e,"t",(function(){return rf})),n.d(e,"u",(function(){return Et})),n.d(e,"v",(function(){return Wl})),n.d(e,"w",(function(){return Xl})),n.d(e,"x",(function(){return Al})),n.d(e,"y",(function(){return Vl})),n.d(e,"z",(function(){return jl})),n.d(e,"A",(function(){return af})),n.d(e,"B",(function(){return V})),n.d(e,"C",(function(){return ki})),n.d(e,"D",(function(){return P})),n.d(e,"E",(function(){return nu})),n.d(e,"F",(function(){return bo})),n.d(e,"G",(function(){return Oc})),n.d(e,"H",(function(){return Sd})),n.d(e,"I",(function(){return fr})),n.d(e,"J",(function(){return tf})),n.d(e,"K",(function(){return ws})),n.d(e,"L",(function(){return $d})),n.d(e,"M",(function(){return qa})),n.d(e,"N",(function(){return us})),n.d(e,"O",(function(){return kl})),n.d(e,"P",(function(){return re})),n.d(e,"Q",(function(){return Pc})),n.d(e,"R",(function(){return Ts})),n.d(e,"S",(function(){return Yd})),n.d(e,"T",(function(){return Cu})),n.d(e,"U",(function(){return nh})),n.d(e,"V",(function(){return Wu})),n.d(e,"W",(function(){return Ct})),n.d(e,"X",(function(){return rh})),n.d(e,"Y",(function(){return qt})),n.d(e,"Z",(function(){return Rl})),n.d(e,"ab",(function(){return Ba})),n.d(e,"bb",(function(){return Ac})),n.d(e,"cb",(function(){return qn})),n.d(e,"db",(function(){return Tu})),n.d(e,"eb",(function(){return zu})),n.d(e,"fb",(function(){return ju})),n.d(e,"gb",(function(){return Hc})),n.d(e,"hb",(function(){return sh})),n.d(e,"ib",(function(){return vt})),n.d(e,"jb",(function(){return ft})),n.d(e,"kb",(function(){return of})),n.d(e,"lb",(function(){return Ps})),n.d(e,"mb",(function(){return Lt})),n.d(e,"nb",(function(){return Vt})),n.d(e,"ob",(function(){return Es})),n.d(e,"pb",(function(){return Jc})),n.d(e,"qb",(function(){return Dt})),n.d(e,"rb",(function(){return qu})),n.d(e,"sb",(function(){return Ju})),n.d(e,"tb",(function(){return wc})),n.d(e,"ub",(function(){return I})),n.d(e,"vb",(function(){return B})),n.d(e,"wb",(function(){return R})),n.d(e,"xb",(function(){return C})),n.d(e,"yb",(function(){return Bu})),n.d(e,"zb",(function(){return $u})),n.d(e,"Ab",(function(){return Y})),n.d(e,"Bb",(function(){return Bt})),n.d(e,"Cb",(function(){return ah})),n.d(e,"Db",(function(){return kd})),n.d(e,"Eb",(function(){return sr})),n.d(e,"Fb",(function(){return rr})),n.d(e,"Gb",(function(){return xo})),n.d(e,"Hb",(function(){return Xc})),n.d(e,"Ib",(function(){return Ua})),n.d(e,"Jb",(function(){return Ei})),n.d(e,"Kb",(function(){return Ni})),n.d(e,"Lb",(function(){return Fc})),n.d(e,"Mb",(function(){return xe})),n.d(e,"Nb",(function(){return ke})),n.d(e,"Ob",(function(){return Iu})),n.d(e,"Pb",(function(){return Ft})),n.d(e,"Qb",(function(){return fl})),n.d(e,"Rb",(function(){return qd})),n.d(e,"Sb",(function(){return Sc})),n.d(e,"Tb",(function(){return uh})),n.d(e,"Ub",(function(){return W})),n.d(e,"Vb",(function(){return ot})),n.d(e,"Wb",(function(){return ht})),n.d(e,"Xb",(function(){return cn})),n.d(e,"Yb",(function(){return rn})),n.d(e,"Zb",(function(){return on})),n.d(e,"ac",(function(){return fh})),n.d(e,"bc",(function(){return Ru})),n.d(e,"cc",(function(){return Gi})),n.d(e,"dc",(function(){return kt})),n.d(e,"ec",(function(){return Ui})),n.d(e,"fc",(function(){return Wt})),n.d(e,"gc",(function(){return Ut})),n.d(e,"hc",(function(){return Qr})),n.d(e,"ic",(function(){return yn})),n.d(e,"jc",(function(){return Uh})),n.d(e,"kc",(function(){return Uc})),n.d(e,"lc",(function(){return $a})),n.d(e,"mc",(function(){return ts})),n.d(e,"nc",(function(){return he})),n.d(e,"oc",(function(){return Ls})),n.d(e,"pc",(function(){return Ns})),n.d(e,"qc",(function(){return Au})),n.d(e,"rc",(function(){return L})),n.d(e,"sc",(function(){return Lo})),n.d(e,"tc",(function(){return vd})),n.d(e,"uc",(function(){return dn})),n.d(e,"vc",(function(){return fn})),n.d(e,"wc",(function(){return Ki})),n.d(e,"xc",(function(){return Mt})),n.d(e,"yc",(function(){return tn})),n.d(e,"zc",(function(){return wt})),n.d(e,"Ac",(function(){return Ji})),n.d(e,"Bc",(function(){return Hi})),n.d(e,"Cc",(function(){return Vd})),n.d(e,"Dc",(function(){return _u})),n.d(e,"Ec",(function(){return ce})),n.d(e,"Fc",(function(){return Gc})),n.d(e,"Gc",(function(){return Ld})),n.d(e,"Hc",(function(){return Hh})),n.d(e,"Ic",(function(){return Ol})),n.d(e,"Jc",(function(){return qc})),n.d(e,"Kc",(function(){return Yn})),n.d(e,"Lc",(function(){return Pi})),n.d(e,"Mc",(function(){return Fi})),n.d(e,"Nc",(function(){return So})),n.d(e,"Oc",(function(){return xl})),n.d(e,"Pc",(function(){return pd})),n.d(e,"Qc",(function(){return Io})),n.d(e,"Rc",(function(){return Za})),n.d(e,"Sc",(function(){return Qa})),n.d(e,"Tc",(function(){return Ja})),n.d(e,"Uc",(function(){return oe})),n.d(e,"Vc",(function(){return Ws})),n.d(e,"Wc",(function(){return Ds})),n.d(e,"Xc",(function(){return kc})),n.d(e,"Yc",(function(){return hi})),n.d(e,"Zc",(function(){return ci})),n.d(e,"ad",(function(){return di})),n.d(e,"bd",(function(){return Li})),n.d(e,"cd",(function(){return Bi})),n.d(e,"dd",(function(){return _c})),n.d(e,"ed",(function(){return oo})),n.d(e,"fd",(function(){return ih})),n.d(e,"gd",(function(){return Kr})),n.d(e,"hd",(function(){return Zi})),n.d(e,"id",(function(){return bt})),n.d(e,"jd",(function(){return Qi})),n.d(e,"kd",(function(){return xt})),n.d(e,"ld",(function(){return Di})),n.d(e,"md",(function(){return Wi})),n.d(e,"nd",(function(){return Zc})),n.d(e,"od",(function(){return ml})),n.d(e,"pd",(function(){return du})),n.d(e,"qd",(function(){return Ad})),n.d(e,"rd",(function(){return ru})),n.d(e,"sd",(function(){return Xu})),n.d(e,"td",(function(){return Yu})),n.d(e,"ud",(function(){return pc})),n.d(e,"vd",(function(){return mu})),n.d(e,"wd",(function(){return yu})),n.d(e,"xd",(function(){return Kt})),n.d(e,"yd",(function(){return Mc})),n.d(e,"zd",(function(){return ie})),n.d(e,"Ad",(function(){return te})),n.d(e,"Bd",(function(){return ee})),n.d(e,"Cd",(function(){return $t})),n.d(e,"Dd",(function(){return Ti})),n.d(e,"Ed",(function(){return Tt})),n.d(e,"Fd",(function(){return zi})),n.d(e,"Gd",(function(){return Nc})),n.d(e,"Hd",(function(){return bl})),n.d(e,"Id",(function(){return Ec})),n.d(e,"Jd",(function(){return si})),n.d(e,"Kd",(function(){return ui})),n.d(e,"Ld",(function(){return oi})),n.d(e,"Md",(function(){return be})),n.d(e,"Nd",(function(){return ge})),n.d(e,"Od",(function(){return T})),n.d(e,"Pd",(function(){return Ea})),n.d(e,"Qd",(function(){return gl})),n.d(e,"Rd",(function(){return An})),n.d(e,"Sd",(function(){return wd})),n.d(e,"Td",(function(){return Tn})),n.d(e,"Ud",(function(){return Wr})),n.d(e,"Vd",(function(){return $})),n.d(e,"Wd",(function(){return xs})),n.d(e,"Xd",(function(){return Fa})),n.d(e,"Yd",(function(){return lc})),n.d(e,"Zd",(function(){return dc})),n.d(e,"ae",(function(){return cc})),n.d(e,"be",(function(){return fc})),n.d(e,"ce",(function(){return hc})),n.d(e,"de",(function(){return oc})),n.d(e,"ee",(function(){return sc})),n.d(e,"fe",(function(){return ac})),n.d(e,"ge",(function(){return uc})),n.d(e,"he",(function(){return K})),n.d(e,"ie",(function(){return Jt})),n.d(e,"je",(function(){return Ot})),n.d(e,"ke",(function(){return X})),n.d(e,"le",(function(){return _t})),n.d(e,"me",(function(){return Xt})),n.d(e,"ne",(function(){return Qt})),n.d(e,"oe",(function(){return Zt})),n.d(e,"pe",(function(){return Gt})),n.d(e,"qe",(function(){return Yt})),n.d(e,"re",(function(){return Pt})),n.d(e,"se",(function(){return Yi})),n.d(e,"te",(function(){return mt})),n.d(e,"ue",(function(){return Vi})),n.d(e,"ve",(function(){return U})),n.d(e,"we",(function(){return Ai})),n.d(e,"xe",(function(){return jt})),n.d(e,"ye",(function(){return yi})),n.d(e,"ze",(function(){return D})),n.d(e,"Ae",(function(){return $i})),n.d(e,"Be",(function(){return St})),n.d(e,"Ce",(function(){return qi})),n.d(e,"De",(function(){return jc})),n.d(e,"Ee",(function(){return pa})),n.d(e,"Fe",(function(){return wl})),n.d(e,"Ge",(function(){return Oi})),n.d(e,"He",(function(){return qh})),n.d(e,"Ie",(function(){return et})),n.d(e,"Je",(function(){return yt})),n.d(e,"Ke",(function(){return pt})),n.d(e,"Le",(function(){return ut})),n.d(e,"Me",(function(){return ct})),n.d(e,"Ne",(function(){return st})),n.d(e,"Oe",(function(){return nt})),n.d(e,"Pe",(function(){return cl})),n.d(e,"Qe",(function(){return E})),n.d(e,"Re",(function(){return F})),n.d(e,"Se",(function(){return eh})),n.d(e,"Te",(function(){return Bs})),n.d(e,"Ue",(function(){return Eo})),n.d(e,"Ve",(function(){return Jh})),n.d(e,"We",(function(){return ef})),n.d(e,"Xe",(function(){return hl})),n.d(e,"Ye",(function(){return Pd})),n.d(e,"Ze",(function(){return Mu})),n.d(e,"af",(function(){return gu})),n.d(e,"bf",(function(){return Wd})),n.d(e,"cf",(function(){return oh})),n.d(e,"df",(function(){return Jl})),n.d(e,"ef",(function(){return nd})),n.d(e,"ff",(function(){return Yl})),n.d(e,"gf",(function(){return Zu})),n.d(e,"hf",(function(){return Gu})),n.d(e,"if",(function(){return ur})),n.d(e,"jf",(function(){return zc})),n.d(e,"kf",(function(){return Tc})),n.d(e,"lf",(function(){return xn})),n.d(e,"mf",(function(){return ri})),n.d(e,"nf",(function(){return ii})),n.d(e,"of",(function(){return j})),n.d(e,"pf",(function(){return wi})),n.d(e,"qf",(function(){return me})),n.d(e,"rf",(function(){return Ae})),n.d(e,"sf",(function(){return Ge})),n.d(e,"tf",(function(){return Xe})),n.d(e,"uf",(function(){return Ye})),n.d(e,"vf",(function(){return Ze})),n.d(e,"wf",(function(){return Qe})),n.d(e,"xf",(function(){return Ke})),n.d(e,"yf",(function(){return Le})),n.d(e,"zf",(function(){return Ve})),n.d(e,"Af",(function(){return We})),n.d(e,"Bf",(function(){return Ue})),n.d(e,"Cf",(function(){return De})),n.d(e,"Df",(function(){return He})),n.d(e,"Ef",(function(){return qe})),n.d(e,"Ff",(function(){return Je})),n.d(e,"Gf",(function(){return $e})),n.d(e,"Hf",(function(){return Ne})),n.d(e,"If",(function(){return Pe})),n.d(e,"Jf",(function(){return Re})),n.d(e,"Kf",(function(){return Te})),n.d(e,"Lf",(function(){return ze})),n.d(e,"Mf",(function(){return Ce})),n.d(e,"Nf",(function(){return Mi})),n.d(e,"Of",(function(){return ye})),n.d(e,"Pf",(function(){return Oe})),n.d(e,"Qf",(function(){return ti})),n.d(e,"Rf",(function(){return ei})),n.d(e,"Sf",(function(){return Ee})),n.d(e,"Tf",(function(){return Fe})),n.d(e,"Uf",(function(){return Be})),n.d(e,"Vf",(function(){return Ie})),n.d(e,"Wf",(function(){return je})),n.d(e,"Xf",(function(){return Si})),n.d(e,"Yf",(function(){return Se})),n.d(e,"Zf",(function(){return _e})),n.d(e,"ag",(function(){return rc})),n.d(e,"bg",(function(){return Vr})),n.d(e,"cg",(function(){return md})),n.d(e,"dg",(function(){return vl})),n.d(e,"eg",(function(){return we})),n.d(e,"fg",(function(){return Me})),n.d(e,"gg",(function(){return zt})),n.d(e,"hg",(function(){return ir})),n.d(e,"ig",(function(){return ud})),n.d(e,"jg",(function(){return hd})),n.d(e,"kg",(function(){return Ht})),n.d(e,"lg",(function(){return Ri})),n.d(e,"mg",(function(){return Q})),n.d(e,"ng",(function(){return Xh})),n.d(e,"og",(function(){return ai})),n.d(e,"pg",(function(){return ni})),n.d(e,"qg",(function(){return ji})),n.d(e,"rg",(function(){return Ci})),n.d(e,"sg",(function(){return Vs})),n.d(e,"tg",(function(){return js})),n.d(e,"ug",(function(){return nc})),n.d(e,"vg",(function(){return ph})),n.d(e,"wg",(function(){return Yh})),n.d(e,"xg",(function(){return sf})),n.d(e,"yg",(function(){return Lh})),n.d(e,"zg",(function(){return ae})),n.d(e,"Ag",(function(){return Mo})),n.d(e,"Bg",(function(){return Bd})),n.d(e,"Cg",(function(){return go})),n.d(e,"Dg",(function(){return Gn})),n.d(e,"Eg",(function(){return Ir})),n.d(e,"Fg",(function(){return Zh})),n.d(e,"Gg",(function(){return xd})),n.d(e,"Hg",(function(){return yl})),n.d(e,"Ig",(function(){return Qu})),n.d(e,"Jg",(function(){return il})),n.d(e,"Kg",(function(){return Td})),n.d(e,"Lg",(function(){return no})),n.d(e,"Mg",(function(){return Hs})),n.d(e,"Ng",(function(){return at})),n.d(e,"Og",(function(){return lt})),n.d(e,"Pg",(function(){return it})),n.d(e,"Qg",(function(){return hn})),n.d(e,"Rg",(function(){return nn})),n.d(e,"Sg",(function(){return sn})),n.d(e,"Tg",(function(){return Il})),n.d(e,"Ug",(function(){return ln})),n.d(e,"Vg",(function(){return an})),n.d(e,"Wg",(function(){return un})),n.d(e,"Xg",(function(){return Cc})),n.d(e,"Yg",(function(){return G})),n.d(e,"Zg",(function(){return J})),n.d(e,"ah",(function(){return z})),n.d(e,"bh",(function(){return _i})),n.d(e,"ch",(function(){return Gh})),n.d(e,"dh",(function(){return $n})),n.d(e,"eh",(function(){return Yc})),n.d(e,"fh",(function(){return hf})),n.d(e,"gh",(function(){return Qh})),n.d(e,"hh",(function(){return Kh})),n.d(e,"ih",(function(){return ja})),n.d(e,"jh",(function(){return xi})),n.d(e,"kh",(function(){return bi})),n.d(e,"lh",(function(){return gi})),n.d(e,"mh",(function(){return $h})),n.d(e,"nh",(function(){return Nt})),n.d(e,"oh",(function(){return Ga})),n.d(e,"ph",(function(){return Ka})),n.d(e,"qh",(function(){return Xa})),n.d(e,"rh",(function(){return Ya})),n.d(e,"sh",(function(){return cd})),n.d(e,"th",(function(){return fd})),n.d(e,"uh",(function(){return As})),n.d(e,"vh",(function(){return ne})),n.d(e,"wh",(function(){return fe})),n.d(e,"xh",(function(){return pe})),n.d(e,"yh",(function(){return ue})),n.d(e,"zh",(function(){return le})),n.d(e,"Ah",(function(){return de})),n.d(e,"Bh",(function(){return se})),n.d(e,"Ch",(function(){return N})),n.d(e,"Dh",(function(){return jn})),n.d(e,"Eh",(function(){return cr})),n.d(e,"Fh",(function(){return er})),n.d(e,"Gh",(function(){return Ic})),n.d(e,"Hh",(function(){return Ou})),n.d(e,"Ih",(function(){return or})),n.d(e,"Jh",(function(){return ar})),n.d(e,"Kh",(function(){return pn})),n.d(e,"Lh",(function(){return Fs})),n.d(e,"Mh",(function(){return nr})),n.d(e,"Nh",(function(){return vn})),n.d(e,"Oh",(function(){return tc})),n.d(e,"Ph",(function(){return vi})),n.d(e,"Qh",(function(){return fi})),n.d(e,"Rh",(function(){return tt})),n.d(e,"Sh",(function(){return pi})),n.d(e,"Th",(function(){return Ii})),n.d(e,"Uh",(function(){return Cn})),n.d(e,"Vh",(function(){return Ms})),n.d(e,"Wh",(function(){return Pn})),n.d(e,"Xh",(function(){return Rn})),n.d(e,"Yh",(function(){return uf})),n.d(e,"Zh",(function(){return _s})),n.d(e,"ai",(function(){return Ss})),n.d(e,"bi",(function(){return Nn})),n.d(e,"ci",(function(){return Ln})),n.d(e,"di",(function(){return Vn})),n.d(e,"ei",(function(){return Fn}));var r=n(15),o=n(451),h=n(30),c=n(405),l=n(383),d=n(306),f=n(299),v=n(303),y=n(12),m=(n(434),n(142)),x=n(143);n(74),n(23),n(71),n(72),n(111),n(435),n(436),n(25),n(437),n(73),n(54),n(70),n(308),n(200),n(309),n(438),n(311),n(312),n(41),n(439),n(440),n(441),n(219),n(442),n(443),n(390),n(444),n(34),n(35),n(26),n(16),n(215),n(304),n(33),n(55),n(346),n(46),n(205),n(203),n(56),n(347),n(313),n(348),n(445),n(395),n(396),n(349),n(314),n(397),n(350),n(398),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(401),n(365),n(366),n(367),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(446),n(22),n(47),n(92);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){Object(y.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function M(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,a){if(t){if("string"==typeof t)return S(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?S(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var h,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,h=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw h}}}}function S(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=Array(a);e<a;e++)n[e]=t[e];return n}function _(t,e,n,r){var p=Object(c.a)(Object(f.a)(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof p?function(t){return p.apply(n,t)}:p}function O(t,e,n){return e=Object(f.a)(e),Object(d.a)(t,A()?Reflect.construct(e,n||[],Object(f.a)(t).constructor):e.apply(t,n))}function A(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(A=function(){return!!t})()}var j="172",T={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},z={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},C=0,I=1,B=2,R=3,P=0,E=1,F=2,N=3,L=0,V=1,W=2,U=0,D=1,H=2,J=3,X=4,Y=5,Z=100,G=101,Q=102,K=103,$=104,tt=200,et=201,it=202,nt=203,at=204,st=205,ot=206,ut=207,ht=208,ct=209,lt=210,ft=211,pt=212,vt=213,yt=214,mt=0,gt=1,bt=2,xt=3,kt=4,wt=5,Mt=6,St=7,_t=0,Ot=1,At=2,jt=0,Tt=1,zt=2,Ct=3,It=4,Bt=5,Rt=6,Pt=7,Et="attached",Ft="detached",Nt=300,Lt=301,Vt=302,Wt=303,Ut=304,Dt=306,Ht=1e3,qt=1001,Jt=1002,Xt=1003,Yt=1004,Zt=1004,Gt=1005,Qt=1005,Kt=1006,$t=1007,te=1007,ee=1008,ie=1008,ne=1009,re=1010,ae=1011,se=1012,oe=1013,ue=1014,he=1015,ce=1016,le=1017,de=1018,fe=1020,pe=35902,ve=1021,ye=1022,me=1023,ge=1024,be=1025,xe=1026,ke=1027,we=1028,Me=1029,Se=1030,_e=1031,Oe=1032,Ae=1033,je=33776,Te=33777,ze=33778,Ce=33779,Ie=35840,Be=35841,Re=35842,Pe=35843,Ee=36196,Fe=37492,Ne=37496,Le=37808,Ve=37809,We=37810,Ue=37811,De=37812,He=37813,qe=37814,Je=37815,Xe=37816,Ye=37817,Ze=37818,Ge=37819,Qe=37820,Ke=37821,$e=36492,ti=36494,ei=36495,ii=36283,ni=36284,ri=36285,ai=36286,si=2200,oi=2201,ui=2202,hi=2300,ci=2301,di=2302,fi=2400,pi=2401,vi=2402,yi=2500,mi=2501,gi=0,bi=1,xi=2,ki=3200,wi=3201,Mi=3202,Si=3203,_i=0,Oi=1,Ai="",ji="srgb",Ti="srgb-linear",zi="linear",Ci="srgb",Ii=0,Bi=7680,Ri=7681,Pi=7682,Ei=7683,Fi=34055,Ni=34056,Li=5386,Vi=512,Wi=513,Ui=514,Di=515,Hi=516,qi=517,Ji=518,Xi=519,Yi=512,Zi=513,Gi=514,Qi=515,Ki=516,$i=517,tn=518,en=519,nn=35044,rn=35048,an=35040,sn=35045,on=35049,un=35041,hn=35046,cn=35050,ln=35042,dn="100",fn="300 es",pn=2e3,vn=2001,yn=function(){return Object(x.a)((function t(){Object(m.a)(this,t)}),[{key:"addEventListener",value:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}},{key:"hasEventListener",value:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}},{key:"removeEventListener",value:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t);t.target=null}}}}])}(),mn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],gn=1234567,bn=Math.PI/180,xn=180/Math.PI;function kn(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(mn[255&t]+mn[t>>8&255]+mn[t>>16&255]+mn[t>>24&255]+"-"+mn[255&e]+mn[e>>8&255]+"-"+mn[e>>16&15|64]+mn[e>>24&255]+"-"+mn[63&n|128]+mn[n>>8&255]+"-"+mn[n>>16&255]+mn[n>>24&255]+mn[255&r]+mn[r>>8&255]+mn[r>>16&255]+mn[r>>24&255]).toLowerCase()}function wn(t,e,n){return Math.max(e,Math.min(n,t))}function Mn(t,e){return(t%e+e)%e}function Sn(t,e,n){return(1-n)*t+n*e}function _n(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function On(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}var An={DEG2RAD:bn,RAD2DEG:xn,generateUUID:kn,clamp:wn,euclideanModulo:Mn,mapLinear:function(t,e,n,r,o){return r+(t-e)*(o-r)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:Sn,damp:function(t,e,n,dt){return Sn(t,e,1-Math.exp(-n*dt))},pingpong:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e-Math.abs(Mn(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(s){void 0!==s&&(gn=s);var t=gn+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(t){return t*bn},radToDeg:function(t){return t*xn},isPowerOfTwo:function(t){return!(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(q,a,b,t,e){var n=Math.cos,r=Math.sin,o=n(b/2),h=r(b/2),c=n((a+t)/2),l=r((a+t)/2),d=n((a-t)/2),f=r((a-t)/2),v=n((t-a)/2),y=r((t-a)/2);switch(e){case"XYX":q.set(o*l,h*d,h*f,o*c);break;case"YZY":q.set(h*f,o*l,h*d,o*c);break;case"ZXZ":q.set(h*d,h*f,o*l,o*c);break;case"XZX":q.set(o*l,h*y,h*v,o*c);break;case"YXY":q.set(h*v,o*l,h*y,o*c);break;case"ZYZ":q.set(h*y,h*v,o*l,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+e)}},normalize:On,denormalize:_n},jn=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(m.a)(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}),[{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"addScalar",value:function(s){return this.x+=s,this.y+=s,this}},{key:"addVectors",value:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this}},{key:"addScaledVector",value:function(t,s){return this.x+=t.x*s,this.y+=t.y*s,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"subScalar",value:function(s){return this.x-=s,this.y-=s,this}},{key:"subVectors",value:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"applyMatrix3",value:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:"clamp",value:function(t,e){return this.x=wn(this.x,t.x,e.x),this.y=wn(this.y,t.y,e.y),this}},{key:"clampScalar",value:function(t,e){return this.x=wn(this.x,t,e),this.y=wn(this.y,t,e),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(wn(n,t,e))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var t=Math.atan2(-this.y,-this.x)+Math.PI;return t}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(wn(n,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}},{key:"fromBufferAttribute",value:function(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}},{key:"rotateAround",value:function(t,e){var n=Math.cos(e),s=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*s+t.x,this.y=r*s+o*n+t.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:case"end":return t.stop()}}),t,this)}))}])}(),Tn=function(){return Object(x.a)((function t(e,n,r,o,h,c,l,d,f){Object(m.a)(this,t),t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,n,r,o,h,c,l,d,f)}),[{key:"set",value:function(t,e,n,r,o,h,c,l,d){var f=this.elements;return f[0]=t,f[1]=r,f[2]=c,f[3]=e,f[4]=o,f[5]=l,f[6]=n,f[7]=h,f[8]=d,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}},{key:"extractBasis",value:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(a,b){var t=a.elements,e=b.elements,n=this.elements,r=t[0],o=t[3],h=t[6],c=t[1],l=t[4],d=t[7],f=t[2],v=t[5],y=t[8],m=e[0],x=e[3],k=e[6],w=e[1],M=e[4],S=e[7],_=e[2],O=e[5],A=e[8];return n[0]=r*m+o*w+h*_,n[3]=r*x+o*M+h*O,n[6]=r*k+o*S+h*A,n[1]=c*m+l*w+d*_,n[4]=c*x+l*M+d*O,n[7]=c*k+l*S+d*A,n[2]=f*m+v*w+y*_,n[5]=f*x+v*M+y*O,n[8]=f*k+v*S+y*A,this}},{key:"multiplyScalar",value:function(s){var t=this.elements;return t[0]*=s,t[3]*=s,t[6]*=s,t[1]*=s,t[4]*=s,t[7]*=s,t[2]*=s,t[5]*=s,t[8]*=s,this}},{key:"determinant",value:function(){var t=this.elements,a=t[0],b=t[1],e=t[2],n=t[3],r=t[4],o=t[5],g=t[6],h=t[7],i=t[8];return a*r*i-a*o*h-b*n*i+b*o*g+e*n*h-e*r*g}},{key:"invert",value:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],o=t[3],h=t[4],c=t[5],l=t[6],d=t[7],f=t[8],v=f*h-c*d,y=c*l-f*o,m=d*o-h*l,x=e*v+n*y+r*m;if(0===x)return this.set(0,0,0,0,0,0,0,0,0);var k=1/x;return t[0]=v*k,t[1]=(r*d-f*n)*k,t[2]=(c*n-r*h)*k,t[3]=y*k,t[4]=(f*e-r*l)*k,t[5]=(r*o-c*e)*k,t[6]=m*k,t[7]=(n*l-d*e)*k,t[8]=(h*e-n*o)*k,this}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}},{key:"getNormalMatrix",value:function(t){return this.setFromMatrix4(t).invert().transpose()}},{key:"transposeIntoArray",value:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}},{key:"setUvTransform",value:function(t,e,n,r,o,h,c){var l=Math.cos(o),s=Math.sin(o);return this.set(n*l,n*s,-n*(l*h+s*c)+h+t,-r*s,r*l,-r*(-s*h+l*c)+c+e,0,0,1),this}},{key:"scale",value:function(t,e){return this.premultiply(zn.makeScale(t,e)),this}},{key:"rotate",value:function(t){return this.premultiply(zn.makeRotation(-t)),this}},{key:"translate",value:function(t,e){return this.premultiply(zn.makeTranslation(t,e)),this}},{key:"makeTranslation",value:function(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}},{key:"makeRotation",value:function(t){var e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,s,e,0,0,0,1),this}},{key:"makeScale",value:function(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}},{key:"equals",value:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;i<9;i++)this.elements[i]=t[i+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}])}(),zn=new Tn;function Cn(t){for(var i=t.length-1;i>=0;--i)if(t[i]>=65535)return!0;return!1}var In={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Bn(t,e){return new In[t](e)}function Rn(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Pn(){var canvas=Rn("canvas");return canvas.style.display="block",canvas}var En={};function Fn(t){t in En||(En[t]=!0,console.warn(t))}function Nn(t,e,n){return new Promise((function(r,o){setTimeout((function h(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:o();break;case t.TIMEOUT_EXPIRED:setTimeout(h,n);break;default:r()}}),n)}))}function Ln(t){var e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Vn(t){var e=t.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}var Wn=(new Tn).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Un=(new Tn).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Dn(){var t={enabled:!0,workingColorSpace:Ti,spaces:{},convert:function(t,e,n){return!1!==this.enabled&&e!==n&&e&&n?(this.spaces[e].transfer===Ci&&(t.r=Jn(t.r),t.g=Jn(t.g),t.b=Jn(t.b)),this.spaces[e].primaries!==this.spaces[n].primaries&&(t.applyMatrix3(this.spaces[e].toXYZ),t.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===Ci&&(t.r=Xn(t.r),t.g=Xn(t.g),t.b=Xn(t.b)),t):t},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)},getPrimaries:function(t){return this.spaces[t].primaries},getTransfer:function(t){return t===Ai?zi:this.spaces[t].transfer},getLuminanceCoefficients:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return t.fromArray(this.spaces[e].luminanceCoefficients)},define:function(t){Object.assign(this.spaces,t)},_getMatrix:function(t,e,n){return t.copy(this.spaces[e].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(t){return this.spaces[t].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[t].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define(Object(y.a)(Object(y.a)({},Ti,{primaries:e,whitePoint:r,transfer:zi,toXYZ:Wn,fromXYZ:Un,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:ji},outputColorSpaceConfig:{drawingBufferColorSpace:ji}}),ji,{primaries:e,whitePoint:r,transfer:Ci,toXYZ:Wn,fromXYZ:Un,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:ji}})),t}var Hn,qn=Dn();function Jn(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Xn(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var Yn=function(){return Object(x.a)((function t(){Object(m.a)(this,t)}),null,[{key:"getDataURL",value:function(image){if(/^data:/i.test(image.src))return image.src;if("undefined"==typeof HTMLCanvasElement)return image.src;var canvas;if(image instanceof HTMLCanvasElement)canvas=image;else{void 0===Hn&&(Hn=Rn("canvas")),Hn.width=image.width,Hn.height=image.height;var t=Hn.getContext("2d");image instanceof ImageData?t.putImageData(image,0,0):t.drawImage(image,0,0,image.width,image.height),canvas=Hn}return canvas.width>2048||canvas.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",image),canvas.toDataURL("image/jpeg",.6)):canvas.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(image){if("undefined"!=typeof HTMLImageElement&&image instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&image instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap){var canvas=Rn("canvas");canvas.width=image.width,canvas.height=image.height;var t=canvas.getContext("2d");t.drawImage(image,0,0,image.width,image.height);for(var e=t.getImageData(0,0,image.width,image.height),data=e.data,i=0;i<data.length;i++)data[i]=255*Jn(data[i]/255);return t.putImageData(e,0,0),canvas}if(image.data){for(var n=image.data.slice(0),r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(255*Jn(n[r]/255)):n[r]=Jn(n[r]);return{data:n,width:image.width,height:image.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),image}}])}(),Zn=0,Gn=function(){return Object(x.a)((function t(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(m.a)(this,t),this.isSource=!0,Object.defineProperty(this,"id",{value:Zn++}),this.uuid=kn(),this.data=data,this.dataReady=!0,this.version=0}),[{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"toJSON",value:function(meta){var t=void 0===meta||"string"==typeof meta;if(!t&&void 0!==meta.images[this.uuid])return meta.images[this.uuid];var output={uuid:this.uuid,url:""},data=this.data;if(null!==data){var e;if(Array.isArray(data)){e=[];for(var i=0,n=data.length;i<n;i++)data[i].isDataTexture?e.push(Qn(data[i].image)):e.push(Qn(data[i]))}else e=Qn(data);output.url=e}return t||(meta.images[this.uuid]=output),output}}])}();function Qn(image){return"undefined"!=typeof HTMLImageElement&&image instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&image instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap?Yn.getDataURL(image):image.data?{data:Array.from(image.data),width:image.width,height:image.height,type:image.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Kn=0,$n=function(t){function e(){var t,image=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_IMAGE,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DEFAULT_MAPPING,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qt,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:qt,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Kt,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ee,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:me,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:ne,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:e.DEFAULT_ANISOTROPY,v=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ai;return Object(m.a)(this,e),(t=O(this,e)).isTexture=!0,Object.defineProperty(t,"id",{value:Kn++}),t.uuid=kn(),t.name="",t.source=new Gn(image),t.mipmaps=[],t.mapping=n,t.channel=0,t.wrapS=r,t.wrapT=o,t.magFilter=h,t.minFilter=c,t.anisotropy=f,t.format=l,t.internalFormat=null,t.type=d,t.offset=new jn(0,0),t.repeat=new jn(1,1),t.center=new jn(0,0),t.rotation=0,t.matrixAutoUpdate=!0,t.matrix=new Tn,t.generateMipmaps=!0,t.premultiplyAlpha=!1,t.flipY=!0,t.unpackAlignment=4,t.colorSpace=v,t.userData={},t.version=0,t.onUpdate=null,t.renderTarget=null,t.isRenderTargetTexture=!1,t.pmremVersion=0,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"image",get:function(){return this.source.data},set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.source.data=t}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(source){return this.name=source.name,this.source=source.source,this.mipmaps=source.mipmaps.slice(0),this.mapping=source.mapping,this.channel=source.channel,this.wrapS=source.wrapS,this.wrapT=source.wrapT,this.magFilter=source.magFilter,this.minFilter=source.minFilter,this.anisotropy=source.anisotropy,this.format=source.format,this.internalFormat=source.internalFormat,this.type=source.type,this.offset.copy(source.offset),this.repeat.copy(source.repeat),this.center.copy(source.center),this.rotation=source.rotation,this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrix.copy(source.matrix),this.generateMipmaps=source.generateMipmaps,this.premultiplyAlpha=source.premultiplyAlpha,this.flipY=source.flipY,this.unpackAlignment=source.unpackAlignment,this.colorSpace=source.colorSpace,this.renderTarget=source.renderTarget,this.isRenderTargetTexture=source.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(source.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(meta){var t=void 0===meta||"string"==typeof meta;if(!t&&void 0!==meta.textures[this.uuid])return meta.textures[this.uuid];var output={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(meta).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(output.userData=this.userData),t||(meta.textures[this.uuid]=output),output}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(t){if(this.mapping!==Nt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Ht:t.x=t.x-Math.floor(t.x);break;case qt:t.x=t.x<0?0:1;break;case Jt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Ht:t.y=t.y-Math.floor(t.y);break;case qt:t.y=t.y<0?0:1;break;case Jt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}},{key:"needsUpdate",set:function(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}},{key:"needsPMREMUpdate",set:function(t){!0===t&&this.pmremVersion++}}])}(yn);$n.DEFAULT_IMAGE=null,$n.DEFAULT_MAPPING=Nt,$n.DEFAULT_ANISOTROPY=1;var er=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(m.a)(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=o}),[{key:"width",get:function(){return this.z},set:function(t){this.z=t}},{key:"height",get:function(){return this.w},set:function(t){this.w=t}},{key:"set",value:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setW",value:function(t){return this.w=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}},{key:"addScalar",value:function(s){return this.x+=s,this.y+=s,this.z+=s,this.w+=s,this}},{key:"addVectors",value:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this}},{key:"addScaledVector",value:function(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this.w+=t.w*s,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}},{key:"subScalar",value:function(s){return this.x-=s,this.y-=s,this.z-=s,this.w-=s,this}},{key:"subVectors",value:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"applyMatrix4",value:function(t){var e=this.x,n=this.y,r=this.z,o=this.w,h=t.elements;return this.x=h[0]*e+h[4]*n+h[8]*r+h[12]*o,this.y=h[1]*e+h[5]*n+h[9]*r+h[13]*o,this.z=h[2]*e+h[6]*n+h[10]*r+h[14]*o,this.w=h[3]*e+h[7]*n+h[11]*r+h[15]*o,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"setAxisAngleFromQuaternion",value:function(q){this.w=2*Math.acos(q.w);var s=Math.sqrt(1-q.w*q.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=q.x/s,this.y=q.y/s,this.z=q.z/s),this}},{key:"setAxisAngleFromRotationMatrix",value:function(t){var e,n,r,o,h=.01,c=.1,l=t.elements,d=l[0],f=l[4],v=l[8],y=l[1],m=l[5],x=l[9],k=l[2],w=l[6],M=l[10];if(Math.abs(f-y)<h&&Math.abs(v-k)<h&&Math.abs(x-w)<h){if(Math.abs(f+y)<c&&Math.abs(v+k)<c&&Math.abs(x+w)<c&&Math.abs(d+m+M-3)<c)return this.set(1,0,0,0),this;e=Math.PI;var S=(d+1)/2,_=(m+1)/2,O=(M+1)/2,A=(f+y)/4,j=(v+k)/4,T=(x+w)/4;return S>_&&S>O?S<h?(n=0,r=.707106781,o=.707106781):(r=A/(n=Math.sqrt(S)),o=j/n):_>O?_<h?(n=.707106781,r=0,o=.707106781):(n=A/(r=Math.sqrt(_)),o=T/r):O<h?(n=.707106781,r=.707106781,o=0):(n=j/(o=Math.sqrt(O)),r=T/o),this.set(n,r,o,e),this}var s=Math.sqrt((w-x)*(w-x)+(v-k)*(v-k)+(y-f)*(y-f));return Math.abs(s)<.001&&(s=1),this.x=(w-x)/s,this.y=(v-k)/s,this.z=(y-f)/s,this.w=Math.acos((d+m+M-1)/2),this}},{key:"setFromMatrixPosition",value:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}},{key:"clamp",value:function(t,e){return this.x=wn(this.x,t.x,e.x),this.y=wn(this.y,t.y,e.y),this.z=wn(this.z,t.z,e.z),this.w=wn(this.w,t.w,e.w),this}},{key:"clampScalar",value:function(t,e){return this.x=wn(this.x,t,e),this.y=wn(this.y,t,e),this.z=wn(this.z,t,e),this.w=wn(this.w,t,e),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(wn(n,t,e))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}},{key:"fromBufferAttribute",value:function(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:return t.next=8,this.w;case 8:case"end":return t.stop()}}),t,this)}))}])}(),ir=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(m.a)(this,e),(t=O(this,e)).isRenderTarget=!0,t.width=n,t.height=r,t.depth=1,t.scissor=new er(0,0,n,r),t.scissorTest=!1,t.viewport=new er(0,0,n,r);var image={width:n,height:r,depth:1};o=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Kt,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},o);var h=new $n(image,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.colorSpace);h.flipY=!1,h.generateMipmaps=o.generateMipmaps,h.internalFormat=o.internalFormat,t.textures=[];for(var c=o.count,i=0;i<c;i++)t.textures[i]=h.clone(),t.textures[i].isRenderTargetTexture=!0,t.textures[i].renderTarget=t;return t.depthBuffer=o.depthBuffer,t.stencilBuffer=o.stencilBuffer,t.resolveDepthBuffer=o.resolveDepthBuffer,t.resolveStencilBuffer=o.resolveStencilBuffer,t._depthTexture=null,t.depthTexture=o.depthTexture,t.samples=o.samples,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"texture",get:function(){return this.textures[0]},set:function(t){this.textures[0]=t}},{key:"depthTexture",get:function(){return this._depthTexture},set:function(t){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==t&&(t.renderTarget=this),this._depthTexture=t}},{key:"setSize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(var i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=t,this.textures[i].image.height=e,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(source){this.width=source.width,this.height=source.height,this.depth=source.depth,this.scissor.copy(source.scissor),this.scissorTest=source.scissorTest,this.viewport.copy(source.viewport),this.textures.length=0;for(var i=0,t=source.textures.length;i<t;i++)this.textures[i]=source.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;var image=Object.assign({},source.texture.image);return this.texture.source=new Gn(image),this.depthBuffer=source.depthBuffer,this.stencilBuffer=source.stencilBuffer,this.resolveDepthBuffer=source.resolveDepthBuffer,this.resolveStencilBuffer=source.resolveStencilBuffer,null!==source.depthTexture&&(this.depthTexture=source.depthTexture.clone()),this.samples=source.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}])}(yn),nr=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(m.a)(this,e),(t=O(this,e,[n,r,o])).isWebGLRenderTarget=!0,t}return Object(v.a)(e,t),Object(x.a)(e)}(ir),rr=function(t){function e(){var t,data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(m.a)(this,e),(t=O(this,e,[null])).isDataArrayTexture=!0,t.image={data:data,width:n,height:r,depth:o},t.magFilter=Xt,t.minFilter=Xt,t.wrapR=qt,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t.layerUpdates=new Set,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"addLayerUpdate",value:function(t){this.layerUpdates.add(t)}},{key:"clearLayerUpdates",value:function(){this.layerUpdates.clear()}}])}($n),ar=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(m.a)(this,e),(t=O(this,e,[n,r,h])).isWebGLArrayRenderTarget=!0,t.depth=o,t.texture=new rr(null,n,r,o),t.texture.isRenderTargetTexture=!0,t}return Object(v.a)(e,t),Object(x.a)(e)}(nr),sr=function(t){function e(){var t,data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(m.a)(this,e),(t=O(this,e,[null])).isData3DTexture=!0,t.image={data:data,width:n,height:r,depth:o},t.magFilter=Xt,t.minFilter=Xt,t.wrapR=qt,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t}return Object(v.a)(e,t),Object(x.a)(e)}($n),or=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(m.a)(this,e),(t=O(this,e,[n,r,h])).isWebGL3DRenderTarget=!0,t.depth=o,t.texture=new sr(null,n,r,o),t.texture.isRenderTargetTexture=!0,t}return Object(v.a)(e,t),Object(x.a)(e)}(nr),ur=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(m.a)(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=o}),[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},{key:"set",value:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t._x,r=t._y,o=t._z,h=t._order,c=Math.cos,l=Math.sin,d=c(n/2),f=c(r/2),v=c(o/2),y=l(n/2),m=l(r/2),x=l(o/2);switch(h){case"XYZ":this._x=y*f*v+d*m*x,this._y=d*m*v-y*f*x,this._z=d*f*x+y*m*v,this._w=d*f*v-y*m*x;break;case"YXZ":this._x=y*f*v+d*m*x,this._y=d*m*v-y*f*x,this._z=d*f*x-y*m*v,this._w=d*f*v+y*m*x;break;case"ZXY":this._x=y*f*v-d*m*x,this._y=d*m*v+y*f*x,this._z=d*f*x+y*m*v,this._w=d*f*v-y*m*x;break;case"ZYX":this._x=y*f*v-d*m*x,this._y=d*m*v+y*f*x,this._z=d*f*x-y*m*v,this._w=d*f*v+y*m*x;break;case"YZX":this._x=y*f*v+d*m*x,this._y=d*m*v+y*f*x,this._z=d*f*x-y*m*v,this._w=d*f*v-y*m*x;break;case"XZY":this._x=y*f*v-d*m*x,this._y=d*m*v-y*f*x,this._z=d*f*x+y*m*v,this._w=d*f*v+y*m*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return!0===e&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(t,e){var n=e/2,s=Math.sin(n);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=t.elements,n=e[0],r=e[4],o=e[8],h=e[1],c=e[5],l=e[9],d=e[2],f=e[6],v=e[10],y=n+c+v;if(y>0){var s=.5/Math.sqrt(y+1);this._w=.25/s,this._x=(f-l)*s,this._y=(o-d)*s,this._z=(h-r)*s}else if(n>c&&n>v){var m=2*Math.sqrt(1+n-c-v);this._w=(f-l)/m,this._x=.25*m,this._y=(r+h)/m,this._z=(o+d)/m}else if(c>v){var x=2*Math.sqrt(1+c-n-v);this._w=(o-d)/x,this._x=(r+h)/x,this._y=.25*x,this._z=(l+f)/x}else{var k=2*Math.sqrt(1+v-n-c);this._w=(h-r)/k,this._x=(o+d)/k,this._y=(l+f)/k,this._z=.25*k}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(t,e){var n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(q){return 2*Math.acos(Math.abs(wn(this.dot(q),-1,1)))}},{key:"rotateTowards",value:function(q,t){var e=this.angleTo(q);if(0===e)return this;var n=Math.min(1,t/e);return this.slerp(q,n),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}},{key:"multiply",value:function(q){return this.multiplyQuaternions(this,q)}},{key:"premultiply",value:function(q){return this.multiplyQuaternions(q,this)}},{key:"multiplyQuaternions",value:function(a,b){var t=a._x,e=a._y,n=a._z,r=a._w,o=b._x,h=b._y,c=b._z,l=b._w;return this._x=t*l+r*o+e*c-n*h,this._y=e*l+r*h+n*o-t*c,this._z=n*l+r*c+t*h-e*o,this._w=r*l-t*o-e*h-n*c,this._onChangeCallback(),this}},{key:"slerp",value:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,o=this._z,h=this._w,c=h*t._w+n*t._x+r*t._y+o*t._z;if(c<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,c=-c):this.copy(t),c>=1)return this._w=h,this._x=n,this._y=r,this._z=o,this;var l=1-c*c;if(l<=Number.EPSILON){var s=1-e;return this._w=s*h+e*this._w,this._x=s*n+e*this._x,this._y=s*r+e*this._y,this._z=s*o+e*this._z,this.normalize(),this}var d=Math.sqrt(l),f=Math.atan2(d,c),v=Math.sin((1-e)*f)/d,y=Math.sin(e*f)/d;return this._w=h*v+this._w*y,this._x=n*v+this._x*y,this._y=r*v+this._y*y,this._z=o*v+this._z*y,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(t,e,n){return this.copy(t).slerp(e,n)}},{key:"random",value:function(){var t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(r*Math.sin(t),r*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}},{key:"fromBufferAttribute",value:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._x;case 2:return t.next=4,this._y;case 4:return t.next=6,this._z;case 6:return t.next=8,this._w;case 8:case"end":return t.stop()}}),t,this)}))}],[{key:"slerpFlat",value:function(t,e,n,r,o,h,c){var l=n[r+0],d=n[r+1],f=n[r+2],v=n[r+3],y=o[h+0],m=o[h+1],x=o[h+2],k=o[h+3];if(0===c)return t[e+0]=l,t[e+1]=d,t[e+2]=f,void(t[e+3]=v);if(1===c)return t[e+0]=y,t[e+1]=m,t[e+2]=x,void(t[e+3]=k);if(v!==k||l!==y||d!==m||f!==x){var s=1-c,w=l*y+d*m+f*x+v*k,M=w>=0?1:-1,S=1-w*w;if(S>Number.EPSILON){var _=Math.sqrt(S),O=Math.atan2(_,w*M);s=Math.sin(s*O)/_,c=Math.sin(c*O)/_}var A=c*M;if(l=l*s+y*A,d=d*s+m*A,f=f*s+x*A,v=v*s+k*A,s===1-c){var j=1/Math.sqrt(l*l+d*d+f*f+v*v);l*=j,d*=j,f*=j,v*=j}}t[e]=l,t[e+1]=d,t[e+2]=f,t[e+3]=v}},{key:"multiplyQuaternionsFlat",value:function(t,e,n,r,o,h){var c=n[r],l=n[r+1],d=n[r+2],f=n[r+3],v=o[h],y=o[h+1],m=o[h+2],x=o[h+3];return t[e]=c*x+f*v+l*m-d*y,t[e+1]=l*x+f*y+d*v-c*m,t[e+2]=d*x+f*m+c*y-l*v,t[e+3]=f*x-c*v-l*y-d*m,t}}])}(),cr=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(m.a)(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}),[{key:"set",value:function(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}},{key:"addScalar",value:function(s){return this.x+=s,this.y+=s,this.z+=s,this}},{key:"addVectors",value:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this}},{key:"addScaledVector",value:function(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}},{key:"subScalar",value:function(s){return this.x-=s,this.y-=s,this.z-=s,this}},{key:"subVectors",value:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this}},{key:"applyEuler",value:function(t){return this.applyQuaternion(dr.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,e){return this.applyQuaternion(dr.setFromAxisAngle(t,e))}},{key:"applyMatrix3",value:function(t){var e=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[3]*n+o[6]*r,this.y=o[1]*e+o[4]*n+o[7]*r,this.z=o[2]*e+o[5]*n+o[8]*r,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var e=this.x,n=this.y,r=this.z,o=t.elements,h=1/(o[3]*e+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*e+o[4]*n+o[8]*r+o[12])*h,this.y=(o[1]*e+o[5]*n+o[9]*r+o[13])*h,this.z=(o[2]*e+o[6]*n+o[10]*r+o[14])*h,this}},{key:"applyQuaternion",value:function(q){var t=this.x,e=this.y,n=this.z,r=q.x,o=q.y,h=q.z,c=q.w,l=2*(o*n-h*e),d=2*(h*t-r*n),f=2*(r*e-o*t);return this.x=t+c*l+o*f-h*d,this.y=e+c*d+h*l-r*f,this.z=n+c*f+r*d-o*l,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var e=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r,this.y=o[1]*e+o[5]*n+o[9]*r,this.z=o[2]*e+o[6]*n+o[10]*r,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,e){return this.x=wn(this.x,t.x,e.x),this.y=wn(this.y,t.y,e.y),this.z=wn(this.z,t.z,e.z),this}},{key:"clampScalar",value:function(t,e){return this.x=wn(this.x,t,e),this.y=wn(this.y,t,e),this.z=wn(this.z,t,e),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(wn(n,t,e))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}},{key:"cross",value:function(t){return this.crossVectors(this,t)}},{key:"crossVectors",value:function(a,b){var t=a.x,e=a.y,n=a.z,r=b.x,o=b.y,h=b.z;return this.x=e*h-n*o,this.y=n*r-t*h,this.z=t*o-e*r,this}},{key:"projectOnVector",value:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}},{key:"projectOnPlane",value:function(t){return lr.copy(this).projectOnVector(t),this.sub(lr)}},{key:"reflect",value:function(t){return this.sub(lr.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(wn(n,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(s){return this.setFromSphericalCoords(s.radius,s.phi,s.theta)}},{key:"setFromSphericalCoords",value:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}},{key:"setFromMatrixPosition",value:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}},{key:"setFromMatrixScale",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:"setFromMatrix3Column",value:function(t,e){return this.fromArray(t.elements,3*e)}},{key:"setFromEuler",value:function(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}},{key:"setFromColor",value:function(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var t=Math.random()*Math.PI*2,u=2*Math.random()-1,e=Math.sqrt(1-u*u);return this.x=e*Math.cos(t),this.y=u,this.z=e*Math.sin(t),this}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:case"end":return t.stop()}}),t,this)}))}])}(),lr=new cr,dr=new ur,fr=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cr(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cr(-1/0,-1/0,-1/0);Object(m.a)(this,t),this.isBox3=!0,this.min=e,this.max=n}),[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromArray",value:function(t){this.makeEmpty();for(var i=0,e=t.length;i<e;i+=3)this.expandByPoint(vr.fromArray(t,i));return this}},{key:"setFromBufferAttribute",value:function(t){this.makeEmpty();for(var i=0,e=t.count;i<e;i++)this.expandByPoint(vr.fromBufferAttribute(t,i));return this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var i=0,e=t.length;i<e;i++)this.expandByPoint(t[i]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var n=vr.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}},{key:"setFromObject",value:function(object){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(object,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"expandByObject",value:function(object){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];object.updateWorldMatrix(!1,!1);var e=object.geometry;if(void 0!==e){var n=e.getAttribute("position");if(!0===t&&void 0!==n&&!0!==object.isInstancedMesh)for(var i=0,r=n.count;i<r;i++)!0===object.isMesh?object.getVertexPosition(i,vr):vr.fromBufferAttribute(n,i),vr.applyMatrix4(object.matrixWorld),this.expandByPoint(vr);else void 0!==object.boundingBox?(null===object.boundingBox&&object.computeBoundingBox(),yr.copy(object.boundingBox)):(null===e.boundingBox&&e.computeBoundingBox(),yr.copy(e.boundingBox)),yr.applyMatrix4(object.matrixWorld),this.union(yr)}for(var o=object.children,h=0,c=o.length;h<c;h++)this.expandByObject(o[h],t);return this}},{key:"containsPoint",value:function(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}},{key:"getParameter",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}},{key:"intersectsSphere",value:function(t){return this.clampPoint(t.center,vr),vr.distanceToSquared(t.center)<=t.radius*t.radius}},{key:"intersectsPlane",value:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}},{key:"intersectsTriangle",value:function(t){if(this.isEmpty())return!1;this.getCenter(Sr),_r.subVectors(this.max,Sr),mr.subVectors(t.a,Sr),gr.subVectors(t.b,Sr),xr.subVectors(t.c,Sr),kr.subVectors(gr,mr),wr.subVectors(xr,gr),Mr.subVectors(mr,xr);var e=[0,-kr.z,kr.y,0,-wr.z,wr.y,0,-Mr.z,Mr.y,kr.z,0,-kr.x,wr.z,0,-wr.x,Mr.z,0,-Mr.x,-kr.y,kr.x,0,-wr.y,wr.x,0,-Mr.y,Mr.x,0];return!!jr(e,mr,gr,xr,_r)&&(!!jr(e=[1,0,0,0,1,0,0,0,1],mr,gr,xr,_r)&&(Or.crossVectors(kr,wr),jr(e=[Or.x,Or.y,Or.z],mr,gr,xr,_r)))}},{key:"clampPoint",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return this.clampPoint(t,vr).distanceTo(t)}},{key:"getBoundingSphere",value:function(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(vr).length()),t}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"applyMatrix4",value:function(t){return this.isEmpty()||(pr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),pr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),pr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),pr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),pr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),pr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),pr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),pr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(pr)),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}])}(),pr=[new cr,new cr,new cr,new cr,new cr,new cr,new cr,new cr],vr=new cr,yr=new fr,mr=new cr,gr=new cr,xr=new cr,kr=new cr,wr=new cr,Mr=new cr,Sr=new cr,_r=new cr,Or=new cr,Ar=new cr;function jr(t,e,n,r,o){for(var i=0,h=t.length-3;i<=h;i+=3){Ar.fromArray(t,i);var c=o.x*Math.abs(Ar.x)+o.y*Math.abs(Ar.y)+o.z*Math.abs(Ar.z),l=e.dot(Ar),d=n.dot(Ar),f=r.dot(Ar);if(Math.max(-Math.max(l,d,f),Math.min(l,d,f))>c)return!1}return!0}var Tr=new fr,zr=new cr,Cr=new cr,Ir=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;Object(m.a)(this,t),this.isSphere=!0,this.center=e,this.radius=n}),[{key:"set",value:function(t,e){return this.center.copy(t),this.radius=e,this}},{key:"setFromPoints",value:function(t,e){var n=this.center;void 0!==e?n.copy(e):Tr.setFromPoints(t).getCenter(n);for(var r=0,i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(t){return this.center.copy(t.center),this.radius=t.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(t){return t.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}},{key:"intersectsBox",value:function(t){return t.intersectsSphere(this)}},{key:"intersectsPlane",value:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(t,e){var n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}},{key:"getBoundingBox",value:function(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}},{key:"applyMatrix4",value:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}},{key:"translate",value:function(t){return this.center.add(t),this}},{key:"expandByPoint",value:function(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;zr.subVectors(t,this.center);var e=zr.lengthSq();if(e>this.radius*this.radius){var n=Math.sqrt(e),r=.5*(n-this.radius);this.center.addScaledVector(zr,r/n),this.radius+=r}return this}},{key:"union",value:function(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Cr.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(zr.copy(t.center).add(Cr)),this.expandByPoint(zr.copy(t.center).sub(Cr))),this)}},{key:"equals",value:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),Br=new cr,Rr=new cr,Pr=new cr,Er=new cr,Fr=new cr,Nr=new cr,Lr=new cr,Vr=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cr(0,0,-1);Object(m.a)(this,t),this.origin=e,this.direction=n}),[{key:"set",value:function(t,e){return this.origin.copy(t),this.direction.copy(e),this}},{key:"copy",value:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}},{key:"at",value:function(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}},{key:"lookAt",value:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this}},{key:"recast",value:function(t){return this.origin.copy(this.at(t,Br)),this}},{key:"closestPointToPoint",value:function(t,e){e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}},{key:"distanceToPoint",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:"distanceSqToPoint",value:function(t){var e=Br.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Br.copy(this.origin).addScaledVector(this.direction,e),Br.distanceToSquared(t))}},{key:"distanceSqToSegment",value:function(t,e,n,r){Rr.copy(t).add(e).multiplyScalar(.5),Pr.copy(e).sub(t).normalize(),Er.copy(this.origin).sub(Rr);var o,h,c,l,d=.5*t.distanceTo(e),f=-this.direction.dot(Pr),v=Er.dot(this.direction),y=-Er.dot(Pr),m=Er.lengthSq(),x=Math.abs(1-f*f);if(x>0)if(h=f*v-y,l=d*x,(o=f*y-v)>=0)if(h>=-l)if(h<=l){var k=1/x;c=(o*=k)*(o+f*(h*=k)+2*v)+h*(f*o+h+2*y)+m}else h=d,c=-(o=Math.max(0,-(f*h+v)))*o+h*(h+2*y)+m;else h=-d,c=-(o=Math.max(0,-(f*h+v)))*o+h*(h+2*y)+m;else h<=-l?c=-(o=Math.max(0,-(-f*d+v)))*o+(h=o>0?-d:Math.min(Math.max(-d,-y),d))*(h+2*y)+m:h<=l?(o=0,c=(h=Math.min(Math.max(-d,-y),d))*(h+2*y)+m):c=-(o=Math.max(0,-(f*d+v)))*o+(h=o>0?d:Math.min(Math.max(-d,-y),d))*(h+2*y)+m;else h=f>0?-d:d,c=-(o=Math.max(0,-(f*h+v)))*o+h*(h+2*y)+m;return n&&n.copy(this.origin).addScaledVector(this.direction,o),r&&r.copy(Rr).addScaledVector(Pr,h),c}},{key:"intersectSphere",value:function(t,e){Br.subVectors(t.center,this.origin);var n=Br.dot(this.direction),r=Br.dot(Br)-n*n,o=t.radius*t.radius;if(r>o)return null;var h=Math.sqrt(o-r),c=n-h,l=n+h;return l<0?null:c<0?this.at(l,e):this.at(c,e)}},{key:"intersectsSphere",value:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}},{key:"distanceToPlane",value:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}},{key:"intersectPlane",value:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}},{key:"intersectsPlane",value:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}},{key:"intersectBox",value:function(t,e){var n,r,o,h,c,l,d=1/this.direction.x,f=1/this.direction.y,v=1/this.direction.z,y=this.origin;return d>=0?(n=(t.min.x-y.x)*d,r=(t.max.x-y.x)*d):(n=(t.max.x-y.x)*d,r=(t.min.x-y.x)*d),f>=0?(o=(t.min.y-y.y)*f,h=(t.max.y-y.y)*f):(o=(t.max.y-y.y)*f,h=(t.min.y-y.y)*f),n>h||o>r?null:((o>n||isNaN(n))&&(n=o),(h<r||isNaN(r))&&(r=h),v>=0?(c=(t.min.z-y.z)*v,l=(t.max.z-y.z)*v):(c=(t.max.z-y.z)*v,l=(t.min.z-y.z)*v),n>l||c>r?null:((c>n||n!=n)&&(n=c),(l<r||r!=r)&&(r=l),r<0?null:this.at(n>=0?n:r,e)))}},{key:"intersectsBox",value:function(t){return null!==this.intersectBox(t,Br)}},{key:"intersectTriangle",value:function(a,b,t,e,n){Fr.subVectors(b,a),Nr.subVectors(t,a),Lr.crossVectors(Fr,Nr);var r,o=this.direction.dot(Lr);if(o>0){if(e)return null;r=1}else{if(!(o<0))return null;r=-1,o=-o}Er.subVectors(this.origin,a);var h=r*this.direction.dot(Nr.crossVectors(Er,Nr));if(h<0)return null;var c=r*this.direction.dot(Fr.cross(Er));if(c<0)return null;if(h+c>o)return null;var l=-r*Er.dot(Lr);return l<0?null:this.at(l/o,n)}},{key:"applyMatrix4",value:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}},{key:"equals",value:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),Wr=function(){function t(e,n,r,o,h,c,l,d,f,v,y,x,k,w,M,S){Object(m.a)(this,t),t.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,n,r,o,h,c,l,d,f,v,y,x,k,w,M,S)}return Object(x.a)(t,[{key:"set",value:function(t,e,n,r,o,h,c,l,d,f,v,y,m,x,k,w){var M=this.elements;return M[0]=t,M[4]=e,M[8]=n,M[12]=r,M[1]=o,M[5]=h,M[9]=c,M[13]=l,M[2]=d,M[6]=f,M[10]=v,M[14]=y,M[3]=m,M[7]=x,M[11]=k,M[15]=w,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new t).fromArray(this.elements)}},{key:"copy",value:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}},{key:"copyPosition",value:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}},{key:"setFromMatrix3",value:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(t){var e=this.elements,n=t.elements,r=1/Ur.setFromMatrixColumn(t,0).length(),o=1/Ur.setFromMatrixColumn(t,1).length(),h=1/Ur.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*o,e[5]=n[5]*o,e[6]=n[6]*o,e[7]=0,e[8]=n[8]*h,e[9]=n[9]*h,e[10]=n[10]*h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){var e=this.elements,n=t.x,r=t.y,o=t.z,a=Math.cos(n),b=Math.sin(n),h=Math.cos(r),c=Math.sin(r),l=Math.cos(o),d=Math.sin(o);if("XYZ"===t.order){var f=a*l,v=a*d,y=b*l,m=b*d;e[0]=h*l,e[4]=-h*d,e[8]=c,e[1]=v+y*c,e[5]=f-m*c,e[9]=-b*h,e[2]=m-f*c,e[6]=y+v*c,e[10]=a*h}else if("YXZ"===t.order){var x=h*l,k=h*d,w=c*l,M=c*d;e[0]=x+M*b,e[4]=w*b-k,e[8]=a*c,e[1]=a*d,e[5]=a*l,e[9]=-b,e[2]=k*b-w,e[6]=M+x*b,e[10]=a*h}else if("ZXY"===t.order){var S=h*l,_=h*d,O=c*l,A=c*d;e[0]=S-A*b,e[4]=-a*d,e[8]=O+_*b,e[1]=_+O*b,e[5]=a*l,e[9]=A-S*b,e[2]=-a*c,e[6]=b,e[10]=a*h}else if("ZYX"===t.order){var j=a*l,T=a*d,z=b*l,C=b*d;e[0]=h*l,e[4]=z*c-T,e[8]=j*c+C,e[1]=h*d,e[5]=C*c+j,e[9]=T*c-z,e[2]=-c,e[6]=b*h,e[10]=a*h}else if("YZX"===t.order){var I=a*h,B=a*c,R=b*h,P=b*c;e[0]=h*l,e[4]=P-I*d,e[8]=R*d+B,e[1]=d,e[5]=a*l,e[9]=-b*l,e[2]=-c*l,e[6]=B*d+R,e[10]=I-P*d}else if("XZY"===t.order){var E=a*h,F=a*c,N=b*h,L=b*c;e[0]=h*l,e[4]=-d,e[8]=c*l,e[1]=E*d+L,e[5]=a*l,e[9]=F*d-N,e[2]=N*d-F,e[6]=b*l,e[10]=L*d+E}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(q){return this.compose(Hr,q,qr)}},{key:"lookAt",value:function(t,e,n){var r=this.elements;return Yr.subVectors(t,e),0===Yr.lengthSq()&&(Yr.z=1),Yr.normalize(),Jr.crossVectors(n,Yr),0===Jr.lengthSq()&&(1===Math.abs(n.z)?Yr.x+=1e-4:Yr.z+=1e-4,Yr.normalize(),Jr.crossVectors(n,Yr)),Jr.normalize(),Xr.crossVectors(Yr,Jr),r[0]=Jr.x,r[4]=Xr.x,r[8]=Yr.x,r[1]=Jr.y,r[5]=Xr.y,r[9]=Yr.y,r[2]=Jr.z,r[6]=Xr.z,r[10]=Yr.z,this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(a,b){var t=a.elements,e=b.elements,n=this.elements,r=t[0],o=t[4],h=t[8],c=t[12],l=t[1],d=t[5],f=t[9],v=t[13],y=t[2],m=t[6],x=t[10],k=t[14],w=t[3],M=t[7],S=t[11],_=t[15],O=e[0],A=e[4],j=e[8],T=e[12],z=e[1],C=e[5],I=e[9],B=e[13],R=e[2],P=e[6],E=e[10],F=e[14],N=e[3],L=e[7],V=e[11],W=e[15];return n[0]=r*O+o*z+h*R+c*N,n[4]=r*A+o*C+h*P+c*L,n[8]=r*j+o*I+h*E+c*V,n[12]=r*T+o*B+h*F+c*W,n[1]=l*O+d*z+f*R+v*N,n[5]=l*A+d*C+f*P+v*L,n[9]=l*j+d*I+f*E+v*V,n[13]=l*T+d*B+f*F+v*W,n[2]=y*O+m*z+x*R+k*N,n[6]=y*A+m*C+x*P+k*L,n[10]=y*j+m*I+x*E+k*V,n[14]=y*T+m*B+x*F+k*W,n[3]=w*O+M*z+S*R+_*N,n[7]=w*A+M*C+S*P+_*L,n[11]=w*j+M*I+S*E+_*V,n[15]=w*T+M*B+S*F+_*W,this}},{key:"multiplyScalar",value:function(s){var t=this.elements;return t[0]*=s,t[4]*=s,t[8]*=s,t[12]*=s,t[1]*=s,t[5]*=s,t[9]*=s,t[13]*=s,t[2]*=s,t[6]*=s,t[10]*=s,t[14]*=s,t[3]*=s,t[7]*=s,t[11]*=s,t[15]*=s,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],o=t[12],h=t[1],c=t[5],l=t[9],d=t[13],f=t[2],v=t[6],y=t[10],m=t[14];return t[3]*(+o*l*v-r*d*v-o*c*y+n*d*y+r*c*m-n*l*m)+t[7]*(+e*l*m-e*d*y+o*h*y-r*h*m+r*d*f-o*l*f)+t[11]*(+e*d*v-e*c*m-o*h*v+n*h*m+o*c*f-n*d*f)+t[15]*(-r*c*f-e*l*v+e*c*y+r*h*v-n*h*y+n*l*f)}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}},{key:"setPosition",value:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}},{key:"invert",value:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],o=t[3],h=t[4],c=t[5],l=t[6],d=t[7],f=t[8],v=t[9],y=t[10],m=t[11],x=t[12],k=t[13],w=t[14],M=t[15],S=v*w*d-k*y*d+k*l*m-c*w*m-v*l*M+c*y*M,_=x*y*d-f*w*d-x*l*m+h*w*m+f*l*M-h*y*M,O=f*k*d-x*v*d+x*c*m-h*k*m-f*c*M+h*v*M,A=x*v*l-f*k*l-x*c*y+h*k*y+f*c*w-h*v*w,j=e*S+n*_+r*O+o*A;if(0===j)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var T=1/j;return t[0]=S*T,t[1]=(k*y*o-v*w*o-k*r*m+n*w*m+v*r*M-n*y*M)*T,t[2]=(c*w*o-k*l*o+k*r*d-n*w*d-c*r*M+n*l*M)*T,t[3]=(v*l*o-c*y*o-v*r*d+n*y*d+c*r*m-n*l*m)*T,t[4]=_*T,t[5]=(f*w*o-x*y*o+x*r*m-e*w*m-f*r*M+e*y*M)*T,t[6]=(x*l*o-h*w*o-x*r*d+e*w*d+h*r*M-e*l*M)*T,t[7]=(h*y*o-f*l*o+f*r*d-e*y*d-h*r*m+e*l*m)*T,t[8]=O*T,t[9]=(x*v*o-f*k*o-x*n*m+e*k*m+f*n*M-e*v*M)*T,t[10]=(h*k*o-x*c*o+x*n*d-e*k*d-h*n*M+e*c*M)*T,t[11]=(f*c*o-h*v*o-f*n*d+e*v*d+h*n*m-e*c*m)*T,t[12]=A*T,t[13]=(f*k*r-x*v*r+x*n*y-e*k*y-f*n*w+e*v*w)*T,t[14]=(x*c*r-h*k*r-x*n*l+e*k*l+h*n*w-e*c*w)*T,t[15]=(h*v*r-f*c*r+f*n*l-e*v*l-h*n*y+e*c*y)*T,this}},{key:"scale",value:function(t){var e=this.elements,n=t.x,r=t.y,o=t.z;return e[0]*=n,e[4]*=r,e[8]*=o,e[1]*=n,e[5]*=r,e[9]*=o,e[2]*=n,e[6]*=r,e[10]*=o,e[3]*=n,e[7]*=r,e[11]*=o,this}},{key:"getMaxScaleOnAxis",value:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}},{key:"makeTranslation",value:function(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(t){var e=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1),this}},{key:"makeRotationY",value:function(t){var e=Math.cos(t),s=Math.sin(t);return this.set(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(t){var e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(t,e){var n=Math.cos(e),s=Math.sin(e),r=1-n,o=t.x,h=t.y,c=t.z,l=r*o,d=r*h;return this.set(l*o+n,l*h-s*c,l*c+s*h,0,l*h+s*c,d*h+n,d*c-s*o,0,l*c-s*h,d*c+s*o,r*c*c+n,0,0,0,0,1),this}},{key:"makeScale",value:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(t,e,n,r,o,h){return this.set(1,n,o,0,t,1,h,0,e,r,1,0,0,0,0,1),this}},{key:"compose",value:function(t,e,n){var r=this.elements,o=e._x,h=e._y,c=e._z,l=e._w,d=o+o,f=h+h,v=c+c,y=o*d,m=o*f,x=o*v,k=h*f,w=h*v,M=c*v,S=l*d,_=l*f,O=l*v,A=n.x,j=n.y,T=n.z;return r[0]=(1-(k+M))*A,r[1]=(m+O)*A,r[2]=(x-_)*A,r[3]=0,r[4]=(m-O)*j,r[5]=(1-(y+M))*j,r[6]=(w+S)*j,r[7]=0,r[8]=(x+_)*T,r[9]=(w-S)*T,r[10]=(1-(y+k))*T,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}},{key:"decompose",value:function(t,e,n){var r=this.elements,o=Ur.set(r[0],r[1],r[2]).length(),h=Ur.set(r[4],r[5],r[6]).length(),c=Ur.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),t.x=r[12],t.y=r[13],t.z=r[14],Dr.copy(this);var l=1/o,d=1/h,f=1/c;return Dr.elements[0]*=l,Dr.elements[1]*=l,Dr.elements[2]*=l,Dr.elements[4]*=d,Dr.elements[5]*=d,Dr.elements[6]*=d,Dr.elements[8]*=f,Dr.elements[9]*=f,Dr.elements[10]*=f,e.setFromRotationMatrix(Dr),n.x=o,n.y=h,n.z=c,this}},{key:"makePerspective",value:function(t,e,n,r,o,h){var c,l,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:pn,f=this.elements,v=2*o/(e-t),y=2*o/(n-r),a=(e+t)/(e-t),b=(n+r)/(n-r);if(d===pn)c=-(h+o)/(h-o),l=-2*h*o/(h-o);else{if(d!==vn)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+d);c=-h/(h-o),l=-h*o/(h-o)}return f[0]=v,f[4]=0,f[8]=a,f[12]=0,f[1]=0,f[5]=y,f[9]=b,f[13]=0,f[2]=0,f[6]=0,f[10]=c,f[14]=l,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}},{key:"makeOrthographic",value:function(t,e,n,r,o,h){var c,l,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:pn,f=this.elements,v=1/(e-t),y=1/(n-r),p=1/(h-o),m=(e+t)*v,x=(n+r)*y;if(d===pn)c=(h+o)*p,l=-2*p;else{if(d!==vn)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+d);c=o*p,l=-1*p}return f[0]=2*v,f[4]=0,f[8]=0,f[12]=-m,f[1]=0,f[5]=2*y,f[9]=0,f[13]=-x,f[2]=0,f[6]=0,f[10]=l,f[14]=-c,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}},{key:"equals",value:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;i<16;i++)this.elements[i]=t[i+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}])}(),Ur=new cr,Dr=new Wr,Hr=new cr(0,0,0),qr=new cr(1,1,1),Jr=new cr,Xr=new cr,Yr=new cr,Zr=new Wr,Gr=new ur,Qr=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_ORDER;Object(m.a)(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=o}),[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},{key:"set",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.elements,o=r[0],h=r[4],c=r[8],l=r[1],d=r[5],f=r[9],v=r[2],y=r[6],m=r[10];switch(e){case"XYZ":this._y=Math.asin(wn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,m),this._z=Math.atan2(-h,o)):(this._x=Math.atan2(y,d),this._z=0);break;case"YXZ":this._x=Math.asin(-wn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(c,m),this._z=Math.atan2(l,d)):(this._y=Math.atan2(-v,o),this._z=0);break;case"ZXY":this._x=Math.asin(wn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-v,m),this._z=Math.atan2(-h,d)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-wn(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(y,m),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-h,d));break;case"YZX":this._z=Math.asin(wn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,d),this._y=Math.atan2(-v,o)):(this._x=0,this._y=Math.atan2(c,m));break;case"XZY":this._z=Math.asin(-wn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(y,d),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-f,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(q,t,e){return Zr.makeRotationFromQuaternion(q),this.setFromRotationMatrix(Zr,t,e)}},{key:"setFromVector3",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}},{key:"reorder",value:function(t){return Gr.setFromEuler(this),this.setFromQuaternion(Gr,t)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}},{key:"fromArray",value:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._x;case 2:return t.next=4,this._y;case 4:return t.next=6,this._z;case 6:return t.next=8,this._order;case 8:case"end":return t.stop()}}),t,this)}))}])}();Qr.DEFAULT_ORDER="XYZ";var Kr=function(){return Object(x.a)((function t(){Object(m.a)(this,t),this.mask=1}),[{key:"set",value:function(t){this.mask=1<<t>>>0}},{key:"enable",value:function(t){this.mask|=1<<t}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(t){this.mask^=1<<t}},{key:"disable",value:function(t){this.mask&=~(1<<t)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(t){return!!(this.mask&t.mask)}},{key:"isEnabled",value:function(t){return!!(this.mask&1<<t)}}])}(),$r=0,ta=new cr,ea=new ur,ia=new Wr,na=new cr,ra=new cr,aa=new cr,sa=new ur,oa=new cr(1,0,0),ua=new cr(0,1,0),ha=new cr(0,0,1),ca={type:"added"},la={type:"removed"},da={type:"childadded",child:null},fa={type:"childremoved",child:null},pa=function(t){function e(){var t;Object(m.a)(this,e),(t=O(this,e)).isObject3D=!0,Object.defineProperty(t,"id",{value:$r++}),t.uuid=kn(),t.name="",t.type="Object3D",t.parent=null,t.children=[],t.up=e.DEFAULT_UP.clone();var n=new cr,r=new Qr,o=new ur,h=new cr(1,1,1);return r._onChange((function(){o.setFromEuler(r,!1)})),o._onChange((function(){r.setFromQuaternion(o,void 0,!1)})),Object.defineProperties(t,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:o},scale:{configurable:!0,enumerable:!0,value:h},modelViewMatrix:{value:new Wr},normalMatrix:{value:new Tn}}),t.matrix=new Wr,t.matrixWorld=new Wr,t.matrixAutoUpdate=e.DEFAULT_MATRIX_AUTO_UPDATE,t.matrixWorldAutoUpdate=e.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,t.matrixWorldNeedsUpdate=!1,t.layers=new Kr,t.visible=!0,t.castShadow=!1,t.receiveShadow=!1,t.frustumCulled=!0,t.renderOrder=0,t.animations=[],t.userData={},t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"onBeforeShadow",value:function(){}},{key:"onAfterShadow",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(q){return this.quaternion.premultiply(q),this}},{key:"setRotationFromAxisAngle",value:function(t,e){this.quaternion.setFromAxisAngle(t,e)}},{key:"setRotationFromEuler",value:function(t){this.quaternion.setFromEuler(t,!0)}},{key:"setRotationFromMatrix",value:function(t){this.quaternion.setFromRotationMatrix(t)}},{key:"setRotationFromQuaternion",value:function(q){this.quaternion.copy(q)}},{key:"rotateOnAxis",value:function(t,e){return ea.setFromAxisAngle(t,e),this.quaternion.multiply(ea),this}},{key:"rotateOnWorldAxis",value:function(t,e){return ea.setFromAxisAngle(t,e),this.quaternion.premultiply(ea),this}},{key:"rotateX",value:function(t){return this.rotateOnAxis(oa,t)}},{key:"rotateY",value:function(t){return this.rotateOnAxis(ua,t)}},{key:"rotateZ",value:function(t){return this.rotateOnAxis(ha,t)}},{key:"translateOnAxis",value:function(t,e){return ta.copy(t).applyQuaternion(this.quaternion),this.position.add(ta.multiplyScalar(e)),this}},{key:"translateX",value:function(t){return this.translateOnAxis(oa,t)}},{key:"translateY",value:function(t){return this.translateOnAxis(ua,t)}},{key:"translateZ",value:function(t){return this.translateOnAxis(ha,t)}},{key:"localToWorld",value:function(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(ia.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(t,e,n){t.isVector3?na.copy(t):na.set(t,e,n);var r=this.parent;this.updateWorldMatrix(!0,!1),ra.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ia.lookAt(ra,na,this.up):ia.lookAt(na,ra,this.up),this.quaternion.setFromRotationMatrix(ia),r&&(ia.extractRotation(r.matrixWorld),ea.setFromRotationMatrix(ia),this.quaternion.premultiply(ea.invert()))}},{key:"add",value:function(object){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return object===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",object),this):(object&&object.isObject3D?(object.removeFromParent(),object.parent=this,this.children.push(object),object.dispatchEvent(ca),da.child=object,this.dispatchEvent(da),da.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",object),this)}},{key:"remove",value:function(object){if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}var t=this.children.indexOf(object);return-1!==t&&(object.parent=null,this.children.splice(t,1),object.dispatchEvent(la),fa.child=object,this.dispatchEvent(fa),fa.child=null),this}},{key:"removeFromParent",value:function(){var t=this.parent;return null!==t&&t.remove(this),this}},{key:"clear",value:function(){return this.remove.apply(this,Object(l.a)(this.children))}},{key:"attach",value:function(object){return this.updateWorldMatrix(!0,!1),ia.copy(this.matrixWorld).invert(),null!==object.parent&&(object.parent.updateWorldMatrix(!0,!1),ia.multiply(object.parent.matrixWorld)),object.applyMatrix4(ia),object.removeFromParent(),object.parent=this,this.children.push(object),object.updateWorldMatrix(!1,!0),object.dispatchEvent(ca),da.child=object,this.dispatchEvent(da),da.child=null,this}},{key:"getObjectById",value:function(t){return this.getObjectByProperty("id",t)}},{key:"getObjectByName",value:function(t){return this.getObjectByProperty("name",t)}},{key:"getObjectByProperty",value:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var object=this.children[i].getObjectByProperty(t,e);if(void 0!==object)return object}}},{key:"getObjectsByProperty",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[t]===e&&n.push(this);for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].getObjectsByProperty(t,e,n);return n}},{key:"getWorldPosition",value:function(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ra,t,aa),t}},{key:"getWorldScale",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ra,sa,t),t}},{key:"getWorldDirection",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)}},{key:"traverseVisible",value:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}}},{key:"traverseAncestors",value:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,n=e.length;i<n;i++){e[i].updateMatrixWorld(t)}}},{key:"updateWorldMatrix",value:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===e)for(var r=this.children,i=0,o=r.length;i<o;i++){r[i].updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(meta){var t=void 0===meta||"string"==typeof meta,output={};t&&(meta={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},output.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});var object={};function e(t,element){return void 0===t[element.uuid]&&(t[element.uuid]=element.toJSON(meta)),element.uuid}if(object.uuid=this.uuid,object.type=this.type,""!==this.name&&(object.name=this.name),!0===this.castShadow&&(object.castShadow=!0),!0===this.receiveShadow&&(object.receiveShadow=!0),!1===this.visible&&(object.visible=!1),!1===this.frustumCulled&&(object.frustumCulled=!1),0!==this.renderOrder&&(object.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(object.userData=this.userData),object.layers=this.layers.mask,object.matrix=this.matrix.toArray(),object.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(object.matrixAutoUpdate=!1),this.isInstancedMesh&&(object.type="InstancedMesh",object.count=this.count,object.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(object.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(object.type="BatchedMesh",object.perObjectFrustumCulled=this.perObjectFrustumCulled,object.sortObjects=this.sortObjects,object.drawRanges=this._drawRanges,object.reservedRanges=this._reservedRanges,object.visibility=this._visibility,object.active=this._active,object.bounds=this._bounds.map((function(t){return{boxInitialized:t.boxInitialized,boxMin:t.box.min.toArray(),boxMax:t.box.max.toArray(),sphereInitialized:t.sphereInitialized,sphereRadius:t.sphere.radius,sphereCenter:t.sphere.center.toArray()}})),object.maxInstanceCount=this._maxInstanceCount,object.maxVertexCount=this._maxVertexCount,object.maxIndexCount=this._maxIndexCount,object.geometryInitialized=this._geometryInitialized,object.geometryCount=this._geometryCount,object.matricesTexture=this._matricesTexture.toJSON(meta),null!==this._colorsTexture&&(object.colorsTexture=this._colorsTexture.toJSON(meta)),null!==this.boundingSphere&&(object.boundingSphere={center:object.boundingSphere.center.toArray(),radius:object.boundingSphere.radius}),null!==this.boundingBox&&(object.boundingBox={min:object.boundingBox.min.toArray(),max:object.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?object.background=this.background.toJSON():this.background.isTexture&&(object.background=this.background.toJSON(meta).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(object.environment=this.environment.toJSON(meta).uuid);else if(this.isMesh||this.isLine||this.isPoints){object.geometry=e(meta.geometries,this.geometry);var n=this.geometry.parameters;if(void 0!==n&&void 0!==n.shapes){var r=n.shapes;if(Array.isArray(r))for(var i=0,o=r.length;i<o;i++){var h=r[i];e(meta.shapes,h)}else e(meta.shapes,r)}}if(this.isSkinnedMesh&&(object.bindMode=this.bindMode,object.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(e(meta.skeletons,this.skeleton),object.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],l=0,d=this.material.length;l<d;l++)c.push(e(meta.materials,this.material[l]));object.material=c}else object.material=e(meta.materials,this.material);if(this.children.length>0){object.children=[];for(var f=0;f<this.children.length;f++)object.children.push(this.children[f].toJSON(meta).object)}if(this.animations.length>0){object.animations=[];for(var v=0;v<this.animations.length;v++){var y=this.animations[v];object.animations.push(e(meta.animations,y))}}if(t){var m=A(meta.geometries),x=A(meta.materials),k=A(meta.textures),w=A(meta.images),M=A(meta.shapes),S=A(meta.skeletons),_=A(meta.animations),O=A(meta.nodes);m.length>0&&(output.geometries=m),x.length>0&&(output.materials=x),k.length>0&&(output.textures=k),w.length>0&&(output.images=w),M.length>0&&(output.shapes=M),S.length>0&&(output.skeletons=S),_.length>0&&(output.animations=_),O.length>0&&(output.nodes=O)}return output.object=object,output;function A(t){var e=[];for(var n in t){var data=t[n];delete data.metadata,e.push(data)}return e}}},{key:"clone",value:function(t){return(new this.constructor).copy(this,t)}},{key:"copy",value:function(source){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=source.name,this.up.copy(source.up),this.position.copy(source.position),this.rotation.order=source.rotation.order,this.quaternion.copy(source.quaternion),this.scale.copy(source.scale),this.matrix.copy(source.matrix),this.matrixWorld.copy(source.matrixWorld),this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrixWorldAutoUpdate=source.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=source.matrixWorldNeedsUpdate,this.layers.mask=source.layers.mask,this.visible=source.visible,this.castShadow=source.castShadow,this.receiveShadow=source.receiveShadow,this.frustumCulled=source.frustumCulled,this.renderOrder=source.renderOrder,this.animations=source.animations.slice(),this.userData=JSON.parse(JSON.stringify(source.userData)),!0===t)for(var i=0;i<source.children.length;i++){var e=source.children[i];this.add(e.clone())}return this}}])}(yn);pa.DEFAULT_UP=new cr(0,1,0),pa.DEFAULT_MATRIX_AUTO_UPDATE=!0,pa.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var va=new cr,ya=new cr,ma=new cr,ga=new cr,ba=new cr,xa=new cr,ka=new cr,wa=new cr,Ma=new cr,Sa=new cr,_a=new er,Oa=new er,Aa=new er,ja=function(){function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cr,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cr,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new cr;Object(m.a)(this,t),this.a=a,this.b=b,this.c=e}return Object(x.a)(t,[{key:"set",value:function(a,b,t){return this.a.copy(a),this.b.copy(b),this.c.copy(t),this}},{key:"setFromPointsAndIndices",value:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}},{key:"setFromAttributeAndIndices",value:function(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}},{key:"getArea",value:function(){return va.subVectors(this.c,this.b),ya.subVectors(this.a,this.b),.5*va.cross(ya).length()}},{key:"getMidpoint",value:function(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return t.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,n){return t.getBarycoord(e,this.a,this.b,this.c,n)}},{key:"getInterpolation",value:function(e,n,r,o,h){return t.getInterpolation(e,this.a,this.b,this.c,n,r,o,h)}},{key:"containsPoint",value:function(e){return t.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return t.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(t){return t.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(p,t){var e,n,a=this.a,b=this.b,r=this.c;ba.subVectors(b,a),xa.subVectors(r,a),wa.subVectors(p,a);var o=ba.dot(wa),h=xa.dot(wa);if(o<=0&&h<=0)return t.copy(a);Ma.subVectors(p,b);var c=ba.dot(Ma),l=xa.dot(Ma);if(c>=0&&l<=c)return t.copy(b);var d=o*l-c*h;if(d<=0&&o>=0&&c<=0)return e=o/(o-c),t.copy(a).addScaledVector(ba,e);Sa.subVectors(p,r);var f=ba.dot(Sa),v=xa.dot(Sa);if(v>=0&&f<=v)return t.copy(r);var y=f*h-o*v;if(y<=0&&h>=0&&v<=0)return n=h/(h-v),t.copy(a).addScaledVector(xa,n);var m=c*v-f*l;if(m<=0&&l-c>=0&&f-v>=0)return ka.subVectors(r,b),n=(l-c)/(l-c+(f-v)),t.copy(b).addScaledVector(ka,n);var x=1/(m+y+d);return e=y*x,n=d*x,t.copy(a).addScaledVector(ba,e).addScaledVector(xa,n)}},{key:"equals",value:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}],[{key:"getNormal",value:function(a,b,t,e){e.subVectors(t,b),va.subVectors(a,b),e.cross(va);var n=e.lengthSq();return n>0?e.multiplyScalar(1/Math.sqrt(n)):e.set(0,0,0)}},{key:"getBarycoord",value:function(t,a,b,e,n){va.subVectors(e,a),ya.subVectors(b,a),ma.subVectors(t,a);var r=va.dot(va),o=va.dot(ya),h=va.dot(ma),c=ya.dot(ya),l=ya.dot(ma),d=r*c-o*o;if(0===d)return n.set(0,0,0),null;var f=1/d,u=(c*h-o*l)*f,v=(r*l-o*h)*f;return n.set(1-u-v,v,u)}},{key:"containsPoint",value:function(t,a,b,e){return null!==this.getBarycoord(t,a,b,e,ga)&&(ga.x>=0&&ga.y>=0&&ga.x+ga.y<=1)}},{key:"getInterpolation",value:function(t,e,n,r,o,h,c,l){return null===this.getBarycoord(t,e,n,r,ga)?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,ga.x),l.addScaledVector(h,ga.y),l.addScaledVector(c,ga.z),l)}},{key:"getInterpolatedAttribute",value:function(t,e,n,r,o,h){return _a.setScalar(0),Oa.setScalar(0),Aa.setScalar(0),_a.fromBufferAttribute(t,e),Oa.fromBufferAttribute(t,n),Aa.fromBufferAttribute(t,r),h.setScalar(0),h.addScaledVector(_a,o.x),h.addScaledVector(Oa,o.y),h.addScaledVector(Aa,o.z),h}},{key:"isFrontFacing",value:function(a,b,t,e){return va.subVectors(t,b),ya.subVectors(a,b),va.cross(ya).dot(e)<0}}])}(),Ta={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},za={h:0,s:0,l:0},Ca={h:0,s:0,l:0};function Ia(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+6*(q-p)*(2/3-t):p}var Ba=function(){return Object(x.a)((function t(e,g,b){return Object(m.a)(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,g,b)}),[{key:"set",value:function(t,g,b){if(void 0===g&&void 0===b){var e=t;e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e)}else this.setRGB(t,g,b);return this}},{key:"setScalar",value:function(t){return this.r=t,this.g=t,this.b=t,this}},{key:"setHex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ji;return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,qn.toWorkingColorSpace(this,e),this}},{key:"setRGB",value:function(t,g,b){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:qn.workingColorSpace;return this.r=t,this.g=g,this.b=b,qn.toWorkingColorSpace(this,e),this}},{key:"setHSL",value:function(t,s,e){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:qn.workingColorSpace;if(t=Mn(t,1),s=wn(s,0,1),e=wn(e,0,1),0===s)this.r=this.g=this.b=e;else{var p=e<=.5?e*(1+s):e+s-e*s,q=2*e-p;this.r=Ia(q,p,t+1/3),this.g=Ia(q,p,t),this.b=Ia(q,p,t-1/3)}return qn.toWorkingColorSpace(this,n),this}},{key:"setStyle",value:function(style){var t,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ji;function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+style+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(style)){var r,o=t[1],h=t[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+style)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(style)){var c=t[1],l=c.length;if(3===l)return this.setRGB(parseInt(c.charAt(0),16)/15,parseInt(c.charAt(1),16)/15,parseInt(c.charAt(2),16)/15,e);if(6===l)return this.setHex(parseInt(c,16),e);console.warn("THREE.Color: Invalid hex color "+style)}else if(style&&style.length>0)return this.setColorName(style,e);return this}},{key:"setColorName",value:function(style){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ji,e=Ta[style.toLowerCase()];return void 0!==e?this.setHex(e,t):console.warn("THREE.Color: Unknown color "+style),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}},{key:"copySRGBToLinear",value:function(t){return this.r=Jn(t.r),this.g=Jn(t.g),this.b=Jn(t.b),this}},{key:"copyLinearToSRGB",value:function(t){return this.r=Xn(t.r),this.g=Xn(t.g),this.b=Xn(t.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji;return qn.fromWorkingColorSpace(Ra.copy(this),t),65536*Math.round(wn(255*Ra.r,0,255))+256*Math.round(wn(255*Ra.g,0,255))+Math.round(wn(255*Ra.b,0,255))}},{key:"getHexString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji;return("000000"+this.getHex(t).toString(16)).slice(-6)}},{key:"getHSL",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qn.workingColorSpace;qn.fromWorkingColorSpace(Ra.copy(this),e);var n,r,o=Ra.r,g=Ra.g,b=Ra.b,h=Math.max(o,g,b),c=Math.min(o,g,b),l=(c+h)/2;if(c===h)n=0,r=0;else{var d=h-c;switch(r=l<=.5?d/(h+c):d/(2-h-c),h){case o:n=(g-b)/d+(g<b?6:0);break;case g:n=(b-o)/d+2;break;case b:n=(o-g)/d+4}n/=6}return t.h=n,t.s=r,t.l=l,t}},{key:"getRGB",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qn.workingColorSpace;return qn.fromWorkingColorSpace(Ra.copy(this),e),t.r=Ra.r,t.g=Ra.g,t.b=Ra.b,t}},{key:"getStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ji;qn.fromWorkingColorSpace(Ra.copy(this),t);var e=Ra.r,g=Ra.g,b=Ra.b;return t!==ji?"color(".concat(t," ").concat(e.toFixed(3)," ").concat(g.toFixed(3)," ").concat(b.toFixed(3),")"):"rgb(".concat(Math.round(255*e),",").concat(Math.round(255*g),",").concat(Math.round(255*b),")")}},{key:"offsetHSL",value:function(t,s,e){return this.getHSL(za),this.setHSL(za.h+t,za.s+s,za.l+e)}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}},{key:"addColors",value:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}},{key:"addScalar",value:function(s){return this.r+=s,this.g+=s,this.b+=s,this}},{key:"sub",value:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}},{key:"multiply",value:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}},{key:"multiplyScalar",value:function(s){return this.r*=s,this.g*=s,this.b*=s,this}},{key:"lerp",value:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}},{key:"lerpColors",value:function(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}},{key:"lerpHSL",value:function(t,e){this.getHSL(za),t.getHSL(Ca);var n=Sn(za.h,Ca.h,e),s=Sn(za.s,Ca.s,e),r=Sn(za.l,Ca.l,e);return this.setHSL(n,s,r),this}},{key:"setFromVector3",value:function(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}},{key:"applyMatrix3",value:function(t){var e=this.r,g=this.g,b=this.b,n=t.elements;return this.r=n[0]*e+n[3]*g+n[6]*b,this.g=n[1]*e+n[4]*g+n[7]*b,this.b=n[2]*e+n[5]*g+n[8]*b,this}},{key:"equals",value:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},{key:"fromBufferAttribute",value:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.r;case 2:return t.next=4,this.g;case 4:return t.next=6,this.b;case 6:case"end":return t.stop()}}),t,this)}))}])}(),Ra=new Ba;Ba.NAMES=Ta;var Pa=0,Ea=function(t){function e(){var t;return Object(m.a)(this,e),(t=O(this,e)).isMaterial=!0,Object.defineProperty(t,"id",{value:Pa++}),t.uuid=kn(),t.name="",t.type="Material",t.blending=D,t.side=L,t.vertexColors=!1,t.opacity=1,t.transparent=!1,t.alphaHash=!1,t.blendSrc=at,t.blendDst=st,t.blendEquation=Z,t.blendSrcAlpha=null,t.blendDstAlpha=null,t.blendEquationAlpha=null,t.blendColor=new Ba(0,0,0),t.blendAlpha=0,t.depthFunc=xt,t.depthTest=!0,t.depthWrite=!0,t.stencilWriteMask=255,t.stencilFunc=Xi,t.stencilRef=0,t.stencilFuncMask=255,t.stencilFail=Bi,t.stencilZFail=Bi,t.stencilZPass=Bi,t.stencilWrite=!1,t.clippingPlanes=null,t.clipIntersection=!1,t.clipShadows=!1,t.shadowSide=null,t.colorWrite=!0,t.precision=null,t.polygonOffset=!1,t.polygonOffsetFactor=0,t.polygonOffsetUnits=0,t.dithering=!1,t.alphaToCoverage=!1,t.premultipliedAlpha=!1,t.forceSinglePass=!1,t.visible=!0,t.toneMapped=!0,t.userData={},t.version=0,t._alphaTest=0,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE.Material: '".concat(e,"' is not a property of THREE.").concat(this.type,"."))}else console.warn("THREE.Material: parameter '".concat(e,"' has value of undefined."))}}},{key:"toJSON",value:function(meta){var t=void 0===meta||"string"==typeof meta;t&&(meta={textures:{},images:{}});var data={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function e(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),this.color&&this.color.isColor&&(data.color=this.color.getHex()),void 0!==this.roughness&&(data.roughness=this.roughness),void 0!==this.metalness&&(data.metalness=this.metalness),void 0!==this.sheen&&(data.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(data.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(data.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(data.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(data.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(data.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(data.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(data.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(data.shininess=this.shininess),void 0!==this.clearcoat&&(data.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(data.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(data.clearcoatMap=this.clearcoatMap.toJSON(meta).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(data.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(meta).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(data.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(meta).uuid,data.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(data.dispersion=this.dispersion),void 0!==this.iridescence&&(data.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(data.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(data.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(data.iridescenceMap=this.iridescenceMap.toJSON(meta).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(data.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(meta).uuid),void 0!==this.anisotropy&&(data.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(data.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(data.anisotropyMap=this.anisotropyMap.toJSON(meta).uuid),this.map&&this.map.isTexture&&(data.map=this.map.toJSON(meta).uuid),this.matcap&&this.matcap.isTexture&&(data.matcap=this.matcap.toJSON(meta).uuid),this.alphaMap&&this.alphaMap.isTexture&&(data.alphaMap=this.alphaMap.toJSON(meta).uuid),this.lightMap&&this.lightMap.isTexture&&(data.lightMap=this.lightMap.toJSON(meta).uuid,data.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(data.aoMap=this.aoMap.toJSON(meta).uuid,data.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(data.bumpMap=this.bumpMap.toJSON(meta).uuid,data.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(data.normalMap=this.normalMap.toJSON(meta).uuid,data.normalMapType=this.normalMapType,data.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(data.displacementMap=this.displacementMap.toJSON(meta).uuid,data.displacementScale=this.displacementScale,data.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(data.roughnessMap=this.roughnessMap.toJSON(meta).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(data.metalnessMap=this.metalnessMap.toJSON(meta).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(data.emissiveMap=this.emissiveMap.toJSON(meta).uuid),this.specularMap&&this.specularMap.isTexture&&(data.specularMap=this.specularMap.toJSON(meta).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(data.specularIntensityMap=this.specularIntensityMap.toJSON(meta).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(data.specularColorMap=this.specularColorMap.toJSON(meta).uuid),this.envMap&&this.envMap.isTexture&&(data.envMap=this.envMap.toJSON(meta).uuid,void 0!==this.combine&&(data.combine=this.combine)),void 0!==this.envMapRotation&&(data.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(data.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(data.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(data.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(data.gradientMap=this.gradientMap.toJSON(meta).uuid),void 0!==this.transmission&&(data.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(data.transmissionMap=this.transmissionMap.toJSON(meta).uuid),void 0!==this.thickness&&(data.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(data.thicknessMap=this.thicknessMap.toJSON(meta).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(data.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(data.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(data.size=this.size),null!==this.shadowSide&&(data.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(data.sizeAttenuation=this.sizeAttenuation),this.blending!==D&&(data.blending=this.blending),this.side!==L&&(data.side=this.side),!0===this.vertexColors&&(data.vertexColors=!0),this.opacity<1&&(data.opacity=this.opacity),!0===this.transparent&&(data.transparent=!0),this.blendSrc!==at&&(data.blendSrc=this.blendSrc),this.blendDst!==st&&(data.blendDst=this.blendDst),this.blendEquation!==Z&&(data.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(data.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(data.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(data.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(data.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(data.blendAlpha=this.blendAlpha),this.depthFunc!==xt&&(data.depthFunc=this.depthFunc),!1===this.depthTest&&(data.depthTest=this.depthTest),!1===this.depthWrite&&(data.depthWrite=this.depthWrite),!1===this.colorWrite&&(data.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(data.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Xi&&(data.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(data.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(data.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Bi&&(data.stencilFail=this.stencilFail),this.stencilZFail!==Bi&&(data.stencilZFail=this.stencilZFail),this.stencilZPass!==Bi&&(data.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(data.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(data.rotation=this.rotation),!0===this.polygonOffset&&(data.polygonOffset=!0),0!==this.polygonOffsetFactor&&(data.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(data.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(data.linewidth=this.linewidth),void 0!==this.dashSize&&(data.dashSize=this.dashSize),void 0!==this.gapSize&&(data.gapSize=this.gapSize),void 0!==this.scale&&(data.scale=this.scale),!0===this.dithering&&(data.dithering=!0),this.alphaTest>0&&(data.alphaTest=this.alphaTest),!0===this.alphaHash&&(data.alphaHash=!0),!0===this.alphaToCoverage&&(data.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(data.premultipliedAlpha=!0),!0===this.forceSinglePass&&(data.forceSinglePass=!0),!0===this.wireframe&&(data.wireframe=!0),this.wireframeLinewidth>1&&(data.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(data.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(data.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(data.flatShading=!0),!1===this.visible&&(data.visible=!1),!1===this.toneMapped&&(data.toneMapped=!1),!1===this.fog&&(data.fog=!1),Object.keys(this.userData).length>0&&(data.userData=this.userData),t){var n=e(meta.textures),r=e(meta.images);n.length>0&&(data.textures=n),r.length>0&&(data.images=r)}return data}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(source){this.name=source.name,this.blending=source.blending,this.side=source.side,this.vertexColors=source.vertexColors,this.opacity=source.opacity,this.transparent=source.transparent,this.blendSrc=source.blendSrc,this.blendDst=source.blendDst,this.blendEquation=source.blendEquation,this.blendSrcAlpha=source.blendSrcAlpha,this.blendDstAlpha=source.blendDstAlpha,this.blendEquationAlpha=source.blendEquationAlpha,this.blendColor.copy(source.blendColor),this.blendAlpha=source.blendAlpha,this.depthFunc=source.depthFunc,this.depthTest=source.depthTest,this.depthWrite=source.depthWrite,this.stencilWriteMask=source.stencilWriteMask,this.stencilFunc=source.stencilFunc,this.stencilRef=source.stencilRef,this.stencilFuncMask=source.stencilFuncMask,this.stencilFail=source.stencilFail,this.stencilZFail=source.stencilZFail,this.stencilZPass=source.stencilZPass,this.stencilWrite=source.stencilWrite;var t=source.clippingPlanes,e=null;if(null!==t){var n=t.length;e=new Array(n);for(var i=0;i!==n;++i)e[i]=t[i].clone()}return this.clippingPlanes=e,this.clipIntersection=source.clipIntersection,this.clipShadows=source.clipShadows,this.shadowSide=source.shadowSide,this.colorWrite=source.colorWrite,this.precision=source.precision,this.polygonOffset=source.polygonOffset,this.polygonOffsetFactor=source.polygonOffsetFactor,this.polygonOffsetUnits=source.polygonOffsetUnits,this.dithering=source.dithering,this.alphaTest=source.alphaTest,this.alphaHash=source.alphaHash,this.alphaToCoverage=source.alphaToCoverage,this.premultipliedAlpha=source.premultipliedAlpha,this.forceSinglePass=source.forceSinglePass,this.visible=source.visible,this.toneMapped=source.toneMapped,this.userData=JSON.parse(JSON.stringify(source.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"onBuild",value:function(){console.warn("Material: onBuild() has been removed.")}}])}(yn),Fa=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isMeshBasicMaterial=!0,n.type="MeshBasicMaterial",n.color=new Ba(16777215),n.map=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.specularMap=null,n.alphaMap=null,n.envMap=null,n.envMapRotation=new Qr,n.combine=_t,n.reflectivity=1,n.refractionRatio=.98,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.fog=!0,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.color.copy(source.color),this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.envMapRotation.copy(source.envMapRotation),this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.fog=source.fog,this}}])}(Ea),Na=La();function La(){for(var t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),o=new Uint32Array(512),i=0;i<256;++i){var h=i-127;h<-27?(r[i]=0,r[256|i]=32768,o[i]=24,o[256|i]=24):h<-14?(r[i]=1024>>-h-14,r[256|i]=1024>>-h-14|32768,o[i]=-h-1,o[256|i]=-h-1):h<=15?(r[i]=h+15<<10,r[256|i]=h+15<<10|32768,o[i]=13,o[256|i]=13):h<128?(r[i]=31744,r[256|i]=64512,o[i]=24,o[256|i]=24):(r[i]=31744,r[256|i]=64512,o[i]=13,o[256|i]=13)}for(var c=new Uint32Array(2048),l=new Uint32Array(64),d=new Uint32Array(64),f=1;f<1024;++f){for(var v=f<<13,y=0;!(8388608&v);)v<<=1,y-=8388608;v&=-8388609,y+=947912704,c[f]=v|y}for(var m=1024;m<2048;++m)c[m]=939524096+(m-1024<<13);for(var x=1;x<31;++x)l[x]=x<<23;l[31]=1199570944,l[32]=2147483648;for(var k=33;k<63;++k)l[k]=2147483648+(k-32<<23);l[63]=3347054592;for(var w=1;w<64;++w)32!==w&&(d[w]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:o,mantissaTable:c,exponentTable:l,offsetTable:d}}function Va(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=wn(t,-65504,65504),Na.floatView[0]=t;var e=Na.uint32View[0],n=e>>23&511;return Na.baseTable[n]+((8388607&e)>>Na.shiftTable[n])}function Wa(t){var e=t>>10;return Na.uint32View[0]=Na.mantissaTable[Na.offsetTable[e]+(1023&t)]+Na.exponentTable[e],Na.floatView[0]}var Ua={toHalfFloat:Va,fromHalfFloat:Wa},Da=new cr,Ha=new jn,qa=function(){return Object(x.a)((function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Object(m.a)(this,t),Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=void 0!==e?e.length/n:0,this.normalized=r,this.usage=nn,this.updateRanges=[],this.gpuType=he,this.version=0}),[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"addUpdateRange",value:function(t,e){this.updateRanges.push({start:t,count:e})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(source){return this.name=source.name,this.array=new source.array.constructor(source.array),this.itemSize=source.itemSize,this.count=source.count,this.normalized=source.normalized,this.usage=source.usage,this.gpuType=source.gpuType,this}},{key:"copyAt",value:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}},{key:"copyArray",value:function(t){return this.array.set(t),this}},{key:"applyMatrix3",value:function(t){if(2===this.itemSize)for(var i=0,e=this.count;i<e;i++)Ha.fromBufferAttribute(this,i),Ha.applyMatrix3(t),this.setXY(i,Ha.x,Ha.y);else if(3===this.itemSize)for(var n=0,r=this.count;n<r;n++)Da.fromBufferAttribute(this,n),Da.applyMatrix3(t),this.setXYZ(n,Da.x,Da.y,Da.z);return this}},{key:"applyMatrix4",value:function(t){for(var i=0,e=this.count;i<e;i++)Da.fromBufferAttribute(this,i),Da.applyMatrix4(t),this.setXYZ(i,Da.x,Da.y,Da.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var i=0,e=this.count;i<e;i++)Da.fromBufferAttribute(this,i),Da.applyNormalMatrix(t),this.setXYZ(i,Da.x,Da.y,Da.z);return this}},{key:"transformDirection",value:function(t){for(var i=0,e=this.count;i<e;i++)Da.fromBufferAttribute(this,i),Da.transformDirection(t),this.setXYZ(i,Da.x,Da.y,Da.z);return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"getComponent",value:function(t,component){var e=this.array[t*this.itemSize+component];return this.normalized&&(e=_n(e,this.array)),e}},{key:"setComponent",value:function(t,component,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize+component]=e,this}},{key:"getX",value:function(t){var e=this.array[t*this.itemSize];return this.normalized&&(e=_n(e,this.array)),e}},{key:"setX",value:function(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize]=e,this}},{key:"getY",value:function(t){var e=this.array[t*this.itemSize+1];return this.normalized&&(e=_n(e,this.array)),e}},{key:"setY",value:function(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize+1]=e,this}},{key:"getZ",value:function(t){var e=this.array[t*this.itemSize+2];return this.normalized&&(e=_n(e,this.array)),e}},{key:"setZ",value:function(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize+2]=e,this}},{key:"getW",value:function(t){var e=this.array[t*this.itemSize+3];return this.normalized&&(e=_n(e,this.array)),e}},{key:"setW",value:function(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize+3]=e,this}},{key:"setXY",value:function(t,e,n){return t*=this.itemSize,this.normalized&&(e=On(e,this.array),n=On(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}},{key:"setXYZ",value:function(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=On(e,this.array),n=On(n,this.array),r=On(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}},{key:"setXYZW",value:function(t,e,n,r,o){return t*=this.itemSize,this.normalized&&(e=On(e,this.array),n=On(n,this.array),r=On(r,this.array),o=On(o,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=o,this}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var data={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(data.name=this.name),this.usage!==nn&&(data.usage=this.usage),data}}])}(),Ja=function(t){function e(t,n,r){return Object(m.a)(this,e),O(this,e,[new Int8Array(t),n,r])}return Object(v.a)(e,t),Object(x.a)(e)}(qa),Xa=function(t){function e(t,n,r){return Object(m.a)(this,e),O(this,e,[new Uint8Array(t),n,r])}return Object(v.a)(e,t),Object(x.a)(e)}(qa),Ya=function(t){function e(t,n,r){return Object(m.a)(this,e),O(this,e,[new Uint8ClampedArray(t),n,r])}return Object(v.a)(e,t),Object(x.a)(e)}(qa),Za=function(t){function e(t,n,r){return Object(m.a)(this,e),O(this,e,[new Int16Array(t),n,r])}return Object(v.a)(e,t),Object(x.a)(e)}(qa),Ga=function(t){function e(t,n,r){return Object(m.a)(this,e),O(this,e,[new Uint16Array(t),n,r])}return Object(v.a)(e,t),Object(x.a)(e)}(qa),Qa=function(t){function e(t,n,r){return Object(m.a)(this,e),O(this,e,[new Int32Array(t),n,r])}return Object(v.a)(e,t),Object(x.a)(e)}(qa),Ka=function(t){function e(t,n,r){return Object(m.a)(this,e),O(this,e,[new Uint32Array(t),n,r])}return Object(v.a)(e,t),Object(x.a)(e)}(qa),$a=function(t){function e(t,n,r){var o;return Object(m.a)(this,e),(o=O(this,e,[new Uint16Array(t),n,r])).isFloat16BufferAttribute=!0,o}return Object(v.a)(e,t),Object(x.a)(e,[{key:"getX",value:function(t){var e=Wa(this.array[t*this.itemSize]);return this.normalized&&(e=_n(e,this.array)),e}},{key:"setX",value:function(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize]=Va(e),this}},{key:"getY",value:function(t){var e=Wa(this.array[t*this.itemSize+1]);return this.normalized&&(e=_n(e,this.array)),e}},{key:"setY",value:function(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize+1]=Va(e),this}},{key:"getZ",value:function(t){var e=Wa(this.array[t*this.itemSize+2]);return this.normalized&&(e=_n(e,this.array)),e}},{key:"setZ",value:function(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize+2]=Va(e),this}},{key:"getW",value:function(t){var e=Wa(this.array[t*this.itemSize+3]);return this.normalized&&(e=_n(e,this.array)),e}},{key:"setW",value:function(t,e){return this.normalized&&(e=On(e,this.array)),this.array[t*this.itemSize+3]=Va(e),this}},{key:"setXY",value:function(t,e,n){return t*=this.itemSize,this.normalized&&(e=On(e,this.array),n=On(n,this.array)),this.array[t+0]=Va(e),this.array[t+1]=Va(n),this}},{key:"setXYZ",value:function(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=On(e,this.array),n=On(n,this.array),r=On(r,this.array)),this.array[t+0]=Va(e),this.array[t+1]=Va(n),this.array[t+2]=Va(r),this}},{key:"setXYZW",value:function(t,e,n,r,o){return t*=this.itemSize,this.normalized&&(e=On(e,this.array),n=On(n,this.array),r=On(r,this.array),o=On(o,this.array)),this.array[t+0]=Va(e),this.array[t+1]=Va(n),this.array[t+2]=Va(r),this.array[t+3]=Va(o),this}}])}(qa),ts=function(t){function e(t,n,r){return Object(m.a)(this,e),O(this,e,[new Float32Array(t),n,r])}return Object(v.a)(e,t),Object(x.a)(e)}(qa),es=0,is=new Wr,ns=new pa,rs=new cr,as=new fr,ss=new fr,os=new cr,us=function(t){function e(){var t;return Object(m.a)(this,e),(t=O(this,e)).isBufferGeometry=!0,Object.defineProperty(t,"id",{value:es++}),t.uuid=kn(),t.name="",t.type="BufferGeometry",t.index=null,t.indirect=null,t.attributes={},t.morphAttributes={},t.morphTargetsRelative=!1,t.groups=[],t.boundingBox=null,t.boundingSphere=null,t.drawRange={start:0,count:1/0},t.userData={},t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){return Array.isArray(t)?this.index=new(Cn(t)?Ka:Ga)(t,1):this.index=t,this}},{key:"setIndirect",value:function(t){return this.indirect=t,this}},{key:"getIndirect",value:function(){return this.indirect}},{key:"getAttribute",value:function(t){return this.attributes[t]}},{key:"setAttribute",value:function(t,e){return this.attributes[t]=e,this}},{key:"deleteAttribute",value:function(t){return delete this.attributes[t],this}},{key:"hasAttribute",value:function(t){return void 0!==this.attributes[t]}},{key:"addGroup",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(t,e){this.drawRange.start=t,this.drawRange.count=e}},{key:"applyMatrix4",value:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new Tn).getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}var o=this.attributes.tangent;return void 0!==o&&(o.transformDirection(t),o.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(q){return is.makeRotationFromQuaternion(q),this.applyMatrix4(is),this}},{key:"rotateX",value:function(t){return is.makeRotationX(t),this.applyMatrix4(is),this}},{key:"rotateY",value:function(t){return is.makeRotationY(t),this.applyMatrix4(is),this}},{key:"rotateZ",value:function(t){return is.makeRotationZ(t),this.applyMatrix4(is),this}},{key:"translate",value:function(t,e,n){return is.makeTranslation(t,e,n),this.applyMatrix4(is),this}},{key:"scale",value:function(t,e,n){return is.makeScale(t,e,n),this.applyMatrix4(is),this}},{key:"lookAt",value:function(t){return ns.lookAt(t),ns.updateMatrix(),this.applyMatrix4(ns.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(rs).negate(),this.translate(rs.x,rs.y,rs.z),this}},{key:"setFromPoints",value:function(t){var e=this.getAttribute("position");if(void 0===e){for(var n=[],i=0,r=t.length;i<r;i++){var o=t[i];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new ts(n,3))}else{for(var h=Math.min(t.length,e.count),c=0;c<h;c++){var l=t[c];e.setXYZ(c,l.x,l.y,l.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new fr);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new cr(-1/0,-1/0,-1/0),new cr(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var i=0,n=e.length;i<n;i++){var r=e[i];as.setFromBufferAttribute(r),this.morphTargetsRelative?(os.addVectors(this.boundingBox.min,as.min),this.boundingBox.expandByPoint(os),os.addVectors(this.boundingBox.max,as.max),this.boundingBox.expandByPoint(os)):(this.boundingBox.expandByPoint(as.min),this.boundingBox.expandByPoint(as.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Ir);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new cr,1/0);if(t){var n=this.boundingSphere.center;if(as.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var o=e[i];ss.setFromBufferAttribute(o),this.morphTargetsRelative?(os.addVectors(as.min,ss.min),as.expandByPoint(os),os.addVectors(as.max,ss.max),as.expandByPoint(os)):(as.expandByPoint(ss.min),as.expandByPoint(ss.max))}as.getCenter(n);for(var h=0,c=0,l=t.count;c<l;c++)os.fromBufferAttribute(t,c),h=Math.max(h,n.distanceToSquared(os));if(e)for(var d=0,f=e.length;d<f;d++)for(var v=e[d],y=this.morphTargetsRelative,m=0,x=v.count;m<x;m++)os.fromBufferAttribute(v,m),y&&(rs.fromBufferAttribute(t,m),os.add(rs)),h=Math.max(h,n.distanceToSquared(os));this.boundingSphere.radius=Math.sqrt(h),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var t=this.index,e=this.attributes;if(null!==t&&void 0!==e.position&&void 0!==e.normal&&void 0!==e.uv){var n=e.position,r=e.normal,o=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new qa(new Float32Array(4*n.count),4));for(var h=this.getAttribute("tangent"),c=[],l=[],i=0;i<n.count;i++)c[i]=new cr,l[i]=new cr;var d=new cr,f=new cr,v=new cr,y=new jn,m=new jn,x=new jn,k=new cr,w=new cr,M=this.groups;0===M.length&&(M=[{start:0,count:t.count}]);for(var S=0,_=M.length;S<_;++S)for(var O=M[S],A=O.start,j=A,T=A+O.count;j<T;j+=3)V(t.getX(j+0),t.getX(j+1),t.getX(j+2));for(var z=new cr,C=new cr,I=new cr,B=new cr,R=0,P=M.length;R<P;++R)for(var E=M[R],F=E.start,N=F,L=F+E.count;N<L;N+=3)W(t.getX(N+0)),W(t.getX(N+1)),W(t.getX(N+2))}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function V(a,b,t){d.fromBufferAttribute(n,a),f.fromBufferAttribute(n,b),v.fromBufferAttribute(n,t),y.fromBufferAttribute(o,a),m.fromBufferAttribute(o,b),x.fromBufferAttribute(o,t),f.sub(d),v.sub(d),m.sub(y),x.sub(y);var e=1/(m.x*x.y-x.x*m.y);isFinite(e)&&(k.copy(f).multiplyScalar(x.y).addScaledVector(v,-m.y).multiplyScalar(e),w.copy(v).multiplyScalar(m.x).addScaledVector(f,-x.x).multiplyScalar(e),c[a].add(k),c[b].add(k),c[t].add(k),l[a].add(w),l[b].add(w),l[t].add(w))}function W(t){I.fromBufferAttribute(r,t),B.copy(I);var e=c[t];z.copy(e),z.sub(I.multiplyScalar(I.dot(e))).normalize(),C.crossVectors(B,e);var n=C.dot(l[t])<0?-1:1;h.setXYZW(t,z.x,z.y,z.z,n)}}},{key:"computeVertexNormals",value:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var n=this.getAttribute("normal");if(void 0===n)n=new qa(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(var i=0,r=n.count;i<r;i++)n.setXYZ(i,0,0,0);var o=new cr,h=new cr,c=new cr,l=new cr,d=new cr,f=new cr,v=new cr,y=new cr;if(t)for(var m=0,x=t.count;m<x;m+=3){var k=t.getX(m+0),w=t.getX(m+1),M=t.getX(m+2);o.fromBufferAttribute(e,k),h.fromBufferAttribute(e,w),c.fromBufferAttribute(e,M),v.subVectors(c,h),y.subVectors(o,h),v.cross(y),l.fromBufferAttribute(n,k),d.fromBufferAttribute(n,w),f.fromBufferAttribute(n,M),l.add(v),d.add(v),f.add(v),n.setXYZ(k,l.x,l.y,l.z),n.setXYZ(w,d.x,d.y,d.z),n.setXYZ(M,f.x,f.y,f.z)}else for(var S=0,_=e.count;S<_;S+=3)o.fromBufferAttribute(e,S+0),h.fromBufferAttribute(e,S+1),c.fromBufferAttribute(e,S+2),v.subVectors(c,h),y.subVectors(o,h),v.cross(y),n.setXYZ(S+0,v.x,v.y,v.z),n.setXYZ(S+1,v.x,v.y,v.z),n.setXYZ(S+2,v.x,v.y,v.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"normalizeNormals",value:function(){for(var t=this.attributes.normal,i=0,e=t.count;i<e;i++)os.fromBufferAttribute(t,i),os.normalize(),t.setXYZ(i,os.x,os.y,os.z)}},{key:"toNonIndexed",value:function(){function t(t,e){for(var n=t.array,r=t.itemSize,o=t.normalized,h=new n.constructor(e.length*r),c=0,l=0,i=0,d=e.length;i<d;i++){c=t.isInterleavedBufferAttribute?e[i]*t.data.stride+t.offset:e[i]*r;for(var f=0;f<r;f++)h[l++]=n[c++]}return new qa(h,r,o)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var n=new e,r=this.index.array,o=this.attributes;for(var h in o){var c=t(o[h],r);n.setAttribute(h,c)}var l=this.morphAttributes;for(var d in l){for(var f=[],v=l[d],i=0,y=v.length;i<y;i++){var m=t(v[i],r);f.push(m)}n.morphAttributes[d]=f}n.morphTargetsRelative=this.morphTargetsRelative;for(var x=this.groups,k=0,w=x.length;k<w;k++){var M=x[k];n.addGroup(M.start,M.count,M.materialIndex)}return n}},{key:"toJSON",value:function(){var data={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),Object.keys(this.userData).length>0&&(data.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var e in t)void 0!==t[e]&&(data[e]=t[e]);return data}data.data={attributes:{}};var n=this.index;null!==n&&(data.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});var r=this.attributes;for(var o in r){var h=r[o];data.data.attributes[o]=h.toJSON(data.data)}var c={},l=!1;for(var d in this.morphAttributes){for(var f=this.morphAttributes[d],v=[],i=0,y=f.length;i<y;i++){var m=f[i];v.push(m.toJSON(data.data))}v.length>0&&(c[d]=v,l=!0)}l&&(data.data.morphAttributes=c,data.data.morphTargetsRelative=this.morphTargetsRelative);var x=this.groups;x.length>0&&(data.data.groups=JSON.parse(JSON.stringify(x)));var k=this.boundingSphere;return null!==k&&(data.data.boundingSphere={center:k.center.toArray(),radius:k.radius}),data}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(source){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var data={};this.name=source.name;var t=source.index;null!==t&&this.setIndex(t.clone(data));var e=source.attributes;for(var n in e){var r=e[n];this.setAttribute(n,r.clone(data))}var o=source.morphAttributes;for(var h in o){for(var c=[],l=o[h],i=0,d=l.length;i<d;i++)c.push(l[i].clone(data));this.morphAttributes[h]=c}this.morphTargetsRelative=source.morphTargetsRelative;for(var f=source.groups,v=0,y=f.length;v<y;v++){var m=f[v];this.addGroup(m.start,m.count,m.materialIndex)}var x=source.boundingBox;null!==x&&(this.boundingBox=x.clone());var k=source.boundingSphere;return null!==k&&(this.boundingSphere=k.clone()),this.drawRange.start=source.drawRange.start,this.drawRange.count=source.drawRange.count,this.userData=source.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}])}(yn),hs=new Wr,cs=new Vr,ls=new Ir,ds=new cr,fs=new cr,ps=new cr,vs=new cr,ys=new cr,ms=new cr,gs=new cr,bs=new cr,xs=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new us,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fa;return Object(m.a)(this,e),(t=O(this,e)).isMesh=!0,t.type="Mesh",t.geometry=n,t.material=r,t.updateMorphTargets(),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),void 0!==source.morphTargetInfluences&&(this.morphTargetInfluences=source.morphTargetInfluences.slice()),void 0!==source.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},source.morphTargetDictionary)),this.material=Array.isArray(source.material)?source.material.slice():source.material,this.geometry=source.geometry,this}},{key:"updateMorphTargets",value:function(){var t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){var n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,o=n.length;r<o;r++){var h=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=r}}}}},{key:"getVertexPosition",value:function(t,e){var n=this.geometry,r=n.attributes.position,o=n.morphAttributes.position,h=n.morphTargetsRelative;e.fromBufferAttribute(r,t);var c=this.morphTargetInfluences;if(o&&c){ms.set(0,0,0);for(var i=0,l=o.length;i<l;i++){var d=c[i],f=o[i];0!==d&&(ys.fromBufferAttribute(f,t),h?ms.addScaledVector(ys,d):ms.addScaledVector(ys.sub(e),d))}e.add(ms)}return e}},{key:"raycast",value:function(t,e){var n=this.geometry,r=this.material,o=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),ls.copy(n.boundingSphere),ls.applyMatrix4(o),cs.copy(t.ray).recast(t.near),!1===ls.containsPoint(cs.origin)){if(null===cs.intersectSphere(ls,ds))return;if(cs.origin.distanceToSquared(ds)>Math.pow(t.far-t.near,2))return}hs.copy(o).invert(),cs.copy(t.ray).applyMatrix4(hs),null!==n.boundingBox&&!1===cs.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,cs)}}},{key:"_computeIntersections",value:function(t,e,n){var r,o=this.geometry,h=this.material,c=o.index,l=o.attributes.position,d=o.attributes.uv,f=o.attributes.uv1,v=o.attributes.normal,y=o.groups,m=o.drawRange;if(null!==c)if(Array.isArray(h))for(var i=0,x=y.length;i<x;i++)for(var k=y[i],w=h[k.materialIndex],M=Math.max(k.start,m.start),S=Math.min(c.count,Math.min(k.start+k.count,m.start+m.count));M<S;M+=3){(r=ks(this,w,t,n,d,f,v,c.getX(M),c.getX(M+1),c.getX(M+2)))&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=k.materialIndex,e.push(r))}else for(var _=Math.max(0,m.start),O=Math.min(c.count,m.start+m.count);_<O;_+=3){(r=ks(this,h,t,n,d,f,v,c.getX(_),c.getX(_+1),c.getX(_+2)))&&(r.faceIndex=Math.floor(_/3),e.push(r))}else if(void 0!==l)if(Array.isArray(h))for(var A=0,j=y.length;A<j;A++)for(var T=y[A],z=h[T.materialIndex],C=Math.max(T.start,m.start),I=Math.min(l.count,Math.min(T.start+T.count,m.start+m.count));C<I;C+=3){(r=ks(this,z,t,n,d,f,v,C,C+1,C+2))&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=T.materialIndex,e.push(r))}else for(var B=Math.max(0,m.start),R=Math.min(l.count,m.start+m.count);B<R;B+=3){(r=ks(this,h,t,n,d,f,v,B,B+1,B+2))&&(r.faceIndex=Math.floor(B/3),e.push(r))}}}])}(pa);function ks(object,t,e,n,r,o,h,a,b,c){object.getVertexPosition(a,fs),object.getVertexPosition(b,ps),object.getVertexPosition(c,vs);var l=function(object,t,e,n,r,o,h,c){if(null===(t.side===V?n.intersectTriangle(h,o,r,!0,c):n.intersectTriangle(r,o,h,t.side===L,c)))return null;bs.copy(c),bs.applyMatrix4(object.matrixWorld);var l=e.ray.origin.distanceTo(bs);return l<e.near||l>e.far?null:{distance:l,point:bs.clone(),object:object}}(object,t,e,n,fs,ps,vs,gs);if(l){var d=new cr;ja.getBarycoord(gs,fs,ps,vs,d),r&&(l.uv=ja.getInterpolatedAttribute(r,a,b,c,d,new jn)),o&&(l.uv1=ja.getInterpolatedAttribute(o,a,b,c,d,new jn)),h&&(l.normal=ja.getInterpolatedAttribute(h,a,b,c,d,new cr),l.normal.dot(n.direction)>0&&l.normal.multiplyScalar(-1));var f={a:a,b:b,c:c,normal:new cr,materialIndex:0};ja.getNormal(fs,ps,vs,f.normal),l.face=f,l.barycoord=d}return l}var ws=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;Object(m.a)(this,e),(t=O(this,e)).type="BoxGeometry",t.parameters={width:n,height:r,depth:o,widthSegments:h,heightSegments:c,depthSegments:l};var d=t;h=Math.floor(h),c=Math.floor(c),l=Math.floor(l);var f=[],v=[],y=[],x=[],k=0,w=0;function M(u,t,e,n,r,o,h,c,l,m,M){for(var S=o/l,_=h/m,O=o/2,A=h/2,j=c/2,T=l+1,z=m+1,C=0,I=0,B=new cr,R=0;R<z;R++)for(var P=R*_-A,E=0;E<T;E++){var F=E*S-O;B[u]=F*n,B[t]=P*r,B[e]=j,v.push(B.x,B.y,B.z),B[u]=0,B[t]=0,B[e]=c>0?1:-1,y.push(B.x,B.y,B.z),x.push(E/l),x.push(1-R/m),C+=1}for(var N=0;N<m;N++)for(var L=0;L<l;L++){var a=k+L+T*N,b=k+L+T*(N+1),V=k+(L+1)+T*(N+1),W=k+(L+1)+T*N;f.push(a,b,W),f.push(b,V,W),I+=6}d.addGroup(w,I,M),w+=I,k+=C}return M("z","y","x",-1,-1,o,r,n,l,c,0),M("z","y","x",1,-1,o,r,-n,l,c,1),M("x","z","y",1,1,n,o,r,h,l,2),M("x","z","y",1,-1,n,o,-r,h,l,3),M("x","y","z",1,-1,n,r,o,h,c,4),M("x","y","z",-1,-1,n,r,-o,h,c,5),t.setIndex(f),t.setAttribute("position",new ts(v,3)),t.setAttribute("normal",new ts(y,3)),t.setAttribute("uv",new ts(x,2)),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}}],[{key:"fromJSON",value:function(data){return new e(data.width,data.height,data.depth,data.widthSegments,data.heightSegments,data.depthSegments)}}])}(us);function Ms(t){var e={};for(var u in t)for(var p in e[u]={},t[u]){var n=t[u][p];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?n.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[u][p]=null):e[u][p]=n.clone():Array.isArray(n)?e[u][p]=n.slice():e[u][p]=n}return e}function Ss(t){for(var e={},u=0;u<t.length;u++){var n=Ms(t[u]);for(var p in n)e[p]=n[p]}return e}function _s(t){var e=t.getRenderTarget();return null===e?t.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:qn.workingColorSpace}var Os,As={clone:Ms,merge:Ss},js=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isShaderMaterial=!0,n.type="ShaderMaterial",n.defines={},n.uniforms={},n.uniformsGroups=[],n.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",n.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",n.linewidth=1,n.wireframe=!1,n.wireframeLinewidth=1,n.fog=!1,n.lights=!1,n.clipping=!1,n.forceSinglePass=!0,n.extensions={clipCullDistance:!1,multiDraw:!1},n.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},n.index0AttributeName=void 0,n.uniformsNeedUpdate=!1,n.glslVersion=null,void 0!==t&&n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.fragmentShader=source.fragmentShader,this.vertexShader=source.vertexShader,this.uniforms=Ms(source.uniforms),this.uniformsGroups=function(t){for(var e=[],u=0;u<t.length;u++)e.push(t[u].clone());return e}(source.uniformsGroups),this.defines=Object.assign({},source.defines),this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.fog=source.fog,this.lights=source.lights,this.clipping=source.clipping,this.extensions=Object.assign({},source.extensions),this.glslVersion=source.glslVersion,this}},{key:"toJSON",value:function(meta){var data=_(e,"toJSON",this,3)([meta]);for(var t in data.glslVersion=this.glslVersion,data.uniforms={},this.uniforms){var n=this.uniforms[t].value;n&&n.isTexture?data.uniforms[t]={type:"t",value:n.toJSON(meta).uuid}:n&&n.isColor?data.uniforms[t]={type:"c",value:n.getHex()}:n&&n.isVector2?data.uniforms[t]={type:"v2",value:n.toArray()}:n&&n.isVector3?data.uniforms[t]={type:"v3",value:n.toArray()}:n&&n.isVector4?data.uniforms[t]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?data.uniforms[t]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?data.uniforms[t]={type:"m4",value:n.toArray()}:data.uniforms[t]={value:n}}Object.keys(this.defines).length>0&&(data.defines=this.defines),data.vertexShader=this.vertexShader,data.fragmentShader=this.fragmentShader,data.lights=this.lights,data.clipping=this.clipping;var r={};for(var o in this.extensions)!0===this.extensions[o]&&(r[o]=!0);return Object.keys(r).length>0&&(data.extensions=r),data}}])}(Ea),Ts=function(t){function e(){var t;return Object(m.a)(this,e),(t=O(this,e)).isCamera=!0,t.type="Camera",t.matrixWorldInverse=new Wr,t.projectionMatrix=new Wr,t.projectionMatrixInverse=new Wr,t.coordinateSystem=pn,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),this.matrixWorldInverse.copy(source.matrixWorldInverse),this.projectionMatrix.copy(source.projectionMatrix),this.projectionMatrixInverse.copy(source.projectionMatrixInverse),this.coordinateSystem=source.coordinateSystem,this}},{key:"getWorldDirection",value:function(t){return _(e,"getWorldDirection",this,3)([t]).negate()}},{key:"updateMatrixWorld",value:function(t){_(e,"updateMatrixWorld",this,3)([t]),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(t,n){_(e,"updateWorldMatrix",this,3)([t,n]),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(pa),zs=new cr,Cs=new jn,Is=new jn,Bs=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return Object(m.a)(this,e),(t=O(this,e)).isPerspectiveCamera=!0,t.type="PerspectiveCamera",t.fov=n,t.zoom=1,t.near=o,t.far=h,t.focus=10,t.aspect=r,t.view=null,t.filmGauge=35,t.filmOffset=0,t.updateProjectionMatrix(),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),this.fov=source.fov,this.zoom=source.zoom,this.near=source.near,this.far=source.far,this.focus=source.focus,this.aspect=source.aspect,this.view=null===source.view?null:Object.assign({},source.view),this.filmGauge=source.filmGauge,this.filmOffset=source.filmOffset,this}},{key:"setFocalLength",value:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*xn*Math.atan(e),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var t=Math.tan(.5*bn*this.fov);return.5*this.getFilmHeight()/t}},{key:"getEffectiveFOV",value:function(){return 2*xn*Math.atan(Math.tan(.5*bn*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"getViewBounds",value:function(t,e,n){zs.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(zs.x,zs.y).multiplyScalar(-t/zs.z),zs.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(zs.x,zs.y).multiplyScalar(-t/zs.z)}},{key:"getViewSize",value:function(t,e){return this.getViewBounds(t,Cs,Is),e.subVectors(Is,Cs)}},{key:"setViewOffset",value:function(t,e,n,r,o,h){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=h,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=this.near,e=t*Math.tan(.5*bn*this.fov)/this.zoom,n=2*e,r=this.aspect*n,o=-.5*r,view=this.view;if(null!==this.view&&this.view.enabled){var h=view.fullWidth,c=view.fullHeight;o+=view.offsetX*r/h,e-=view.offsetY*n/c,r*=view.width/h,n*=view.height/c}var l=this.filmOffset;0!==l&&(o+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(meta){var data=_(e,"toJSON",this,3)([meta]);return data.object.fov=this.fov,data.object.zoom=this.zoom,data.object.near=this.near,data.object.far=this.far,data.object.focus=this.focus,data.object.aspect=this.aspect,null!==this.view&&(data.object.view=Object.assign({},this.view)),data.object.filmGauge=this.filmGauge,data.object.filmOffset=this.filmOffset,data}}])}(Ts),Rs=-90,Ps=function(t){function e(t,n,r){var o;Object(m.a)(this,e),(o=O(this,e)).type="CubeCamera",o.renderTarget=r,o.coordinateSystem=null,o.activeMipmapLevel=0;var h=new Bs(Rs,1,t,n);h.layers=o.layers,o.add(h);var c=new Bs(Rs,1,t,n);c.layers=o.layers,o.add(c);var l=new Bs(Rs,1,t,n);l.layers=o.layers,o.add(l);var d=new Bs(Rs,1,t,n);d.layers=o.layers,o.add(d);var f=new Bs(Rs,1,t,n);f.layers=o.layers,o.add(f);var v=new Bs(Rs,1,t,n);return v.layers=o.layers,o.add(v),o}return Object(v.a)(e,t),Object(x.a)(e,[{key:"updateCoordinateSystem",value:function(){var t,e=this.coordinateSystem,n=this.children.concat(),r=Object(h.a)(n,6),o=r[0],c=r[1],l=r[2],d=r[3],f=r[4],v=r[5],y=M(n);try{for(y.s();!(t=y.n()).done;){var m=t.value;this.remove(m)}}catch(t){y.e(t)}finally{y.f()}if(e===pn)o.up.set(0,1,0),o.lookAt(1,0,0),c.up.set(0,1,0),c.lookAt(-1,0,0),l.up.set(0,0,-1),l.lookAt(0,1,0),d.up.set(0,0,1),d.lookAt(0,-1,0),f.up.set(0,1,0),f.lookAt(0,0,1),v.up.set(0,1,0),v.lookAt(0,0,-1);else{if(e!==vn)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);o.up.set(0,-1,0),o.lookAt(-1,0,0),c.up.set(0,-1,0),c.lookAt(1,0,0),l.up.set(0,0,1),l.lookAt(0,1,0),d.up.set(0,0,-1),d.lookAt(0,-1,0),f.up.set(0,-1,0),f.lookAt(0,0,1),v.up.set(0,-1,0),v.lookAt(0,0,-1)}var x,k=M(n);try{for(k.s();!(x=k.n()).done;){var w=x.value;this.add(w),w.updateMatrixWorld()}}catch(t){k.e(t)}finally{k.f()}}},{key:"update",value:function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=this.activeMipmapLevel;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());var o=Object(h.a)(this.children,6),c=o[0],l=o[1],d=o[2],f=o[3],v=o[4],y=o[5],m=t.getRenderTarget(),x=t.getActiveCubeFace(),k=t.getActiveMipmapLevel(),w=t.xr.enabled;t.xr.enabled=!1;var M=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,r),t.render(e,c),t.setRenderTarget(n,1,r),t.render(e,l),t.setRenderTarget(n,2,r),t.render(e,d),t.setRenderTarget(n,3,r),t.render(e,f),t.setRenderTarget(n,4,r),t.render(e,v),n.texture.generateMipmaps=M,t.setRenderTarget(n,5,r),t.render(e,y),t.setRenderTarget(m,x,k),t.xr.enabled=w,n.texture.needsPMREMUpdate=!0}}])}(pa),Es=function(t){function e(t,n,r,o,h,c,l,d,f,v){var y;return Object(m.a)(this,e),(y=O(this,e,[t=void 0!==t?t:[],n=void 0!==n?n:Lt,r,o,h,c,l,d,f,v])).isCubeTexture=!0,y.flipY=!1,y}return Object(v.a)(e,t),Object(x.a)(e,[{key:"images",get:function(){return this.image},set:function(t){this.image=t}}])}($n),Fs=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(m.a)(this,e),(t=O(this,e,[n,n,r])).isWebGLCubeRenderTarget=!0;var image={width:n,height:n,depth:1},o=[image,image,image,image,image,image];return t.texture=new Es(o,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),t.texture.isRenderTargetTexture=!0,t.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,t.texture.minFilter=void 0!==r.minFilter?r.minFilter:Kt,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"fromEquirectangularTexture",value:function(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",o="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",h=new ws(5,5,5),c=new js({name:"CubemapFromEquirect",uniforms:Ms(n),vertexShader:r,fragmentShader:o,side:V,blending:U});c.uniforms.tEquirect.value=e;var l=new xs(h,c),d=e.minFilter;return e.minFilter===ee&&(e.minFilter=Kt),new Ps(1,10,this).update(t,l),e.minFilter=d,l.geometry.dispose(),l.material.dispose(),this}},{key:"clear",value:function(t,e,n,r){for(var o=t.getRenderTarget(),i=0;i<6;i++)t.setRenderTarget(this,i),t.clear(e,n,r);t.setRenderTarget(o)}}])}(nr),Ns=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;Object(m.a)(this,t),this.isFogExp2=!0,this.name="",this.color=new Ba(e),this.density=n}return Object(x.a)(t,[{key:"clone",value:function(){return new t(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}])}(),Ls=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;Object(m.a)(this,t),this.isFog=!0,this.name="",this.color=new Ba(e),this.near=n,this.far=r}return Object(x.a)(t,[{key:"clone",value:function(){return new t(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}])}(),Vs=function(t){function e(){var t;return Object(m.a)(this,e),(t=O(this,e)).isScene=!0,t.type="Scene",t.background=null,t.environment=null,t.fog=null,t.backgroundBlurriness=0,t.backgroundIntensity=1,t.backgroundRotation=new Qr,t.environmentIntensity=1,t.environmentRotation=new Qr,t.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:t})),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),null!==source.background&&(this.background=source.background.clone()),null!==source.environment&&(this.environment=source.environment.clone()),null!==source.fog&&(this.fog=source.fog.clone()),this.backgroundBlurriness=source.backgroundBlurriness,this.backgroundIntensity=source.backgroundIntensity,this.backgroundRotation.copy(source.backgroundRotation),this.environmentIntensity=source.environmentIntensity,this.environmentRotation.copy(source.environmentRotation),null!==source.overrideMaterial&&(this.overrideMaterial=source.overrideMaterial.clone()),this.matrixAutoUpdate=source.matrixAutoUpdate,this}},{key:"toJSON",value:function(meta){var data=_(e,"toJSON",this,3)([meta]);return null!==this.fog&&(data.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(data.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(data.object.backgroundIntensity=this.backgroundIntensity),data.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(data.object.environmentIntensity=this.environmentIntensity),data.object.environmentRotation=this.environmentRotation.toArray(),data}}])}(pa),Ws=function(){return Object(x.a)((function t(e,n){Object(m.a)(this,t),this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=void 0!==e?e.length/n:0,this.usage=nn,this.updateRanges=[],this.version=0,this.uuid=kn()}),[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"addUpdateRange",value:function(t,e){this.updateRanges.push({start:t,count:e})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(source){return this.array=new source.array.constructor(source.array),this.count=source.count,this.stride=source.stride,this.usage=source.usage,this}},{key:"copyAt",value:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"clone",value:function(data){void 0===data.arrayBuffers&&(data.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=kn()),void 0===data.arrayBuffers[this.array.buffer._uuid]&&(data.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(data.arrayBuffers[this.array.buffer._uuid]),e=new this.constructor(t,this.stride);return e.setUsage(this.usage),e}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"toJSON",value:function(data){return void 0===data.arrayBuffers&&(data.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=kn()),void 0===data.arrayBuffers[this.array.buffer._uuid]&&(data.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}])}(),Us=new cr,Ds=function(){function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(m.a)(this,t),this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=o}return Object(x.a)(t,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(t){this.data.needsUpdate=t}},{key:"applyMatrix4",value:function(t){for(var i=0,e=this.data.count;i<e;i++)Us.fromBufferAttribute(this,i),Us.applyMatrix4(t),this.setXYZ(i,Us.x,Us.y,Us.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var i=0,e=this.count;i<e;i++)Us.fromBufferAttribute(this,i),Us.applyNormalMatrix(t),this.setXYZ(i,Us.x,Us.y,Us.z);return this}},{key:"transformDirection",value:function(t){for(var i=0,e=this.count;i<e;i++)Us.fromBufferAttribute(this,i),Us.transformDirection(t),this.setXYZ(i,Us.x,Us.y,Us.z);return this}},{key:"getComponent",value:function(t,component){var e=this.array[t*this.data.stride+this.offset+component];return this.normalized&&(e=_n(e,this.array)),e}},{key:"setComponent",value:function(t,component,e){return this.normalized&&(e=On(e,this.array)),this.data.array[t*this.data.stride+this.offset+component]=e,this}},{key:"setX",value:function(t,e){return this.normalized&&(e=On(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}},{key:"setY",value:function(t,e){return this.normalized&&(e=On(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}},{key:"setZ",value:function(t,e){return this.normalized&&(e=On(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}},{key:"setW",value:function(t,e){return this.normalized&&(e=On(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}},{key:"getX",value:function(t){var e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=_n(e,this.array)),e}},{key:"getY",value:function(t){var e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=_n(e,this.array)),e}},{key:"getZ",value:function(t){var e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=_n(e,this.array)),e}},{key:"getW",value:function(t){var e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=_n(e,this.array)),e}},{key:"setXY",value:function(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=On(e,this.array),n=On(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}},{key:"setXYZ",value:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=On(e,this.array),n=On(n,this.array),r=On(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}},{key:"setXYZW",value:function(t,e,n,r,o){return t=t*this.data.stride+this.offset,this.normalized&&(e=On(e,this.array),n=On(n,this.array),r=On(r,this.array),o=On(o,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=o,this}},{key:"clone",value:function(data){if(void 0===data){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var e=[],i=0;i<this.count;i++)for(var n=i*this.data.stride+this.offset,r=0;r<this.itemSize;r++)e.push(this.data.array[n+r]);return new qa(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===data.interleavedBuffers&&(data.interleavedBuffers={}),void 0===data.interleavedBuffers[this.data.uuid]&&(data.interleavedBuffers[this.data.uuid]=this.data.clone(data)),new t(data.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(data){if(void 0===data){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var t=[],i=0;i<this.count;i++)for(var e=i*this.data.stride+this.offset,n=0;n<this.itemSize;n++)t.push(this.data.array[e+n]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===data.interleavedBuffers&&(data.interleavedBuffers={}),void 0===data.interleavedBuffers[this.data.uuid]&&(data.interleavedBuffers[this.data.uuid]=this.data.toJSON(data)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}])}(),Hs=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isSpriteMaterial=!0,n.type="SpriteMaterial",n.color=new Ba(16777215),n.map=null,n.alphaMap=null,n.rotation=0,n.sizeAttenuation=!0,n.transparent=!0,n.fog=!0,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.color.copy(source.color),this.map=source.map,this.alphaMap=source.alphaMap,this.rotation=source.rotation,this.sizeAttenuation=source.sizeAttenuation,this.fog=source.fog,this}}])}(Ea),qs=new cr,Js=new cr,Xs=new cr,Ys=new jn,Zs=new jn,Gs=new Wr,Qs=new cr,Ks=new cr,$s=new cr,to=new jn,eo=new jn,io=new jn,no=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Hs;if(Object(m.a)(this,e),(t=O(this,e)).isSprite=!0,t.type="Sprite",void 0===Os){Os=new us;var r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),o=new Ws(r,5);Os.setIndex([0,1,2,0,2,3]),Os.setAttribute("position",new Ds(o,3,0,!1)),Os.setAttribute("uv",new Ds(o,2,3,!1))}return t.geometry=Os,t.material=n,t.center=new jn(.5,.5),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"raycast",value:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Js.setFromMatrixScale(this.matrixWorld),Gs.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Xs.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Js.multiplyScalar(-Xs.z);var n,r,o=this.material.rotation;0!==o&&(r=Math.cos(o),n=Math.sin(o));var h=this.center;ro(Qs.set(-.5,-.5,0),Xs,h,Js,n,r),ro(Ks.set(.5,-.5,0),Xs,h,Js,n,r),ro($s.set(.5,.5,0),Xs,h,Js,n,r),to.set(0,0),eo.set(1,0),io.set(1,1);var c=t.ray.intersectTriangle(Qs,Ks,$s,!1,qs);if(null!==c||(ro(Ks.set(-.5,.5,0),Xs,h,Js,n,r),eo.set(0,1),null!==(c=t.ray.intersectTriangle(Qs,$s,Ks,!1,qs)))){var l=t.ray.origin.distanceTo(qs);l<t.near||l>t.far||e.push({distance:l,point:qs.clone(),uv:ja.getInterpolation(qs,Qs,Ks,$s,to,eo,io,new jn),face:null,object:this})}}},{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),void 0!==source.center&&this.center.copy(source.center),this.material=source.material,this}}])}(pa);function ro(t,e,n,r,o,h){Ys.subVectors(t,n).addScalar(.5).multiply(r),void 0!==o?(Zs.x=h*Ys.x-o*Ys.y,Zs.y=o*Ys.x+h*Ys.y):Zs.copy(Ys),t.copy(e),t.x+=Zs.x,t.y+=Zs.y,t.applyMatrix4(Gs)}var ao=new cr,so=new cr,oo=function(t){function e(){var t;return Object(m.a)(this,e),(t=O(this,e))._currentLevel=0,t.type="LOD",Object.defineProperties(t,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),t.autoUpdate=!0,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){_(e,"copy",this,3)([source,!1]);for(var t=source.levels,i=0,n=t.length;i<n;i++){var r=t[i];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=source.autoUpdate,this}},{key:"addLevel",value:function(object){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);var n,r=this.levels;for(n=0;n<r.length&&!(t<r[n].distance);n++);return r.splice(n,0,{distance:t,hysteresis:e,object:object}),this.add(object),this}},{key:"removeLevel",value:function(t){for(var e=this.levels,i=0;i<e.length;i++)if(e[i].distance===t){var n=e.splice(i,1);return this.remove(n[0].object),!0}return!1}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(t){var e=this.levels;if(e.length>0){var i,n;for(i=1,n=e.length;i<n;i++){var r=e[i].distance;if(e[i].object.visible&&(r-=r*e[i].hysteresis),t<r)break}return e[i-1].object}return null}},{key:"raycast",value:function(t,e){if(this.levels.length>0){ao.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(ao);this.getObjectForDistance(n).raycast(t,e)}}},{key:"update",value:function(t){var e=this.levels;if(e.length>1){ao.setFromMatrixPosition(t.matrixWorld),so.setFromMatrixPosition(this.matrixWorld);var i,n,r=ao.distanceTo(so)/t.zoom;for(e[0].object.visible=!0,i=1,n=e.length;i<n;i++){var o=e[i].distance;if(e[i].object.visible&&(o-=o*e[i].hysteresis),!(r>=o))break;e[i-1].object.visible=!1,e[i].object.visible=!0}for(this._currentLevel=i-1;i<n;i++)e[i].object.visible=!1}}},{key:"toJSON",value:function(meta){var data=_(e,"toJSON",this,3)([meta]);!1===this.autoUpdate&&(data.object.autoUpdate=!1),data.object.levels=[];for(var t=this.levels,i=0,n=t.length;i<n;i++){var r=t[i];data.object.levels.push({object:r.object.uuid,distance:r.distance,hysteresis:r.hysteresis})}return data}}])}(pa),uo=new cr,ho=new er,co=new er,lo=new cr,fo=new Wr,po=new cr,vo=new Ir,yo=new Wr,mo=new Vr,go=function(t){function e(t,n){var r;return Object(m.a)(this,e),(r=O(this,e,[t,n])).isSkinnedMesh=!0,r.type="SkinnedMesh",r.bindMode=Et,r.bindMatrix=new Wr,r.bindMatrixInverse=new Wr,r.boundingBox=null,r.boundingSphere=null,r}return Object(v.a)(e,t),Object(x.a)(e,[{key:"computeBoundingBox",value:function(){var t=this.geometry;null===this.boundingBox&&(this.boundingBox=new fr),this.boundingBox.makeEmpty();for(var e=t.getAttribute("position"),i=0;i<e.count;i++)this.getVertexPosition(i,po),this.boundingBox.expandByPoint(po)}},{key:"computeBoundingSphere",value:function(){var t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Ir),this.boundingSphere.makeEmpty();for(var e=t.getAttribute("position"),i=0;i<e.count;i++)this.getVertexPosition(i,po),this.boundingSphere.expandByPoint(po)}},{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),this.bindMode=source.bindMode,this.bindMatrix.copy(source.bindMatrix),this.bindMatrixInverse.copy(source.bindMatrixInverse),this.skeleton=source.skeleton,null!==source.boundingBox&&(this.boundingBox=source.boundingBox.clone()),null!==source.boundingSphere&&(this.boundingSphere=source.boundingSphere.clone()),this}},{key:"raycast",value:function(t,e){var n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),vo.copy(this.boundingSphere),vo.applyMatrix4(r),!1!==t.ray.intersectsSphere(vo)&&(yo.copy(r).invert(),mo.copy(t.ray).applyMatrix4(yo),null!==this.boundingBox&&!1===mo.intersectsBox(this.boundingBox)||this._computeIntersections(t,e,mo)))}},{key:"getVertexPosition",value:function(t,n){return _(e,"getVertexPosition",this,3)([t,n]),this.applyBoneTransform(t,n),n}},{key:"bind",value:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var t=new er,e=this.geometry.attributes.skinWeight,i=0,n=e.count;i<n;i++){t.fromBufferAttribute(e,i);var r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}},{key:"updateMatrixWorld",value:function(t){_(e,"updateMatrixWorld",this,3)([t]),this.bindMode===Et?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Ft?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"applyBoneTransform",value:function(t,e){var n=this.skeleton,r=this.geometry;ho.fromBufferAttribute(r.attributes.skinIndex,t),co.fromBufferAttribute(r.attributes.skinWeight,t),uo.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(var i=0;i<4;i++){var o=co.getComponent(i);if(0!==o){var h=ho.getComponent(i);fo.multiplyMatrices(n.bones[h].matrixWorld,n.boneInverses[h]),e.addScaledVector(lo.copy(uo).applyMatrix4(fo),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}])}(xs),bo=function(t){function e(){var t;return Object(m.a)(this,e),(t=O(this,e)).isBone=!0,t.type="Bone",t}return Object(v.a)(e,t),Object(x.a)(e)}(pa),xo=function(t){function e(){var t,data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,h=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Xt,v=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Xt,y=arguments.length>10?arguments[10]:void 0,x=arguments.length>11?arguments[11]:void 0;return Object(m.a)(this,e),(t=O(this,e,[null,c,l,d,f,v,o,h,y,x])).isDataTexture=!0,t.image={data:data,width:n,height:r},t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t}return Object(v.a)(e,t),Object(x.a)(e)}($n),ko=new Wr,wo=new Wr,Mo=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(m.a)(this,t),this.uuid=kn(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}return Object(x.a)(t,[{key:"init",value:function(){var t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var i=0,n=this.bones.length;i<n;i++)this.boneInverses.push(new Wr)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var i=0,t=this.bones.length;i<t;i++){var e=new Wr;this.bones[i]&&e.copy(this.bones[i].matrixWorld).invert(),this.boneInverses.push(e)}}},{key:"pose",value:function(){for(var i=0,t=this.bones.length;i<t;i++){var e=this.bones[i];e&&e.matrixWorld.copy(this.boneInverses[i]).invert()}for(var n=0,r=this.bones.length;n<r;n++){var o=this.bones[n];o&&(o.parent&&o.parent.isBone?(o.matrix.copy(o.parent.matrixWorld).invert(),o.matrix.multiply(o.matrixWorld)):o.matrix.copy(o.matrixWorld),o.matrix.decompose(o.position,o.quaternion,o.scale))}}},{key:"update",value:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=t.length;i<o;i++){var h=t[i]?t[i].matrixWorld:wo;ko.multiplyMatrices(h,e[i]),ko.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new t(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);var e=new Float32Array(t*t*4);e.set(this.boneMatrices);var n=new xo(e,t,t,me,he);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}},{key:"getBoneByName",value:function(t){for(var i=0,e=this.bones.length;i<e;i++){var n=this.bones[i];if(n.name===t)return n}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(t,e){this.uuid=t.uuid;for(var i=0,n=t.bones.length;i<n;i++){var r=t.bones[i],o=e[r];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new bo),this.bones.push(o),this.boneInverses.push((new Wr).fromArray(t.boneInverses[i]))}return this.init(),this}},{key:"toJSON",value:function(){var data={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};data.uuid=this.uuid;for(var t=this.bones,e=this.boneInverses,i=0,n=t.length;i<n;i++){var r=t[i];data.bones.push(r.uuid);var o=e[i];data.boneInverses.push(o.toArray())}return data}}])}(),So=function(t){function e(t,n,r){var o,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(m.a)(this,e),(o=O(this,e,[t,n,r])).isInstancedBufferAttribute=!0,o.meshPerAttribute=h,o}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.meshPerAttribute=source.meshPerAttribute,this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);return data.meshPerAttribute=this.meshPerAttribute,data.isInstancedBufferAttribute=!0,data}}])}(qa),_o=new Wr,Oo=new Wr,Ao=[],jo=new fr,To=new Wr,zo=new xs,Co=new Ir,Io=function(t){function e(t,n,r){var o;Object(m.a)(this,e),(o=O(this,e,[t,n])).isInstancedMesh=!0,o.instanceMatrix=new So(new Float32Array(16*r),16),o.instanceColor=null,o.morphTexture=null,o.count=r,o.boundingBox=null,o.boundingSphere=null;for(var i=0;i<r;i++)o.setMatrixAt(i,To);return o}return Object(v.a)(e,t),Object(x.a)(e,[{key:"computeBoundingBox",value:function(){var t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new fr),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(var i=0;i<e;i++)this.getMatrixAt(i,_o),jo.copy(t.boundingBox).applyMatrix4(_o),this.boundingBox.union(jo)}},{key:"computeBoundingSphere",value:function(){var t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new Ir),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(var i=0;i<e;i++)this.getMatrixAt(i,_o),Co.copy(t.boundingSphere).applyMatrix4(_o),this.boundingSphere.union(Co)}},{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),this.instanceMatrix.copy(source.instanceMatrix),null!==source.morphTexture&&(this.morphTexture=source.morphTexture.clone()),null!==source.instanceColor&&(this.instanceColor=source.instanceColor.clone()),this.count=source.count,null!==source.boundingBox&&(this.boundingBox=source.boundingBox.clone()),null!==source.boundingSphere&&(this.boundingSphere=source.boundingSphere.clone()),this}},{key:"getColorAt",value:function(t,e){e.fromArray(this.instanceColor.array,3*t)}},{key:"getMatrixAt",value:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)}},{key:"getMorphAt",value:function(t,object){for(var e=object.morphTargetInfluences,n=this.morphTexture.source.data.data,r=t*(e.length+1)+1,i=0;i<e.length;i++)e[i]=n[r+i]}},{key:"raycast",value:function(t,e){var n=this.matrixWorld,r=this.count;if(zo.geometry=this.geometry,zo.material=this.material,void 0!==zo.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Co.copy(this.boundingSphere),Co.applyMatrix4(n),!1!==t.ray.intersectsSphere(Co)))for(var o=0;o<r;o++){this.getMatrixAt(o,_o),Oo.multiplyMatrices(n,_o),zo.matrixWorld=Oo,zo.raycast(t,Ao);for(var i=0,h=Ao.length;i<h;i++){var c=Ao[i];c.instanceId=o,c.object=this,e.push(c)}Ao.length=0}}},{key:"setColorAt",value:function(t,e){null===this.instanceColor&&(this.instanceColor=new So(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),e.toArray(this.instanceColor.array,3*t)}},{key:"setMatrixAt",value:function(t,e){e.toArray(this.instanceMatrix.array,16*t)}},{key:"setMorphAt",value:function(t,object){var e=object.morphTargetInfluences,n=e.length+1;null===this.morphTexture&&(this.morphTexture=new xo(new Float32Array(n*this.count),n,this.count,we,he));for(var r=this.morphTexture.source.data.data,o=0,i=0;i<e.length;i++)o+=e[i];var h=this.geometry.morphTargetsRelative?1:1-o,c=n*t;r[c]=h,r.set(e,c+1)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}])}(xs),Bo=new cr,Ro=new cr,Po=new Tn,Eo=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cr(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(m.a)(this,t),this.isPlane=!0,this.normal=e,this.constant=n}),[{key:"set",value:function(t,e){return this.normal.copy(t),this.constant=e,this}},{key:"setComponents",value:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(a,b,t){var e=Bo.subVectors(t,b).cross(Ro.subVectors(a,b)).normalize();return this.setFromNormalAndCoplanarPoint(e,a),this}},{key:"copy",value:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this}},{key:"normalize",value:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(t){return this.normal.dot(t)+this.constant}},{key:"distanceToSphere",value:function(t){return this.distanceToPoint(t.center)-t.radius}},{key:"projectPoint",value:function(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}},{key:"intersectLine",value:function(line,t){var e=line.delta(Bo),n=this.normal.dot(e);if(0===n)return 0===this.distanceToPoint(line.start)?t.copy(line.start):null;var r=-(line.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:t.copy(line.start).addScaledVector(e,r)}},{key:"intersectsLine",value:function(line){var t=this.distanceToPoint(line.start),e=this.distanceToPoint(line.end);return t<0&&e>0||e<0&&t>0}},{key:"intersectsBox",value:function(t){return t.intersectsPlane(this)}},{key:"intersectsSphere",value:function(t){return t.intersectsPlane(this)}},{key:"coplanarPoint",value:function(t){return t.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(t,e){var n=e||Po.getNormalMatrix(t),r=this.coplanarPoint(Bo).applyMatrix4(t),o=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(o),this}},{key:"translate",value:function(t){return this.constant-=t.dot(this.normal),this}},{key:"equals",value:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),Fo=new Ir,No=new cr,Lo=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Eo,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Eo,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Eo,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Eo,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Eo,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Eo;Object(m.a)(this,t),this.planes=[e,n,r,o,h,c]}),[{key:"set",value:function(t,e,n,r,o,h){var c=this.planes;return c[0].copy(t),c[1].copy(e),c[2].copy(n),c[3].copy(r),c[4].copy(o),c[5].copy(h),this}},{key:"copy",value:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this}},{key:"setFromProjectionMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pn,n=this.planes,r=t.elements,o=r[0],h=r[1],c=r[2],l=r[3],d=r[4],f=r[5],v=r[6],y=r[7],m=r[8],x=r[9],k=r[10],w=r[11],M=r[12],S=r[13],_=r[14],O=r[15];if(n[0].setComponents(l-o,y-d,w-m,O-M).normalize(),n[1].setComponents(l+o,y+d,w+m,O+M).normalize(),n[2].setComponents(l+h,y+f,w+x,O+S).normalize(),n[3].setComponents(l-h,y-f,w-x,O-S).normalize(),n[4].setComponents(l-c,y-v,w-k,O-_).normalize(),e===pn)n[5].setComponents(l+c,y+v,w+k,O+_).normalize();else{if(e!==vn)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(c,v,k,_).normalize()}return this}},{key:"intersectsObject",value:function(object){if(void 0!==object.boundingSphere)null===object.boundingSphere&&object.computeBoundingSphere(),Fo.copy(object.boundingSphere).applyMatrix4(object.matrixWorld);else{var t=object.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Fo.copy(t.boundingSphere).applyMatrix4(object.matrixWorld)}return this.intersectsSphere(Fo)}},{key:"intersectsSprite",value:function(t){return Fo.center.set(0,0,0),Fo.radius=.7071067811865476,Fo.applyMatrix4(t.matrixWorld),this.intersectsSphere(Fo)}},{key:"intersectsSphere",value:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(t){for(var e=this.planes,i=0;i<6;i++){var n=e[i];if(No.x=n.normal.x>0?t.max.x:t.min.x,No.y=n.normal.y>0?t.max.y:t.min.y,No.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(No)<0)return!1}return!0}},{key:"containsPoint",value:function(t){for(var e=this.planes,i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}();function Vo(a,b){return a-b}function Wo(a,b){return a.z-b.z}function Uo(a,b){return b.z-a.z}var Do=function(){return Object(x.a)((function t(){Object(m.a)(this,t),this.index=0,this.pool=[],this.list=[]}),[{key:"push",value:function(t,e,n,r){var o=this.pool,h=this.list;this.index>=o.length&&o.push({start:-1,count:-1,z:-1,index:-1});var c=o[this.index];h.push(c),this.index++,c.start=t,c.count=e,c.z=n,c.index=r}},{key:"reset",value:function(){this.list.length=0,this.index=0}}])}(),Ho=new Wr,qo=new Ba(1,1,1),Jo=new Lo,Xo=new fr,Yo=new Ir,Zo=new cr,Go=new cr,Qo=new cr,Ko=new Do,$o=new xs,tu=[];function eu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor)for(var o=t.count,i=0;i<o;i++)for(var h=0;h<r;h++)e.setComponent(i+n,h,t.getComponent(i,h));else e.array.set(t.array,n*r);e.needsUpdate=!0}function iu(t,e){if(t.constructor!==e.constructor)for(var n=Math.min(t.length,e.length),i=0;i<n;i++)e[i]=t[i];else{var r=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,r))}}var nu=function(t){function e(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*n,h=arguments.length>3?arguments[3]:void 0;return Object(m.a)(this,e),(r=O(this,e,[new us,h])).isBatchedMesh=!0,r.perObjectFrustumCulled=!0,r.sortObjects=!0,r.boundingBox=null,r.boundingSphere=null,r.customSort=null,r._instanceInfo=[],r._geometryInfo=[],r._availableInstanceIds=[],r._availableGeometryIds=[],r._nextIndexStart=0,r._nextVertexStart=0,r._geometryCount=0,r._visibilityChanged=!0,r._geometryInitialized=!1,r._maxInstanceCount=t,r._maxVertexCount=n,r._maxIndexCount=o,r._multiDrawCounts=new Int32Array(t),r._multiDrawStarts=new Int32Array(t),r._multiDrawCount=0,r._multiDrawInstances=null,r._matricesTexture=null,r._indirectTexture=null,r._colorsTexture=null,r._initMatricesTexture(),r._initIndirectTexture(),r}return Object(v.a)(e,t),Object(x.a)(e,[{key:"maxInstanceCount",get:function(){return this._maxInstanceCount}},{key:"instanceCount",get:function(){return this._instanceInfo.length-this._availableInstanceIds.length}},{key:"unusedVertexCount",get:function(){return this._maxVertexCount-this._nextVertexStart}},{key:"unusedIndexCount",get:function(){return this._maxIndexCount-this._nextIndexStart}},{key:"_initMatricesTexture",value:function(){var t=Math.sqrt(4*this._maxInstanceCount);t=4*Math.ceil(t/4),t=Math.max(t,4);var e=new Float32Array(t*t*4),n=new xo(e,t,t,me,he);this._matricesTexture=n}},{key:"_initIndirectTexture",value:function(){var t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);var e=new Uint32Array(t*t),n=new xo(e,t,t,Me,ue);this._indirectTexture=n}},{key:"_initColorsTexture",value:function(){var t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);var e=new Float32Array(t*t*4).fill(1),n=new xo(e,t,t,me,he);n.colorSpace=qn.workingColorSpace,this._colorsTexture=n}},{key:"_initializeGeometry",value:function(t){var e=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(!1===this._geometryInitialized){for(var o in t.attributes){var h=t.getAttribute(o),c=h.array,l=h.itemSize,d=h.normalized,f=new c.constructor(n*l),v=new qa(f,l,d);e.setAttribute(o,v)}if(null!==t.getIndex()){var y=n>65535?new Uint32Array(r):new Uint16Array(r);e.setIndex(new qa(y,1))}this._geometryInitialized=!0}}},{key:"_validateGeometry",value:function(t){var e=this.geometry;if(Boolean(t.getIndex())!==Boolean(e.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(var n in e.attributes){if(!t.hasAttribute(n))throw new Error('THREE.BatchedMesh: Added geometry missing "'.concat(n,'". All geometries must have consistent attributes.'));var r=t.getAttribute(n),o=e.getAttribute(n);if(r.itemSize!==o.itemSize||r.normalized!==o.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}},{key:"validateInstanceId",value:function(t){var e=this._instanceInfo;if(t<0||t>=e.length||!1===e[t].active)throw new Error("THREE.BatchedMesh: Invalid instanceId ".concat(t,". Instance is either out of range or has been deleted."))}},{key:"validateGeometryId",value:function(t){var e=this._geometryInfo;if(t<0||t>=e.length||!1===e[t].active)throw new Error("THREE.BatchedMesh: Invalid geometryId ".concat(t,". Geometry is either out of range or has been deleted."))}},{key:"setCustomSort",value:function(t){return this.customSort=t,this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new fr);var t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(var i=0,n=e.length;i<n;i++)if(!1!==e[i].active){var r=e[i].geometryIndex;this.getMatrixAt(i,Ho),this.getBoundingBoxAt(r,Xo).applyMatrix4(Ho),t.union(Xo)}}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Ir);var t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(var i=0,n=e.length;i<n;i++)if(!1!==e[i].active){var r=e[i].geometryIndex;this.getMatrixAt(i,Ho),this.getBoundingSphereAt(r,Yo).applyMatrix4(Ho),t.union(Yo)}}},{key:"addInstance",value:function(t){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("THREE.BatchedMesh: Maximum item count reached.");var e={visible:!0,active:!0,geometryIndex:t},n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Vo),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=e):(n=this._instanceInfo.length,this._instanceInfo.push(e));var r=this._matricesTexture;Ho.identity().toArray(r.image.data,16*n),r.needsUpdate=!0;var o=this._colorsTexture;return o&&(qo.toArray(o.image.data,4*n),o.needsUpdate=!0),this._visibilityChanged=!0,n}},{key:"addGeometry",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this._initializeGeometry(t),this._validateGeometry(t);var r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},o=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=-1===e?t.getAttribute("position").count:e;var h,c=t.getIndex();if(null!==c&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=-1===n?c.count:n),-1!==r.indexStart&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Vo),o[h=this._availableGeometryIds.shift()]=r):(h=this._geometryCount,this._geometryCount++,o.push(r)),this.setGeometryAt(h,t),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,h}},{key:"setGeometryAt",value:function(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);var n=this.geometry,r=null!==n.getIndex(),o=n.getIndex(),h=e.getIndex(),c=this._geometryInfo[t];if(r&&h.count>c.reservedIndexCount||e.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");var l=c.vertexStart,d=c.reservedVertexCount;for(var f in c.vertexCount=e.getAttribute("position").count,n.attributes){var v=e.getAttribute(f),y=n.getAttribute(f);eu(v,y,l);for(var m=v.itemSize,i=v.count,x=d;i<x;i++)for(var k=l+i,w=0;w<m;w++)y.setComponent(k,w,0);y.needsUpdate=!0,y.addUpdateRange(l*m,d*m)}if(r){var M=c.indexStart,S=c.reservedIndexCount;c.indexCount=e.getIndex().count;for(var _=0;_<h.count;_++)o.setX(M+_,l+h.getX(_));for(var O=h.count,A=S;O<A;O++)o.setX(M+O,l);o.needsUpdate=!0,o.addUpdateRange(M,c.reservedIndexCount)}return c.start=r?c.indexStart:c.vertexStart,c.count=r?c.indexCount:c.vertexCount,c.boundingBox=null,null!==e.boundingBox&&(c.boundingBox=e.boundingBox.clone()),c.boundingSphere=null,null!==e.boundingSphere&&(c.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}},{key:"deleteGeometry",value:function(t){var e=this._geometryInfo;if(t>=e.length||!1===e[t].active)return this;for(var n=this._instanceInfo,i=0,r=n.length;i<r;i++)n[i].geometryIndex===t&&this.deleteInstance(i);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}},{key:"deleteInstance",value:function(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}},{key:"optimize",value:function(){for(var t=0,e=0,n=this._geometryInfo,r=n.map((function(t,i){return i})).sort((function(a,b){return n[a].vertexStart-n[b].vertexStart})),o=this.geometry,i=0,h=n.length;i<h;i++){var c=r[i],l=n[c];if(!1!==l.active){if(null!==o.index){if(l.indexStart!==e){for(var d=l.indexStart,f=l.vertexStart,v=l.reservedIndexCount,y=o.index,m=y.array,x=t-f,k=d;k<d+v;k++)m[k]=m[k]+x;y.array.copyWithin(e,d,d+v),y.addUpdateRange(e,v),l.indexStart=e}e+=l.reservedIndexCount}if(l.vertexStart!==t){var w=l.vertexStart,M=l.reservedVertexCount,S=o.attributes;for(var _ in S){var O=S[_],A=O.array,j=O.itemSize;A.copyWithin(t*j,w*j,(w+M)*j),O.addUpdateRange(t*j,M*j)}l.vertexStart=t}t+=l.reservedVertexCount,l.start=o.index?l.indexStart:l.vertexStart,this._nextIndexStart=o.index?l.indexStart+l.reservedIndexCount:0,this._nextVertexStart=l.vertexStart+l.reservedVertexCount}}return this}},{key:"getBoundingBoxAt",value:function(t,e){if(t>=this._geometryCount)return null;var n=this.geometry,r=this._geometryInfo[t];if(null===r.boundingBox){for(var o=new fr,h=n.index,c=n.attributes.position,i=r.start,l=r.start+r.count;i<l;i++){var d=i;h&&(d=h.getX(d)),o.expandByPoint(Zo.fromBufferAttribute(c,d))}r.boundingBox=o}return e.copy(r.boundingBox),e}},{key:"getBoundingSphereAt",value:function(t,e){if(t>=this._geometryCount)return null;var n=this.geometry,r=this._geometryInfo[t];if(null===r.boundingSphere){var o=new Ir;this.getBoundingBoxAt(t,Xo),Xo.getCenter(o.center);for(var h=n.index,c=n.attributes.position,l=0,i=r.start,d=r.start+r.count;i<d;i++){var f=i;h&&(f=h.getX(f)),Zo.fromBufferAttribute(c,f),l=Math.max(l,o.center.distanceToSquared(Zo))}o.radius=Math.sqrt(l),r.boundingSphere=o}return e.copy(r.boundingSphere),e}},{key:"setMatrixAt",value:function(t,e){this.validateInstanceId(t);var n=this._matricesTexture,r=this._matricesTexture.image.data;return e.toArray(r,16*t),n.needsUpdate=!0,this}},{key:"getMatrixAt",value:function(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,16*t)}},{key:"setColorAt",value:function(t,e){return this.validateInstanceId(t),null===this._colorsTexture&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,4*t),this._colorsTexture.needsUpdate=!0,this}},{key:"getColorAt",value:function(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,4*t)}},{key:"setVisibleAt",value:function(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e||(this._instanceInfo[t].visible=e,this._visibilityChanged=!0),this}},{key:"getVisibleAt",value:function(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}},{key:"setGeometryIdAt",value:function(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}},{key:"getGeometryIdAt",value:function(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}},{key:"getGeometryRangeAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.validateGeometryId(t);var n=this._geometryInfo[t];return e.vertexStart=n.vertexStart,e.vertexCount=n.vertexCount,e.reservedVertexCount=n.reservedVertexCount,e.indexStart=n.indexStart,e.indexCount=n.indexCount,e.reservedIndexCount=n.reservedIndexCount,e.start=n.start,e.count=n.count,e}},{key:"setInstanceCount",value:function(t){var e=this._availableInstanceIds,n=this._instanceInfo;for(e.sort(Vo);e[e.length-1]===n.length;)n.pop(),e.pop();if(t<n.length)throw new Error("BatchedMesh: Instance ids outside the range ".concat(t," are being used. Cannot shrink instance count."));var r=new Int32Array(t),o=new Int32Array(t);iu(this._multiDrawCounts,r),iu(this._multiDrawStarts,o),this._multiDrawCounts=r,this._multiDrawStarts=o,this._maxInstanceCount=t;var h=this._indirectTexture,c=this._matricesTexture,l=this._colorsTexture;h.dispose(),this._initIndirectTexture(),iu(h.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),iu(c.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),iu(l.image.data,this._colorsTexture.image.data))}},{key:"setGeometrySize",value:function(t,e){var n=Object(l.a)(this._geometryInfo).filter((function(t){return t.active}));if(Math.max.apply(Math,Object(l.a)(n.map((function(t){return t.vertexStart+t.reservedVertexCount}))))>t)throw new Error("BatchedMesh: Geometry vertex values are being used outside the range ".concat(e,". Cannot shrink further."));if(this.geometry.index&&Math.max.apply(Math,Object(l.a)(n.map((function(t){return t.indexStart+t.reservedIndexCount}))))>e)throw new Error("BatchedMesh: Geometry index values are being used outside the range ".concat(e,". Cannot shrink further."));var r=this.geometry;r.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new us,this._initializeGeometry(r));var o=this.geometry;for(var h in r.index&&iu(r.index.array,o.index.array),r.attributes)iu(r.attributes[h].array,o.attributes[h].array)}},{key:"raycast",value:function(t,e){var n=this._instanceInfo,r=this._geometryInfo,o=this.matrixWorld,h=this.geometry;$o.material=this.material,$o.geometry.index=h.index,$o.geometry.attributes=h.attributes,null===$o.geometry.boundingBox&&($o.geometry.boundingBox=new fr),null===$o.geometry.boundingSphere&&($o.geometry.boundingSphere=new Ir);for(var i=0,c=n.length;i<c;i++)if(n[i].visible&&n[i].active){var l=n[i].geometryIndex,d=r[l];$o.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(i,$o.matrixWorld).premultiply(o),this.getBoundingBoxAt(l,$o.geometry.boundingBox),this.getBoundingSphereAt(l,$o.geometry.boundingSphere),$o.raycast(t,tu);for(var f=0,v=tu.length;f<v;f++){var y=tu[f];y.object=this,y.batchId=i,e.push(y)}tu.length=0}$o.material=null,$o.geometry.index=null,$o.geometry.attributes={},$o.geometry.setDrawRange(0,1/0)}},{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.geometry=source.geometry.clone(),this.perObjectFrustumCulled=source.perObjectFrustumCulled,this.sortObjects=source.sortObjects,this.boundingBox=null!==source.boundingBox?source.boundingBox.clone():null,this.boundingSphere=null!==source.boundingSphere?source.boundingSphere.clone():null,this._geometryInfo=source._geometryInfo.map((function(t){return w(w({},t),{},{boundingBox:null!==t.boundingBox?t.boundingBox.clone():null,boundingSphere:null!==t.boundingSphere?t.boundingSphere.clone():null})})),this._instanceInfo=source._instanceInfo.map((function(t){return w({},t)})),this._maxInstanceCount=source._maxInstanceCount,this._maxVertexCount=source._maxVertexCount,this._maxIndexCount=source._maxIndexCount,this._geometryInitialized=source._geometryInitialized,this._geometryCount=source._geometryCount,this._multiDrawCounts=source._multiDrawCounts.slice(),this._multiDrawStarts=source._multiDrawStarts.slice(),this._matricesTexture=source._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=source._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}},{key:"dispose",value:function(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}},{key:"onBeforeRender",value:function(t,e,n,r,o){if(this._visibilityChanged||this.perObjectFrustumCulled||this.sortObjects){var h=r.getIndex(),c=null===h?1:h.array.BYTES_PER_ELEMENT,l=this._instanceInfo,d=this._multiDrawStarts,f=this._multiDrawCounts,v=this._geometryInfo,y=this.perObjectFrustumCulled,m=this._indirectTexture,x=m.image.data;y&&(Ho.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),Jo.setFromProjectionMatrix(Ho,t.coordinateSystem));var k=0;if(this.sortObjects){Ho.copy(this.matrixWorld).invert(),Zo.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Ho),Go.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Ho);for(var i=0,w=l.length;i<w;i++)if(l[i].visible&&l[i].active){var M=l[i].geometryIndex;this.getMatrixAt(i,Ho),this.getBoundingSphereAt(M,Yo).applyMatrix4(Ho);var S=!1;if(y&&(S=!Jo.intersectsSphere(Yo)),!S){var _=v[M],O=Qo.subVectors(Yo.center,Zo).dot(Go);Ko.push(_.start,_.count,O,i)}}var A=Ko.list,j=this.customSort;null===j?A.sort(o.transparent?Uo:Wo):j.call(this,A,n);for(var T=0,z=A.length;T<z;T++){var C=A[T];d[k]=C.start*c,f[k]=C.count,x[k]=C.index,k++}Ko.reset()}else for(var I=0,B=l.length;I<B;I++)if(l[I].visible&&l[I].active){var R=l[I].geometryIndex,P=!1;if(y&&(this.getMatrixAt(I,Ho),this.getBoundingSphereAt(R,Yo).applyMatrix4(Ho),P=!Jo.intersectsSphere(Yo)),!P){var E=v[R];d[k]=E.start*c,f[k]=E.count,x[k]=I,k++}}m.needsUpdate=!0,this._multiDrawCount=k,this._visibilityChanged=!1}}},{key:"onBeforeShadow",value:function(t,object,e,n,r,o){this.onBeforeRender(t,null,n,r,o)}}])}(xs),ru=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isLineBasicMaterial=!0,n.type="LineBasicMaterial",n.color=new Ba(16777215),n.map=null,n.linewidth=1,n.linecap="round",n.linejoin="round",n.fog=!0,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.color.copy(source.color),this.map=source.map,this.linewidth=source.linewidth,this.linecap=source.linecap,this.linejoin=source.linejoin,this.fog=source.fog,this}}])}(Ea),au=new cr,su=new cr,ou=new Wr,uu=new Vr,hu=new Ir,cu=new cr,lu=new cr,du=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new us,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ru;return Object(m.a)(this,e),(t=O(this,e)).isLine=!0,t.type="Line",t.geometry=n,t.material=r,t.updateMorphTargets(),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),this.material=Array.isArray(source.material)?source.material.slice():source.material,this.geometry=source.geometry,this}},{key:"computeLineDistances",value:function(){var t=this.geometry;if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)au.fromBufferAttribute(e,i-1),su.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=au.distanceTo(su);t.setAttribute("lineDistance",new ts(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(t,e){var n=this.geometry,r=this.matrixWorld,o=t.params.Line.threshold,h=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),hu.copy(n.boundingSphere),hu.applyMatrix4(r),hu.radius+=o,!1!==t.ray.intersectsSphere(hu)){ou.copy(r).invert(),uu.copy(t.ray).applyMatrix4(ou);var c=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=c*c,d=this.isLineSegments?2:1,f=n.index,v=n.attributes.position;if(null!==f){for(var y=Math.max(0,h.start),m=Math.min(f.count,h.start+h.count),i=y,x=m-1;i<x;i+=d){var a=f.getX(i),b=f.getX(i+1),k=fu(this,t,uu,l,a,b);k&&e.push(k)}if(this.isLineLoop){var w=f.getX(m-1),M=f.getX(y),S=fu(this,t,uu,l,w,M);S&&e.push(S)}}else{for(var _=Math.max(0,h.start),O=Math.min(v.count,h.start+h.count),A=_,j=O-1;A<j;A+=d){var T=fu(this,t,uu,l,A,A+1);T&&e.push(T)}if(this.isLineLoop){var z=fu(this,t,uu,l,O-1,_);z&&e.push(z)}}}}},{key:"updateMorphTargets",value:function(){var t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){var n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,o=n.length;r<o;r++){var h=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=r}}}}}])}(pa);function fu(object,t,e,n,a,b){var r=object.geometry.attributes.position;if(au.fromBufferAttribute(r,a),su.fromBufferAttribute(r,b),!(e.distanceSqToSegment(au,su,cu,lu)>n)){cu.applyMatrix4(object.matrixWorld);var o=t.ray.origin.distanceTo(cu);if(!(o<t.near||o>t.far))return{distance:o,point:lu.clone().applyMatrix4(object.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:object}}}var pu=new cr,vu=new cr,yu=function(t){function e(t,n){var r;return Object(m.a)(this,e),(r=O(this,e,[t,n])).isLineSegments=!0,r.type="LineSegments",r}return Object(v.a)(e,t),Object(x.a)(e,[{key:"computeLineDistances",value:function(){var t=this.geometry;if(null===t.index){for(var e=t.attributes.position,n=[],i=0,r=e.count;i<r;i+=2)pu.fromBufferAttribute(e,i),vu.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+pu.distanceTo(vu);t.setAttribute("lineDistance",new ts(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}])}(du),mu=function(t){function e(t,n){var r;return Object(m.a)(this,e),(r=O(this,e,[t,n])).isLineLoop=!0,r.type="LineLoop",r}return Object(v.a)(e,t),Object(x.a)(e)}(du),gu=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isPointsMaterial=!0,n.type="PointsMaterial",n.color=new Ba(16777215),n.map=null,n.alphaMap=null,n.size=1,n.sizeAttenuation=!0,n.fog=!0,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.color.copy(source.color),this.map=source.map,this.alphaMap=source.alphaMap,this.size=source.size,this.sizeAttenuation=source.sizeAttenuation,this.fog=source.fog,this}}])}(Ea),bu=new Wr,xu=new Vr,ku=new Ir,wu=new cr,Mu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new us,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gu;return Object(m.a)(this,e),(t=O(this,e)).isPoints=!0,t.type="Points",t.geometry=n,t.material=r,t.updateMorphTargets(),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),this.material=Array.isArray(source.material)?source.material.slice():source.material,this.geometry=source.geometry,this}},{key:"raycast",value:function(t,e){var n=this.geometry,r=this.matrixWorld,o=t.params.Points.threshold,h=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ku.copy(n.boundingSphere),ku.applyMatrix4(r),ku.radius+=o,!1!==t.ray.intersectsSphere(ku)){bu.copy(r).invert(),xu.copy(t.ray).applyMatrix4(bu);var c=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=c*c,d=n.index,f=n.attributes.position;if(null!==d)for(var i=Math.max(0,h.start),v=Math.min(d.count,h.start+h.count);i<v;i++){var a=d.getX(i);wu.fromBufferAttribute(f,a),Su(wu,a,l,r,t,e,this)}else for(var y=Math.max(0,h.start),m=Math.min(f.count,h.start+h.count);y<m;y++)wu.fromBufferAttribute(f,y),Su(wu,y,l,r,t,e,this)}}},{key:"updateMorphTargets",value:function(){var t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){var n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,o=n.length;r<o;r++){var h=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=r}}}}}])}(pa);function Su(t,e,n,r,o,h,object){var c=xu.distanceSqToPoint(t);if(c<n){var l=new cr;xu.closestPointToPoint(t,l),l.applyMatrix4(r);var d=o.ray.origin.distanceTo(l);if(d<o.near||d>o.far)return;h.push({distance:d,distanceToRay:Math.sqrt(c),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:object})}}var _u=function(t){function e(){var t;return Object(m.a)(this,e),(t=O(this,e)).isGroup=!0,t.type="Group",t}return Object(v.a)(e,t),Object(x.a)(e)}(pa),Ou=function(t){function e(video,t,n,r,o,h,c,l,d){var f;Object(m.a)(this,e),(f=O(this,e,[video,t,n,r,o,h,c,l,d])).isVideoTexture=!0,f.minFilter=void 0!==h?h:Kt,f.magFilter=void 0!==o?o:Kt,f.generateMipmaps=!1;var v=f;return"requestVideoFrameCallback"in video&&video.requestVideoFrameCallback((function t(){v.needsUpdate=!0,video.requestVideoFrameCallback(t)})),f}return Object(v.a)(e,t),Object(x.a)(e,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var video=this.image;!1==="requestVideoFrameCallback"in video&&video.readyState>=video.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}])}($n),Au=function(t){function e(t,n){var r;return Object(m.a)(this,e),(r=O(this,e,[{width:t,height:n}])).isFramebufferTexture=!0,r.magFilter=Xt,r.minFilter=Xt,r.generateMipmaps=!1,r.needsUpdate=!0,r}return Object(v.a)(e,t),Object(x.a)(e)}($n),ju=function(t){function e(t,n,r,o,h,c,l,d,f,v,y,x){var k;return Object(m.a)(this,e),(k=O(this,e,[null,c,l,d,f,v,o,h,y,x])).isCompressedTexture=!0,k.image={width:n,height:r},k.mipmaps=t,k.flipY=!1,k.generateMipmaps=!1,k}return Object(v.a)(e,t),Object(x.a)(e)}($n),Tu=function(t){function e(t,n,r,o,h,c){var l;return Object(m.a)(this,e),(l=O(this,e,[t,n,r,h,c])).isCompressedArrayTexture=!0,l.image.depth=o,l.wrapR=qt,l.layerUpdates=new Set,l}return Object(v.a)(e,t),Object(x.a)(e,[{key:"addLayerUpdate",value:function(t){this.layerUpdates.add(t)}},{key:"clearLayerUpdates",value:function(){this.layerUpdates.clear()}}])}(ju),zu=function(t){function e(t,n,r){var o;return Object(m.a)(this,e),(o=O(this,e,[void 0,t[0].width,t[0].height,n,r,Lt])).isCompressedCubeTexture=!0,o.isCubeTexture=!0,o.image=t,o}return Object(v.a)(e,t),Object(x.a)(e)}(ju),Cu=function(t){function e(canvas,t,n,r,o,h,c,l,d){var f;return Object(m.a)(this,e),(f=O(this,e,[canvas,t,n,r,o,h,c,l,d])).isCanvasTexture=!0,f.needsUpdate=!0,f}return Object(v.a)(e,t),Object(x.a)(e)}($n),Iu=function(t){function e(t,n,r,o,h,c,l,d,f){var v,y=arguments.length>9&&void 0!==arguments[9]?arguments[9]:xe;if(Object(m.a)(this,e),y!==xe&&y!==ke)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===r&&y===xe&&(r=ue),void 0===r&&y===ke&&(r=fe),(v=O(this,e,[null,o,h,c,l,d,y,r,f])).isDepthTexture=!0,v.image={width:t,height:n},v.magFilter=void 0!==l?l:Xt,v.minFilter=void 0!==d?d:Xt,v.flipY=!1,v.generateMipmaps=!1,v.compareFunction=null,v}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.compareFunction=source.compareFunction,this}},{key:"toJSON",value:function(meta){var data=_(e,"toJSON",this,3)([meta]);return null!==this.compareFunction&&(data.compareFunction=this.compareFunction),data}}])}($n),Bu=function(){return Object(x.a)((function t(){Object(m.a)(this,t),this.type="Curve",this.arcLengthDivisions=200}),[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(u,t){var e=this.getUtoTmapping(u);return this.getPoint(e,t)}},{key:"getPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}},{key:"getSpacedPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}},{key:"getLength",value:function(){var t=this.getLengths();return t[t.length-1]}},{key:"getLengths",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],r=this.getPoint(0),o=0;n.push(0);for(var p=1;p<=t;p++)o+=(e=this.getPoint(p/t)).distanceTo(r),n.push(o),r=e;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(u,t){var e,n=this.getLengths(),i=0,r=n.length;e=t||u*n[r-1];for(var o,h=0,c=r-1;h<=c;)if((o=n[i=Math.floor(h+(c-h)/2)]-e)<0)h=i+1;else{if(!(o>0)){c=i;break}c=i-1}if(n[i=c]===e)return i/(r-1);var l=n[i];return(i+(e-l)/(n[i+1]-l))/(r-1)}},{key:"getTangent",value:function(t,e){var n=1e-4,r=t-n,o=t+n;r<0&&(r=0),o>1&&(o=1);var h=this.getPoint(r),c=this.getPoint(o),l=e||(h.isVector2?new jn:new cr);return l.copy(c).sub(h).normalize(),l}},{key:"getTangentAt",value:function(u,t){var e=this.getUtoTmapping(u);return this.getTangent(e,t)}},{key:"computeFrenetFrames",value:function(t,e){for(var n=new cr,r=[],o=[],h=[],c=new cr,l=new Wr,i=0;i<=t;i++){var u=i/t;r[i]=this.getTangentAt(u,new cr)}o[0]=new cr,h[0]=new cr;var d=Number.MAX_VALUE,f=Math.abs(r[0].x),v=Math.abs(r[0].y),y=Math.abs(r[0].z);f<=d&&(d=f,n.set(1,0,0)),v<=d&&(d=v,n.set(0,1,0)),y<=d&&n.set(0,0,1),c.crossVectors(r[0],n).normalize(),o[0].crossVectors(r[0],c),h[0].crossVectors(r[0],o[0]);for(var m=1;m<=t;m++){if(o[m]=o[m-1].clone(),h[m]=h[m-1].clone(),c.crossVectors(r[m-1],r[m]),c.length()>Number.EPSILON){c.normalize();var x=Math.acos(wn(r[m-1].dot(r[m]),-1,1));o[m].applyMatrix4(l.makeRotationAxis(c,x))}h[m].crossVectors(r[m],o[m])}if(!0===e){var k=Math.acos(wn(o[0].dot(o[t]),-1,1));k/=t,r[0].dot(c.crossVectors(o[0],o[t]))>0&&(k=-k);for(var w=1;w<=t;w++)o[w].applyMatrix4(l.makeRotationAxis(r[w],k*w)),h[w].crossVectors(r[w],o[w])}return{tangents:r,normals:o,binormals:h}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(source){return this.arcLengthDivisions=source.arcLengthDivisions,this}},{key:"toJSON",value:function(){var data={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return data.arcLengthDivisions=this.arcLengthDivisions,data.type=this.type,data}},{key:"fromJSON",value:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}])}(),Ru=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,d=arguments.length>6&&void 0!==arguments[6]&&arguments[6],f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return Object(m.a)(this,e),(t=O(this,e)).isEllipseCurve=!0,t.type="EllipseCurve",t.aX=n,t.aY=r,t.xRadius=o,t.yRadius=h,t.aStartAngle=c,t.aEndAngle=l,t.aClockwise=d,t.aRotation=f,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"getPoint",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn,n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=o?0:n),!0!==this.aClockwise||o||(r===n?r=-n:r-=n);var h=this.aStartAngle+t*r,c=this.aX+this.xRadius*Math.cos(h),l=this.aY+this.yRadius*Math.sin(h);if(0!==this.aRotation){var d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),v=c-this.aX,y=l-this.aY;c=v*d-y*f+this.aX,l=v*f+y*d+this.aY}return e.set(c,l)}},{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.aX=source.aX,this.aY=source.aY,this.xRadius=source.xRadius,this.yRadius=source.yRadius,this.aStartAngle=source.aStartAngle,this.aEndAngle=source.aEndAngle,this.aClockwise=source.aClockwise,this.aRotation=source.aRotation,this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);return data.aX=this.aX,data.aY=this.aY,data.xRadius=this.xRadius,data.yRadius=this.yRadius,data.aStartAngle=this.aStartAngle,data.aEndAngle=this.aEndAngle,data.aClockwise=this.aClockwise,data.aRotation=this.aRotation,data}},{key:"fromJSON",value:function(t){return _(e,"fromJSON",this,3)([t]),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}])}(Bu),Pu=function(t){function e(t,n,r,o,h,c){var l;return Object(m.a)(this,e),(l=O(this,e,[t,n,r,r,o,h,c])).isArcCurve=!0,l.type="ArcCurve",l}return Object(v.a)(e,t),Object(x.a)(e)}(Ru);function Eu(){var t=0,e=0,n=0,r=0;function o(o,h,c,l){t=o,e=c,n=-3*o+3*h-2*c-l,r=2*o-2*h+c+l}return{initCatmullRom:function(t,e,n,r,h){o(e,n,h*(n-t),h*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,h,c,l){var d=(e-t)/h-(n-t)/(h+c)+(n-e)/c,f=(n-e)/c-(r-e)/(c+l)+(r-n)/l;o(e,n,d*=c,f*=c)},calc:function(o){var h=o*o;return t+e*o+n*h+r*(h*o)}}}var Fu=new cr,Nu=new Eu,Lu=new Eu,Vu=new Eu,Wu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return Object(m.a)(this,e),(t=O(this,e)).isCatmullRomCurve3=!0,t.type="CatmullRomCurve3",t.points=n,t.closed=r,t.curveType=o,t.tension=h,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"getPoint",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cr,o=this.points,h=o.length,p=(h-(this.closed?0:1))*t,c=Math.floor(p),l=p-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/h)+1)*h:0===l&&c===h-1&&(c=h-2,l=1),this.closed||c>0?e=o[(c-1)%h]:(Fu.subVectors(o[0],o[1]).add(o[0]),e=Fu);var d=o[c%h],f=o[(c+1)%h];if(this.closed||c+2<h?n=o[(c+2)%h]:(Fu.subVectors(o[h-1],o[h-2]).add(o[h-1]),n=Fu),"centripetal"===this.curveType||"chordal"===this.curveType){var v="chordal"===this.curveType?.5:.25,y=Math.pow(e.distanceToSquared(d),v),m=Math.pow(d.distanceToSquared(f),v),x=Math.pow(f.distanceToSquared(n),v);m<1e-4&&(m=1),y<1e-4&&(y=m),x<1e-4&&(x=m),Nu.initNonuniformCatmullRom(e.x,d.x,f.x,n.x,y,m,x),Lu.initNonuniformCatmullRom(e.y,d.y,f.y,n.y,y,m,x),Vu.initNonuniformCatmullRom(e.z,d.z,f.z,n.z,y,m,x)}else"catmullrom"===this.curveType&&(Nu.initCatmullRom(e.x,d.x,f.x,n.x,this.tension),Lu.initCatmullRom(e.y,d.y,f.y,n.y,this.tension),Vu.initCatmullRom(e.z,d.z,f.z,n.z,this.tension));return r.set(Nu.calc(l),Lu.calc(l),Vu.calc(l)),r}},{key:"copy",value:function(source){_(e,"copy",this,3)([source]),this.points=[];for(var i=0,t=source.points.length;i<t;i++){var n=source.points[i];this.points.push(n.clone())}return this.closed=source.closed,this.curveType=source.curveType,this.tension=source.tension,this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);data.points=[];for(var i=0,t=this.points.length;i<t;i++){var n=this.points[i];data.points.push(n.toArray())}return data.closed=this.closed,data.curveType=this.curveType,data.tension=this.tension,data}},{key:"fromJSON",value:function(t){_(e,"fromJSON",this,3)([t]),this.points=[];for(var i=0,n=t.points.length;i<n;i++){var r=t.points[i];this.points.push((new cr).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}])}(Bu);function Uu(t,e,n,r,o){var h=.5*(r-e),c=.5*(o-n),l=t*t;return(2*n-2*r+h+c)*(t*l)+(-3*n+3*r-2*h-c)*l+h*t+n}function Du(t,e,n,r){return function(t,p){var e=1-t;return e*e*p}(t,e)+function(t,p){return 2*(1-t)*t*p}(t,n)+function(t,p){return t*t*p}(t,r)}function Hu(t,e,n,r,o){return function(t,p){var e=1-t;return e*e*e*p}(t,e)+function(t,p){var e=1-t;return 3*e*e*t*p}(t,n)+function(t,p){return 3*(1-t)*t*t*p}(t,r)+function(t,p){return t*t*t*p}(t,o)}var qu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jn,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new jn,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new jn;return Object(m.a)(this,e),(t=O(this,e)).isCubicBezierCurve=!0,t.type="CubicBezierCurve",t.v0=n,t.v1=r,t.v2=o,t.v3=h,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn,n=this.v0,r=this.v1,o=this.v2,h=this.v3;return e.set(Hu(t,n.x,r.x,o.x,h.x),Hu(t,n.y,r.y,o.y,h.y)),e}},{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this.v3.copy(source.v3),this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data.v3=this.v3.toArray(),data}},{key:"fromJSON",value:function(t){return _(e,"fromJSON",this,3)([t]),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}])}(Bu),Ju=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cr,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cr,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new cr,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new cr;return Object(m.a)(this,e),(t=O(this,e)).isCubicBezierCurve3=!0,t.type="CubicBezierCurve3",t.v0=n,t.v1=r,t.v2=o,t.v3=h,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cr,n=this.v0,r=this.v1,o=this.v2,h=this.v3;return e.set(Hu(t,n.x,r.x,o.x,h.x),Hu(t,n.y,r.y,o.y,h.y),Hu(t,n.z,r.z,o.z,h.z)),e}},{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this.v3.copy(source.v3),this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data.v3=this.v3.toArray(),data}},{key:"fromJSON",value:function(t){return _(e,"fromJSON",this,3)([t]),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}])}(Bu),Xu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jn,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn;return Object(m.a)(this,e),(t=O(this,e)).isLineCurve=!0,t.type="LineCurve",t.v1=n,t.v2=r,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}},{key:"getPointAt",value:function(u,t){return this.getPoint(u,t)}},{key:"getTangent",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(u,t){return this.getTangent(u,t)}},{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.v1.copy(source.v1),this.v2.copy(source.v2),this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);return data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}},{key:"fromJSON",value:function(t){return _(e,"fromJSON",this,3)([t]),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}])}(Bu),Yu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cr,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cr;return Object(m.a)(this,e),(t=O(this,e)).isLineCurve3=!0,t.type="LineCurve3",t.v1=n,t.v2=r,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cr;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}},{key:"getPointAt",value:function(u,t){return this.getPoint(u,t)}},{key:"getTangent",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cr).subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(u,t){return this.getTangent(u,t)}},{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.v1.copy(source.v1),this.v2.copy(source.v2),this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);return data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}},{key:"fromJSON",value:function(t){return _(e,"fromJSON",this,3)([t]),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}])}(Bu),Zu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jn,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new jn;return Object(m.a)(this,e),(t=O(this,e)).isQuadraticBezierCurve=!0,t.type="QuadraticBezierCurve",t.v0=n,t.v1=r,t.v2=o,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn,n=this.v0,r=this.v1,o=this.v2;return e.set(Du(t,n.x,r.x,o.x),Du(t,n.y,r.y,o.y)),e}},{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}},{key:"fromJSON",value:function(t){return _(e,"fromJSON",this,3)([t]),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}])}(Bu),Gu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cr,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cr,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new cr;return Object(m.a)(this,e),(t=O(this,e)).isQuadraticBezierCurve3=!0,t.type="QuadraticBezierCurve3",t.v0=n,t.v1=r,t.v2=o,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cr,n=this.v0,r=this.v1,o=this.v2;return e.set(Du(t,n.x,r.x,o.x),Du(t,n.y,r.y,o.y),Du(t,n.z,r.z,o.z)),e}},{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}},{key:"fromJSON",value:function(t){return _(e,"fromJSON",this,3)([t]),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}])}(Bu),Qu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(m.a)(this,e),(t=O(this,e)).isSplineCurve=!0,t.type="SplineCurve",t.points=n,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn,n=this.points,p=(n.length-1)*t,r=Math.floor(p),o=p-r,h=n[0===r?r:r-1],c=n[r],l=n[r>n.length-2?n.length-1:r+1],d=n[r>n.length-3?n.length-1:r+2];return e.set(Uu(o,h.x,c.x,l.x,d.x),Uu(o,h.y,c.y,l.y,d.y)),e}},{key:"copy",value:function(source){_(e,"copy",this,3)([source]),this.points=[];for(var i=0,t=source.points.length;i<t;i++){var n=source.points[i];this.points.push(n.clone())}return this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);data.points=[];for(var i=0,t=this.points.length;i<t;i++){var n=this.points[i];data.points.push(n.toArray())}return data}},{key:"fromJSON",value:function(t){_(e,"fromJSON",this,3)([t]),this.points=[];for(var i=0,n=t.points.length;i<n;i++){var r=t.points[i];this.points.push((new jn).fromArray(r))}return this}}])}(Bu),Ku=Object.freeze({__proto__:null,ArcCurve:Pu,CatmullRomCurve3:Wu,CubicBezierCurve:qu,CubicBezierCurve3:Ju,EllipseCurve:Ru,LineCurve:Xu,LineCurve3:Yu,QuadraticBezierCurve:Zu,QuadraticBezierCurve3:Gu,SplineCurve:Qu}),$u=function(t){function e(){var t;return Object(m.a)(this,e),(t=O(this,e)).type="CurvePath",t.curves=[],t.autoClose=!1,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"add",value:function(t){this.curves.push(t)}},{key:"closePath",value:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){var n=!0===t.isVector2?"LineCurve":"LineCurve3";this.curves.push(new Ku[n](e,t))}return this}},{key:"getPoint",value:function(t,e){for(var n=t*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var o=r[i]-n,h=this.curves[i],c=h.getLength(),u=0===c?0:1-o/c;return h.getPointAt(u,e)}i++}return null}},{key:"getLength",value:function(){var t=this.getCurveLengths();return t[t.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}},{key:"getSpacedPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}},{key:"getPoints",value:function(){for(var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],i=0,r=this.curves;i<r.length;i++)for(var o=r[i],h=o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(h),l=0;l<c.length;l++){var d=c[l];t&&t.equals(d)||(n.push(d),t=d)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(source){_(e,"copy",this,3)([source]),this.curves=[];for(var i=0,t=source.curves.length;i<t;i++){var n=source.curves[i];this.curves.push(n.clone())}return this.autoClose=source.autoClose,this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);data.autoClose=this.autoClose,data.curves=[];for(var i=0,t=this.curves.length;i<t;i++){var n=this.curves[i];data.curves.push(n.toJSON())}return data}},{key:"fromJSON",value:function(t){_(e,"fromJSON",this,3)([t]),this.autoClose=t.autoClose,this.curves=[];for(var i=0,n=t.curves.length;i<n;i++){var r=t.curves[i];this.curves.push((new Ku[r.type]).fromJSON(r))}return this}}])}(Bu),eh=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).type="Path",n.currentPoint=new jn,t&&n.setFromPoints(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"setFromPoints",value:function(t){this.moveTo(t[0].x,t[0].y);for(var i=1,e=t.length;i<e;i++)this.lineTo(t[i].x,t[i].y);return this}},{key:"moveTo",value:function(t,e){return this.currentPoint.set(t,e),this}},{key:"lineTo",value:function(t,e){var n=new Xu(this.currentPoint.clone(),new jn(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}},{key:"quadraticCurveTo",value:function(t,e,n,r){var o=new Zu(this.currentPoint.clone(),new jn(t,e),new jn(n,r));return this.curves.push(o),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(t,e,n,r,o,h){var c=new qu(this.currentPoint.clone(),new jn(t,e),new jn(n,r),new jn(o,h));return this.curves.push(c),this.currentPoint.set(o,h),this}},{key:"splineThru",value:function(t){var e=[this.currentPoint.clone()].concat(t),n=new Qu(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}},{key:"arc",value:function(t,e,n,r,o,h){var c=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(t+c,e+l,n,r,o,h),this}},{key:"absarc",value:function(t,e,n,r,o,h){return this.absellipse(t,e,n,n,r,o,h),this}},{key:"ellipse",value:function(t,e,n,r,o,h,c,l){var d=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(t+d,e+f,n,r,o,h,c,l),this}},{key:"absellipse",value:function(t,e,n,r,o,h,c,l){var d=new Ru(t,e,n,r,o,h,c,l);if(this.curves.length>0){var f=d.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(d);var v=d.getPoint(1);return this.currentPoint.copy(v),this}},{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.currentPoint.copy(source.currentPoint),this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);return data.currentPoint=this.currentPoint.toArray(),data}},{key:"fromJSON",value:function(t){return _(e,"fromJSON",this,3)([t]),this.currentPoint.fromArray(t.currentPoint),this}}])}($u),ih=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new jn(0,-.5),new jn(.5,0),new jn(0,.5)],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;Object(m.a)(this,e),(t=O(this,e)).type="LatheGeometry",t.parameters={points:n,segments:r,phiStart:o,phiLength:h},r=Math.floor(r),h=wn(h,0,2*Math.PI);for(var c=[],l=[],d=[],f=[],v=[],y=1/r,x=new cr,k=new jn,w=new cr,M=new cr,S=new cr,_=0,A=0,j=0;j<=n.length-1;j++)switch(j){case 0:_=n[j+1].x-n[j].x,A=n[j+1].y-n[j].y,w.x=1*A,w.y=-_,w.z=0*A,S.copy(w),w.normalize(),f.push(w.x,w.y,w.z);break;case n.length-1:f.push(S.x,S.y,S.z);break;default:_=n[j+1].x-n[j].x,A=n[j+1].y-n[j].y,w.x=1*A,w.y=-_,w.z=0*A,M.copy(w),w.x+=S.x,w.y+=S.y,w.z+=S.z,w.normalize(),f.push(w.x,w.y,w.z),S.copy(M)}for(var i=0;i<=r;i++)for(var T=o+i*y*h,z=Math.sin(T),C=Math.cos(T),I=0;I<=n.length-1;I++){x.x=n[I].x*z,x.y=n[I].y,x.z=n[I].x*C,l.push(x.x,x.y,x.z),k.x=i/r,k.y=I/(n.length-1),d.push(k.x,k.y);var B=f[3*I+0]*z,R=f[3*I+1],P=f[3*I+0]*C;v.push(B,R,P)}for(var E=0;E<r;E++)for(var F=0;F<n.length-1;F++){var base=F+E*n.length,a=base,b=base+n.length,N=base+n.length+1,L=base+1;c.push(a,b,L),c.push(N,L,b)}return t.setIndex(c),t.setAttribute("position",new ts(l,3)),t.setAttribute("uv",new ts(d,2)),t.setAttribute("normal",new ts(v,3)),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}}],[{key:"fromJSON",value:function(data){return new e(data.points,data.segments,data.phiStart,data.phiLength)}}])}(us),nh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;Object(m.a)(this,e);var path=new eh;return path.absarc(0,-r/2,n,1.5*Math.PI,0),path.absarc(0,r/2,n,0,.5*Math.PI),(t=O(this,e,[path.getPoints(o),h])).type="CapsuleGeometry",t.parameters={radius:n,length:r,capSegments:o,radialSegments:h},t}return Object(v.a)(e,t),Object(x.a)(e,null,[{key:"fromJSON",value:function(data){return new e(data.radius,data.length,data.capSegments,data.radialSegments)}}])}(ih),rh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;Object(m.a)(this,e),(t=O(this,e)).type="CircleGeometry",t.parameters={radius:n,segments:r,thetaStart:o,thetaLength:h},r=Math.max(3,r);var c=[],l=[],d=[],f=[],v=new cr,y=new jn;l.push(0,0,0),d.push(0,0,1),f.push(.5,.5);for(var s=0,i=3;s<=r;s++,i+=3){var x=o+s/r*h;v.x=n*Math.cos(x),v.y=n*Math.sin(x),l.push(v.x,v.y,v.z),d.push(0,0,1),y.x=(l[i]/n+1)/2,y.y=(l[i+1]/n+1)/2,f.push(y.x,y.y)}for(var k=1;k<=r;k++)c.push(k,k+1,0);return t.setIndex(c),t.setAttribute("position",new ts(l,3)),t.setAttribute("normal",new ts(d,3)),t.setAttribute("uv",new ts(f,2)),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}}],[{key:"fromJSON",value:function(data){return new e(data.radius,data.segments,data.thetaStart,data.thetaLength)}}])}(us),ah=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;Object(m.a)(this,e),(t=O(this,e)).type="CylinderGeometry",t.parameters={radiusTop:n,radiusBottom:r,height:o,radialSegments:h,heightSegments:c,openEnded:l,thetaStart:d,thetaLength:f};var v=t;h=Math.floor(h),c=Math.floor(c);var y=[],x=[],k=[],w=[],M=0,S=[],_=o/2,A=0;function j(t){for(var e=M,o=new jn,c=new cr,l=0,m=!0===t?n:r,S=!0===t?1:-1,O=1;O<=h;O++)x.push(0,_*S,0),k.push(0,S,0),w.push(.5,.5),M++;for(var j=M,T=0;T<=h;T++){var z=T/h*f+d,C=Math.cos(z),I=Math.sin(z);c.x=m*I,c.y=_*S,c.z=m*C,x.push(c.x,c.y,c.z),k.push(0,S,0),o.x=.5*C+.5,o.y=.5*I*S+.5,w.push(o.x,o.y),M++}for(var B=0;B<h;B++){var R=e+B,i=j+B;!0===t?y.push(i,i+1,R):y.push(i+1,i,R),l+=3}v.addGroup(A,l,!0===t?1:2),A+=l}return function(){for(var t=new cr,e=new cr,l=0,m=(r-n)/o,O=0;O<=c;O++){for(var j=[],T=O/c,z=T*(r-n)+n,C=0;C<=h;C++){var u=C/h,I=u*f+d,B=Math.sin(I),R=Math.cos(I);e.x=z*B,e.y=-T*o+_,e.z=z*R,x.push(e.x,e.y,e.z),t.set(B,m,R).normalize(),k.push(t.x,t.y,t.z),w.push(u,1-T),j.push(M++)}S.push(j)}for(var P=0;P<h;P++)for(var E=0;E<c;E++){var a=S[E][P],b=S[E+1][P],F=S[E+1][P+1],N=S[E][P+1];(n>0||0!==E)&&(y.push(a,b,N),l+=3),(r>0||E!==c-1)&&(y.push(b,F,N),l+=3)}v.addGroup(A,l,0),A+=l}(),!1===l&&(n>0&&j(!0),r>0&&j(!1)),t.setIndex(y),t.setAttribute("position",new ts(x,3)),t.setAttribute("normal",new ts(k,3)),t.setAttribute("uv",new ts(w,2)),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}}],[{key:"fromJSON",value:function(data){return new e(data.radiusTop,data.radiusBottom,data.height,data.radialSegments,data.heightSegments,data.openEnded,data.thetaStart,data.thetaLength)}}])}(us),sh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return Object(m.a)(this,e),(t=O(this,e,[0,n,r,o,h,c,l,d])).type="ConeGeometry",t.parameters={radius:n,height:r,radialSegments:o,heightSegments:h,openEnded:c,thetaStart:l,thetaLength:d},t}return Object(v.a)(e,t),Object(x.a)(e,null,[{key:"fromJSON",value:function(data){return new e(data.radius,data.height,data.radialSegments,data.heightSegments,data.openEnded,data.thetaStart,data.thetaLength)}}])}(ah),oh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(m.a)(this,e),(t=O(this,e)).type="PolyhedronGeometry",t.parameters={vertices:n,indices:r,radius:o,detail:h};var c=[],l=[];function d(a,b,t,e){for(var n=e+1,r=[],i=0;i<=n;i++){r[i]=[];for(var o=a.clone().lerp(t,i/n),h=b.clone().lerp(t,i/n),c=n-i,l=0;l<=c;l++)r[i][l]=0===l&&i===n?o:o.clone().lerp(h,l/c)}for(var d=0;d<n;d++)for(var v=0;v<2*(n-d)-1;v++){var y=Math.floor(v/2);v%2==0?(f(r[d][y+1]),f(r[d+1][y]),f(r[d][y])):(f(r[d][y+1]),f(r[d+1][y+1]),f(r[d+1][y]))}}function f(t){c.push(t.x,t.y,t.z)}function v(t,e){var r=3*t;e.x=n[r+0],e.y=n[r+1],e.z=n[r+2]}function y(t,e,n,r){r<0&&1===t.x&&(l[e]=t.x-1),0===n.x&&0===n.z&&(l[e]=r/2/Math.PI+.5)}function x(t){return Math.atan2(t.z,-t.x)}return function(t){for(var a=new cr,b=new cr,e=new cr,i=0;i<r.length;i+=3)v(r[i+0],a),v(r[i+1],b),v(r[i+2],e),d(a,b,e,t)}(h),function(t){for(var e=new cr,i=0;i<c.length;i+=3)e.x=c[i+0],e.y=c[i+1],e.z=c[i+2],e.normalize().multiplyScalar(t),c[i+0]=e.x,c[i+1]=e.y,c[i+2]=e.z}(o),function(){for(var t=new cr,i=0;i<c.length;i+=3){t.x=c[i+0],t.y=c[i+1],t.z=c[i+2];var u=x(t)/2/Math.PI+.5,e=(n=t,Math.atan2(-n.y,Math.sqrt(n.x*n.x+n.z*n.z))/Math.PI+.5);l.push(u,1-e)}var n;(function(){for(var a=new cr,b=new cr,t=new cr,e=new cr,n=new jn,r=new jn,o=new jn,i=0,h=0;i<c.length;i+=9,h+=6){a.set(c[i+0],c[i+1],c[i+2]),b.set(c[i+3],c[i+4],c[i+5]),t.set(c[i+6],c[i+7],c[i+8]),n.set(l[h+0],l[h+1]),r.set(l[h+2],l[h+3]),o.set(l[h+4],l[h+5]),e.copy(a).add(b).add(t).divideScalar(3);var d=x(e);y(n,h+0,a,d),y(r,h+2,b,d),y(o,h+4,t,d)}})(),function(){for(var i=0;i<l.length;i+=6){var t=l[i+0],e=l[i+2],n=l[i+4],r=Math.max(t,e,n),o=Math.min(t,e,n);r>.9&&o<.1&&(t<.2&&(l[i+0]+=1),e<.2&&(l[i+2]+=1),n<.2&&(l[i+4]+=1))}}()}(),t.setAttribute("position",new ts(c,3)),t.setAttribute("normal",new ts(c.slice(),3)),t.setAttribute("uv",new ts(l,2)),0===h?t.computeVertexNormals():t.normalizeNormals(),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}}],[{key:"fromJSON",value:function(data){return new e(data.vertices,data.indices,data.radius,data.details)}}])}(us),uh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(m.a)(this,e);var o=(1+Math.sqrt(5))/2,h=1/o;return(t=O(this,e,[[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-h,-o,0,-h,o,0,h,-o,0,h,o,-h,-o,0,-h,o,0,h,-o,0,h,o,0,-o,0,-h,o,0,-h,-o,0,h,o,0,h],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],n,r])).type="DodecahedronGeometry",t.parameters={radius:n,detail:r},t}return Object(v.a)(e,t),Object(x.a)(e,null,[{key:"fromJSON",value:function(data){return new e(data.radius,data.detail)}}])}(oh),hh=new cr,ch=new cr,lh=new cr,dh=new ja,fh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(Object(m.a)(this,e),(t=O(this,e)).type="EdgesGeometry",t.parameters={geometry:n,thresholdAngle:r},null!==n){for(var o=Math.pow(10,4),h=Math.cos(bn*r),c=n.getIndex(),l=n.getAttribute("position"),d=c?c.count:l.count,f=[0,0,0],v=["a","b","c"],y=new Array(3),x={},k=[],i=0;i<d;i+=3){c?(f[0]=c.getX(i),f[1]=c.getX(i+1),f[2]=c.getX(i+2)):(f[0]=i,f[1]=i+1,f[2]=i+2);var a=dh.a,b=dh.b,w=dh.c;if(a.fromBufferAttribute(l,f[0]),b.fromBufferAttribute(l,f[1]),w.fromBufferAttribute(l,f[2]),dh.getNormal(lh),y[0]="".concat(Math.round(a.x*o),",").concat(Math.round(a.y*o),",").concat(Math.round(a.z*o)),y[1]="".concat(Math.round(b.x*o),",").concat(Math.round(b.y*o),",").concat(Math.round(b.z*o)),y[2]="".concat(Math.round(w.x*o),",").concat(Math.round(w.y*o),",").concat(Math.round(w.z*o)),y[0]!==y[1]&&y[1]!==y[2]&&y[2]!==y[0])for(var M=0;M<3;M++){var S=(M+1)%3,_=y[M],A=y[S],j=dh[v[M]],T=dh[v[S]],z="".concat(_,"_").concat(A),C="".concat(A,"_").concat(_);C in x&&x[C]?(lh.dot(x[C].normal)<=h&&(k.push(j.x,j.y,j.z),k.push(T.x,T.y,T.z)),x[C]=null):z in x||(x[z]={index0:f[M],index1:f[S],normal:lh.clone()})}}for(var I in x)if(x[I]){var B=x[I],R=B.index0,P=B.index1;hh.fromBufferAttribute(l,R),ch.fromBufferAttribute(l,P),k.push(hh.x,hh.y,hh.z),k.push(ch.x,ch.y,ch.z)}t.setAttribute("position",new ts(k,3))}return t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}}])}(us),ph=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e,[t])).uuid=kn(),n.type="Shape",n.holes=[],n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"getPointsHoles",value:function(t){for(var e=[],i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e}},{key:"extractPoints",value:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}},{key:"copy",value:function(source){_(e,"copy",this,3)([source]),this.holes=[];for(var i=0,t=source.holes.length;i<t;i++){var n=source.holes[i];this.holes.push(n.clone())}return this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);data.uuid=this.uuid,data.holes=[];for(var i=0,t=this.holes.length;i<t;i++){var n=this.holes[i];data.holes.push(n.toJSON())}return data}},{key:"fromJSON",value:function(t){_(e,"fromJSON",this,3)([t]),this.uuid=t.uuid,this.holes=[];for(var i=0,n=t.holes.length;i<n;i++){var r=t.holes[i];this.holes.push((new eh).fromJSON(r))}return this}}])}(eh),vh=function(data,t){var e,n,r,o,h,c,l,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,f=t&&t.length,v=f?t[0]*d:data.length,y=yh(data,0,v,d,!0),m=[];if(!y||y.next===y.prev)return m;if(f&&(y=function(data,t,e,n){var i,r,o,h=[];for(i=0,r=t.length;i<r;i++)(o=yh(data,t[i]*n,i<r-1?t[i+1]*n:data.length,n,!1))===o.next&&(o.steiner=!0),h.push(Ah(o));for(h.sort(Mh),i=0;i<h.length;i++)e=Sh(h[i],e);return e}(data,t,y,d)),data.length>80*d){e=r=data[0],n=o=data[1];for(var i=d;i<v;i+=d)(h=data[i])<e&&(e=h),(c=data[i+1])<n&&(n=c),h>r&&(r=h),c>o&&(o=c);l=0!==(l=Math.max(r-e,o-n))?32767/l:0}return gh(y,m,d,e,n,l,0),m};function yh(data,t,e,n,r){var i,o;if(r===function(data,t,e,n){for(var r=0,i=t,o=e-n;i<e;i+=n)r+=(data[o]-data[i])*(data[i+1]+data[o+1]),o=i;return r}(data,t,e,n)>0)for(i=t;i<e;i+=n)o=Eh(i,data[i],data[i+1],o);else for(i=e-n;i>=t;i-=n)o=Eh(i,data[i],data[i+1],o);return o&&zh(o,o.next)&&(Fh(o),o=o.next),o}function mh(t,e){if(!t)return t;e||(e=t);var n,p=t;do{if(n=!1,p.steiner||!zh(p,p.next)&&0!==area(p.prev,p,p.next))p=p.next;else{if(Fh(p),(p=e=p.prev)===p.next)break;n=!0}}while(n||p!==e);return e}function gh(t,e,n,r,o,h,c){if(t){!c&&h&&function(t,e,n,r){var p=t;do{0===p.z&&(p.z=Oh(p.x,p.y,e,n,r)),p.prevZ=p.prev,p.nextZ=p.next,p=p.next}while(p!==t);p.prevZ.nextZ=null,p.prevZ=null,function(t){var i,p,q,e,n,r,o,h,c=1;do{for(p=t,t=null,n=null,r=0;p;){for(r++,q=p,o=0,i=0;i<c&&(o++,q=q.nextZ);i++);for(h=c;o>0||h>0&&q;)0!==o&&(0===h||!q||p.z<=q.z)?(e=p,p=p.nextZ,o--):(e=q,q=q.nextZ,h--),n?n.nextZ=e:t=e,e.prevZ=n,n=e;p=q}n.nextZ=null,c*=2}while(r>1)}(p)}(t,r,o,h);for(var l,d,f=t;t.prev!==t.next;)if(l=t.prev,d=t.next,h?xh(t,r,o,h):bh(t))e.push(l.i/n|0),e.push(t.i/n|0),e.push(d.i/n|0),Fh(t),t=d.next,f=d.next;else if((t=d)===f){c?1===c?gh(t=kh(mh(t),e,n),e,n,r,o,h,2):2===c&&wh(t,e,n,r,o,h):gh(mh(t),e,n,r,o,h,1);break}}}function bh(t){var a=t.prev,b=t,e=t.next;if(area(a,b,e)>=0)return!1;for(var n=a.x,r=b.x,o=e.x,h=a.y,c=b.y,l=e.y,d=n<r?n<o?n:o:r<o?r:o,f=h<c?h<l?h:l:c<l?c:l,v=n>r?n>o?n:o:r>o?r:o,y=h>c?h>l?h:l:c>l?c:l,p=e.next;p!==a;){if(p.x>=d&&p.x<=v&&p.y>=f&&p.y<=y&&jh(n,h,r,c,o,l,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function xh(t,e,n,r){var a=t.prev,b=t,o=t.next;if(area(a,b,o)>=0)return!1;for(var h=a.x,c=b.x,l=o.x,d=a.y,f=b.y,v=o.y,y=h<c?h<l?h:l:c<l?c:l,m=d<f?d<v?d:v:f<v?f:v,x=h>c?h>l?h:l:c>l?c:l,k=d>f?d>v?d:v:f>v?f:v,w=Oh(y,m,e,n,r),M=Oh(x,k,e,n,r),p=t.prevZ,S=t.nextZ;p&&p.z>=w&&S&&S.z<=M;){if(p.x>=y&&p.x<=x&&p.y>=m&&p.y<=k&&p!==a&&p!==o&&jh(h,d,c,f,l,v,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,S.x>=y&&S.x<=x&&S.y>=m&&S.y<=k&&S!==a&&S!==o&&jh(h,d,c,f,l,v,S.x,S.y)&&area(S.prev,S,S.next)>=0)return!1;S=S.nextZ}for(;p&&p.z>=w;){if(p.x>=y&&p.x<=x&&p.y>=m&&p.y<=k&&p!==a&&p!==o&&jh(h,d,c,f,l,v,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;S&&S.z<=M;){if(S.x>=y&&S.x<=x&&S.y>=m&&S.y<=k&&S!==a&&S!==o&&jh(h,d,c,f,l,v,S.x,S.y)&&area(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function kh(t,e,n){var p=t;do{var a=p.prev,b=p.next.next;!zh(a,b)&&Ch(a,p,p.next,b)&&Rh(a,b)&&Rh(b,a)&&(e.push(a.i/n|0),e.push(p.i/n|0),e.push(b.i/n|0),Fh(p),Fh(p.next),p=t=b),p=p.next}while(p!==t);return mh(p)}function wh(t,e,n,r,o,h){var a=t;do{for(var b=a.next.next;b!==a.prev;){if(a.i!==b.i&&Th(a,b)){var c=Ph(a,b);return a=mh(a,a.next),c=mh(c,c.next),gh(a,e,n,r,o,h,0),void gh(c,e,n,r,o,h,0)}b=b.next}a=a.next}while(a!==t)}function Mh(a,b){return a.x-b.x}function Sh(t,e){var n=function(t,e){var n,p=e,r=-1/0,o=t.x,h=t.y;do{if(h<=p.y&&h>=p.next.y&&p.next.y!==p.y){var c=p.x+(h-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(c<=o&&c>r&&(r=c,n=p.x<p.next.x?p:p.next,c===o))return n}p=p.next}while(p!==e);if(!n)return null;var l,d=n,f=n.x,v=n.y,y=1/0;p=n;do{o>=p.x&&p.x>=f&&o!==p.x&&jh(h<v?o:r,h,f,v,h<v?r:o,h,p.x,p.y)&&(l=Math.abs(h-p.y)/(o-p.x),Rh(p,t)&&(l<y||l===y&&(p.x>n.x||p.x===n.x&&_h(n,p)))&&(n=p,y=l)),p=p.next}while(p!==d);return n}(t,e);if(!n)return e;var r=Ph(n,t);return mh(r,r.next),mh(n,n.next)}function _h(t,p){return area(t.prev,t,p.prev)<0&&area(p.next,t,t.next)<0}function Oh(t,e,n,r,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ah(t){var p=t,e=t;do{(p.x<e.x||p.x===e.x&&p.y<e.y)&&(e=p),p=p.next}while(p!==t);return e}function jh(t,e,n,r,o,h,c,l){return(o-c)*(e-l)>=(t-c)*(h-l)&&(t-c)*(r-l)>=(n-c)*(e-l)&&(n-c)*(h-l)>=(o-c)*(r-l)}function Th(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!function(a,b){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==b.i&&p.next.i!==b.i&&Ch(p,p.next,a,b))return!0;p=p.next}while(p!==a);return!1}(a,b)&&(Rh(a,b)&&Rh(b,a)&&function(a,b){var p=a,t=!1,e=(a.x+b.x)/2,n=(a.y+b.y)/2;do{p.y>n!=p.next.y>n&&p.next.y!==p.y&&e<(p.next.x-p.x)*(n-p.y)/(p.next.y-p.y)+p.x&&(t=!t),p=p.next}while(p!==a);return t}(a,b)&&(area(a.prev,a,b.prev)||area(a,b.prev,b))||zh(a,b)&&area(a.prev,a,a.next)>0&&area(b.prev,b,b.next)>0)}function area(p,q,t){return(q.y-p.y)*(t.x-q.x)-(q.x-p.x)*(t.y-q.y)}function zh(t,e){return t.x===e.x&&t.y===e.y}function Ch(t,e,n,r){var o=Bh(area(t,e,n)),h=Bh(area(t,e,r)),c=Bh(area(n,r,t)),l=Bh(area(n,r,e));return o!==h&&c!==l||(!(0!==o||!Ih(t,n,e))||(!(0!==h||!Ih(t,r,e))||(!(0!==c||!Ih(n,t,r))||!(0!==l||!Ih(n,e,r)))))}function Ih(p,q,t){return q.x<=Math.max(p.x,t.x)&&q.x>=Math.min(p.x,t.x)&&q.y<=Math.max(p.y,t.y)&&q.y>=Math.min(p.y,t.y)}function Bh(t){return t>0?1:t<0?-1:0}function Rh(a,b){return area(a.prev,a,a.next)<0?area(a,b,a.next)>=0&&area(a,a.prev,b)>=0:area(a,b,a.prev)<0||area(a,a.next,b)<0}function Ph(a,b){var t=new Nh(a.i,a.x,a.y),e=new Nh(b.i,b.x,b.y),n=a.next,r=b.prev;return a.next=b,b.prev=a,t.next=n,n.prev=t,e.next=t,t.prev=e,r.next=e,e.prev=r,e}function Eh(i,t,e,n){var p=new Nh(i,t,e);return n?(p.next=n.next,p.prev=n,n.next.prev=p,n.next=p):(p.prev=p,p.next=p),p}function Fh(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function Nh(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Lh=function(){function t(){Object(m.a)(this,t)}return Object(x.a)(t,null,[{key:"area",value:function(t){for(var e=t.length,a=0,p=e-1,q=0;q<e;p=q++)a+=t[p].x*t[q].y-t[q].x*t[p].y;return.5*a}},{key:"isClockWise",value:function(e){return t.area(e)<0}},{key:"triangulateShape",value:function(t,e){var n=[],r=[],o=[];Vh(t),Wh(n,t);var h=t.length;e.forEach(Vh);for(var i=0;i<e.length;i++)r.push(h),h+=e[i].length,Wh(n,e[i]);for(var c=vh(n,r),l=0;l<c.length;l+=3)o.push(c.slice(l,l+3));return o}}])}();function Vh(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Wh(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}var Uh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ph([new jn(.5,.5),new jn(-.5,.5),new jn(-.5,-.5),new jn(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(m.a)(this,e),(t=O(this,e)).type="ExtrudeGeometry",t.parameters={shapes:n,options:r},n=Array.isArray(n)?n:[n];for(var o=t,h=[],c=[],i=0,l=n.length;i<l;i++){d(n[i])}function d(t){var e,n,l,d,f,v=[],y=void 0!==r.curveSegments?r.curveSegments:12,m=void 0!==r.steps?r.steps:1,x=void 0!==r.depth?r.depth:1,k=void 0===r.bevelEnabled||r.bevelEnabled,w=void 0!==r.bevelThickness?r.bevelThickness:.2,M=void 0!==r.bevelSize?r.bevelSize:w-.1,S=void 0!==r.bevelOffset?r.bevelOffset:0,_=void 0!==r.bevelSegments?r.bevelSegments:3,O=r.extrudePath,A=void 0!==r.UVGenerator?r.UVGenerator:Dh,j=!1;O&&(e=O.getSpacedPoints(m),j=!0,k=!1,n=O.computeFrenetFrames(m,!1),l=new cr,d=new cr,f=new cr),k||(_=0,w=0,M=0,S=0);var T=t.extractPoints(y),z=T.shape,C=T.holes;if(!Lh.isClockWise(z)){z=z.reverse();for(var I=0,B=C.length;I<B;I++){var R=C[I];Lh.isClockWise(R)&&(C[I]=R.reverse())}}for(var P=Lh.triangulateShape(z,C),E=z,F=0,N=C.length;F<N;F++){var L=C[F];z=z.concat(L)}function V(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().addScaledVector(e,n)}var W=z.length,U=P.length;function D(t,e,n){var r,o,h,c=t.x-e.x,l=t.y-e.y,d=n.x-t.x,f=n.y-t.y,v=c*c+l*l,y=c*f-l*d;if(Math.abs(y)>Number.EPSILON){var m=Math.sqrt(v),x=Math.sqrt(d*d+f*f),k=e.x-l/m,w=e.y+c/m,M=((n.x-f/x-k)*f-(n.y+d/x-w)*d)/(c*f-l*d),S=(r=k+c*M-t.x)*r+(o=w+l*M-t.y)*o;if(S<=2)return new jn(r,o);h=Math.sqrt(S/2)}else{var _=!1;c>Number.EPSILON?d>Number.EPSILON&&(_=!0):c<-Number.EPSILON?d<-Number.EPSILON&&(_=!0):Math.sign(l)===Math.sign(f)&&(_=!0),_?(r=-l,o=c,h=Math.sqrt(v)):(r=c,o=l,h=Math.sqrt(v/2))}return new jn(r/h,o/h)}for(var H=[],J=0,X=E.length,Y=X-1,Z=J+1;J<X;J++,Y++,Z++)Y===X&&(Y=0),Z===X&&(Z=0),H[J]=D(E[J],E[Y],E[Z]);for(var G,Q=[],K=H.concat(),$=0,tt=C.length;$<tt;$++){var et=C[$];G=[];for(var it=0,nt=et.length,at=nt-1,st=it+1;it<nt;it++,at++,st++)at===nt&&(at=0),st===nt&&(st=0),G[it]=D(et[it],et[at],et[st]);Q.push(G),K=K.concat(G)}for(var b=0;b<_;b++){for(var ot=b/_,ut=w*Math.cos(ot*Math.PI/2),ht=M*Math.sin(ot*Math.PI/2)+S,ct=0,lt=E.length;ct<lt;ct++){var ft=V(E[ct],H[ct],ht);Lt(ft.x,ft.y,-ut)}for(var pt=0,vt=C.length;pt<vt;pt++){var yt=C[pt];G=Q[pt];for(var mt=0,gt=yt.length;mt<gt;mt++){var bt=V(yt[mt],G[mt],ht);Lt(bt.x,bt.y,-ut)}}}for(var xt=M+S,kt=0;kt<W;kt++){var wt=k?V(z[kt],K[kt],xt):z[kt];j?(d.copy(n.normals[0]).multiplyScalar(wt.x),l.copy(n.binormals[0]).multiplyScalar(wt.y),f.copy(e[0]).add(d).add(l),Lt(f.x,f.y,f.z)):Lt(wt.x,wt.y,0)}for(var s=1;s<=m;s++)for(var Mt=0;Mt<W;Mt++){var St=k?V(z[Mt],K[Mt],xt):z[Mt];j?(d.copy(n.normals[s]).multiplyScalar(St.x),l.copy(n.binormals[s]).multiplyScalar(St.y),f.copy(e[s]).add(d).add(l),Lt(f.x,f.y,f.z)):Lt(St.x,St.y,x/m*s)}for(var _t=_-1;_t>=0;_t--){for(var Ot=_t/_,At=w*Math.cos(Ot*Math.PI/2),jt=M*Math.sin(Ot*Math.PI/2)+S,Tt=0,zt=E.length;Tt<zt;Tt++){var Ct=V(E[Tt],H[Tt],jt);Lt(Ct.x,Ct.y,x+At)}for(var It=0,Bt=C.length;It<Bt;It++){var Rt=C[It];G=Q[It];for(var Pt=0,Et=Rt.length;Pt<Et;Pt++){var Ft=V(Rt[Pt],G[Pt],jt);j?Lt(Ft.x,Ft.y+e[m-1].y,e[m-1].x+At):Lt(Ft.x,Ft.y,x+At)}}}function Nt(t,e){for(var i=t.length;--i>=0;){var n=i,r=i-1;r<0&&(r=t.length-1);for(var o=0,h=m+2*_;o<h;o++){var c=W*o,l=W*(o+1);Wt(e+n+c,e+r+c,e+r+l,e+n+l)}}}function Lt(t,e,n){v.push(t),v.push(e),v.push(n)}function Vt(a,b,t){Ut(a),Ut(b),Ut(t);var e=h.length/3,n=A.generateTopUV(o,h,e-3,e-2,e-1);Dt(n[0]),Dt(n[1]),Dt(n[2])}function Wt(a,b,t,e){Ut(a),Ut(b),Ut(e),Ut(b),Ut(t),Ut(e);var n=h.length/3,r=A.generateSideWallUV(o,h,n-6,n-3,n-2,n-1);Dt(r[0]),Dt(r[1]),Dt(r[3]),Dt(r[1]),Dt(r[2]),Dt(r[3])}function Ut(t){h.push(v[3*t+0]),h.push(v[3*t+1]),h.push(v[3*t+2])}function Dt(t){c.push(t.x),c.push(t.y)}!function(){var t=h.length/3;if(k){for(var e=0,n=W*e,r=0;r<U;r++){var c=P[r];Vt(c[2]+n,c[1]+n,c[0]+n)}n=W*(e=m+2*_);for(var l=0;l<U;l++){var d=P[l];Vt(d[0]+n,d[1]+n,d[2]+n)}}else{for(var f=0;f<U;f++){var v=P[f];Vt(v[2],v[1],v[0])}for(var y=0;y<U;y++){var x=P[y];Vt(x[0]+W*m,x[1]+W*m,x[2]+W*m)}}o.addGroup(t,h.length/3-t,0)}(),function(){var t=h.length/3,e=0;Nt(E,e),e+=E.length;for(var n=0,r=C.length;n<r;n++){var c=C[n];Nt(c,e),e+=c.length}o.addGroup(t,h.length/3-t,1)}()}return t.setAttribute("position",new ts(h,3)),t.setAttribute("uv",new ts(c,2)),t.computeVertexNormals(),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);return function(t,e,data){if(data.shapes=[],Array.isArray(t))for(var i=0,n=t.length;i<n;i++){var r=t[i];data.shapes.push(r.uuid)}else data.shapes.push(t.uuid);data.options=Object.assign({},e),void 0!==e.extrudePath&&(data.options.extrudePath=e.extrudePath.toJSON());return data}(this.parameters.shapes,this.parameters.options,data)}}],[{key:"fromJSON",value:function(data,t){for(var n=[],r=0,o=data.shapes.length;r<o;r++){var h=t[data.shapes[r]];n.push(h)}var c=data.options.extrudePath;return void 0!==c&&(data.options.extrudePath=(new Ku[c.type]).fromJSON(c)),new e(n,data.options)}}])}(us),Dh={generateTopUV:function(t,e,n,r,o){var h=e[3*n],c=e[3*n+1],l=e[3*r],d=e[3*r+1],f=e[3*o],v=e[3*o+1];return[new jn(h,c),new jn(l,d),new jn(f,v)]},generateSideWallUV:function(t,e,n,r,o,h){var c=e[3*n],l=e[3*n+1],d=e[3*n+2],f=e[3*r],v=e[3*r+1],y=e[3*r+2],m=e[3*o],x=e[3*o+1],k=e[3*o+2],w=e[3*h],M=e[3*h+1],S=e[3*h+2];return Math.abs(l-v)<Math.abs(c-f)?[new jn(c,1-d),new jn(f,1-y),new jn(m,1-k),new jn(w,1-S)]:[new jn(l,1-d),new jn(v,1-y),new jn(x,1-k),new jn(M,1-S)]}};var Hh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(m.a)(this,e);var o=(1+Math.sqrt(5))/2;return(t=O(this,e,[[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],n,r])).type="IcosahedronGeometry",t.parameters={radius:n,detail:r},t}return Object(v.a)(e,t),Object(x.a)(e,null,[{key:"fromJSON",value:function(data){return new e(data.radius,data.detail)}}])}(oh),qh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(m.a)(this,e);return(t=O(this,e,[[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],n,r])).type="OctahedronGeometry",t.parameters={radius:n,detail:r},t}return Object(v.a)(e,t),Object(x.a)(e,null,[{key:"fromJSON",value:function(data){return new e(data.radius,data.detail)}}])}(oh),Jh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(m.a)(this,e),(t=O(this,e)).type="PlaneGeometry",t.parameters={width:n,height:r,widthSegments:o,heightSegments:h};for(var c=n/2,l=r/2,d=Math.floor(o),f=Math.floor(h),v=d+1,y=f+1,x=n/d,k=r/f,w=[],M=[],S=[],_=[],A=0;A<y;A++)for(var j=A*k-l,T=0;T<v;T++){var z=T*x-c;M.push(z,-j,0),S.push(0,0,1),_.push(T/d),_.push(1-A/f)}for(var C=0;C<f;C++)for(var I=0;I<d;I++){var a=I+v*C,b=I+v*(C+1),B=I+1+v*(C+1),R=I+1+v*C;w.push(a,b,R),w.push(b,B,R)}return t.setIndex(w),t.setAttribute("position",new ts(M,3)),t.setAttribute("normal",new ts(S,3)),t.setAttribute("uv",new ts(_,2)),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}}],[{key:"fromJSON",value:function(data){return new e(data.width,data.height,data.widthSegments,data.heightSegments)}}])}(us),Xh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;Object(m.a)(this,e),(t=O(this,e)).type="RingGeometry",t.parameters={innerRadius:n,outerRadius:r,thetaSegments:o,phiSegments:h,thetaStart:c,thetaLength:l},o=Math.max(3,o);for(var d=[],f=[],v=[],y=[],x=n,k=(r-n)/(h=Math.max(1,h)),w=new cr,M=new jn,S=0;S<=h;S++){for(var i=0;i<=o;i++){var _=c+i/o*l;w.x=x*Math.cos(_),w.y=x*Math.sin(_),f.push(w.x,w.y,w.z),v.push(0,0,1),M.x=(w.x/r+1)/2,M.y=(w.y/r+1)/2,y.push(M.x,M.y)}x+=k}for(var A=0;A<h;A++)for(var j=A*(o+1),T=0;T<o;T++){var z=T+j,a=z,b=z+o+1,C=z+o+2,I=z+1;d.push(a,b,I),d.push(b,C,I)}return t.setIndex(d),t.setAttribute("position",new ts(f,3)),t.setAttribute("normal",new ts(v,3)),t.setAttribute("uv",new ts(y,2)),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}}],[{key:"fromJSON",value:function(data){return new e(data.innerRadius,data.outerRadius,data.thetaSegments,data.phiSegments,data.thetaStart,data.thetaLength)}}])}(us),Yh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ph([new jn(0,.5),new jn(-.5,-.5),new jn(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;Object(m.a)(this,e),(t=O(this,e)).type="ShapeGeometry",t.parameters={shapes:n,curveSegments:r};var o=[],h=[],c=[],l=[],d=0,f=0;if(!1===Array.isArray(n))v(n);else for(var i=0;i<n.length;i++)v(n[i]),t.addGroup(d,f,i),d+=f,f=0;function v(t){var e=h.length/3,n=t.extractPoints(r),d=n.shape,v=n.holes;!1===Lh.isClockWise(d)&&(d=d.reverse());for(var y=0,m=v.length;y<m;y++){var x=v[y];!0===Lh.isClockWise(x)&&(v[y]=x.reverse())}for(var k=Lh.triangulateShape(d,v),w=0,M=v.length;w<M;w++){var S=v[w];d=d.concat(S)}for(var _=0,O=d.length;_<O;_++){var A=d[_];h.push(A.x,A.y,0),c.push(0,0,1),l.push(A.x,A.y)}for(var j=0,T=k.length;j<T;j++){var z=k[j],a=z[0]+e,b=z[1]+e,C=z[2]+e;o.push(a,b,C),f+=3}}return t.setIndex(o),t.setAttribute("position",new ts(h,3)),t.setAttribute("normal",new ts(c,3)),t.setAttribute("uv",new ts(l,2)),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);return function(t,data){if(data.shapes=[],Array.isArray(t))for(var i=0,e=t.length;i<e;i++){var n=t[i];data.shapes.push(n.uuid)}else data.shapes.push(t.uuid);return data}(this.parameters.shapes,data)}}],[{key:"fromJSON",value:function(data,t){for(var n=[],r=0,o=data.shapes.length;r<o;r++){var h=t[data.shapes[r]];n.push(h)}return new e(n,data.curveSegments)}}])}(us);var Zh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;Object(m.a)(this,e),(t=O(this,e)).type="SphereGeometry",t.parameters={radius:n,widthSegments:r,heightSegments:o,phiStart:h,phiLength:c,thetaStart:l,thetaLength:d},r=Math.max(3,Math.floor(r)),o=Math.max(2,Math.floor(o));for(var f=Math.min(l+d,Math.PI),v=0,y=[],x=new cr,k=new cr,w=[],M=[],S=[],_=[],A=0;A<=o;A++){var j=[],T=A/o,z=0;0===A&&0===l?z=.5/r:A===o&&f===Math.PI&&(z=-.5/r);for(var C=0;C<=r;C++){var u=C/r;x.x=-n*Math.cos(h+u*c)*Math.sin(l+T*d),x.y=n*Math.cos(l+T*d),x.z=n*Math.sin(h+u*c)*Math.sin(l+T*d),M.push(x.x,x.y,x.z),k.copy(x).normalize(),S.push(k.x,k.y,k.z),_.push(u+z,1-T),j.push(v++)}y.push(j)}for(var I=0;I<o;I++)for(var B=0;B<r;B++){var a=y[I][B+1],b=y[I][B],R=y[I+1][B],P=y[I+1][B+1];(0!==I||l>0)&&w.push(a,b,P),(I!==o-1||f<Math.PI)&&w.push(b,R,P)}return t.setIndex(w),t.setAttribute("position",new ts(M,3)),t.setAttribute("normal",new ts(S,3)),t.setAttribute("uv",new ts(_,2)),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}}],[{key:"fromJSON",value:function(data){return new e(data.radius,data.widthSegments,data.heightSegments,data.phiStart,data.phiLength,data.thetaStart,data.thetaLength)}}])}(us),Gh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(m.a)(this,e);return(t=O(this,e,[[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],n,r])).type="TetrahedronGeometry",t.parameters={radius:n,detail:r},t}return Object(v.a)(e,t),Object(x.a)(e,null,[{key:"fromJSON",value:function(data){return new e(data.radius,data.detail)}}])}(oh),Qh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;Object(m.a)(this,e),(t=O(this,e)).type="TorusGeometry",t.parameters={radius:n,tube:r,radialSegments:o,tubularSegments:h,arc:c},o=Math.floor(o),h=Math.floor(h);for(var l=[],d=[],f=[],v=[],y=new cr,x=new cr,k=new cr,w=0;w<=o;w++)for(var i=0;i<=h;i++){var u=i/h*c,M=w/o*Math.PI*2;x.x=(n+r*Math.cos(M))*Math.cos(u),x.y=(n+r*Math.cos(M))*Math.sin(u),x.z=r*Math.sin(M),d.push(x.x,x.y,x.z),y.x=n*Math.cos(u),y.y=n*Math.sin(u),k.subVectors(x,y).normalize(),f.push(k.x,k.y,k.z),v.push(i/h),v.push(w/o)}for(var S=1;S<=o;S++)for(var _=1;_<=h;_++){var a=(h+1)*S+_-1,b=(h+1)*(S-1)+_-1,A=(h+1)*(S-1)+_,j=(h+1)*S+_;l.push(a,b,j),l.push(b,A,j)}return t.setIndex(l),t.setAttribute("position",new ts(d,3)),t.setAttribute("normal",new ts(f,3)),t.setAttribute("uv",new ts(v,2)),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}}],[{key:"fromJSON",value:function(data){return new e(data.radius,data.tube,data.radialSegments,data.tubularSegments,data.arc)}}])}(us),Kh=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,q=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;Object(m.a)(this,e),(t=O(this,e)).type="TorusKnotGeometry",t.parameters={radius:n,tube:r,tubularSegments:o,radialSegments:h,p:p,q:q},o=Math.floor(o),h=Math.floor(h);for(var c=[],l=[],d=[],f=[],v=new cr,y=new cr,x=new cr,k=new cr,w=new cr,M=new cr,S=new cr,i=0;i<=o;++i){var u=i/o*p*Math.PI*2;R(u,p,q,n,x),R(u+.01,p,q,n,k),M.subVectors(k,x),S.addVectors(k,x),w.crossVectors(M,S),S.crossVectors(w,M),w.normalize(),S.normalize();for(var _=0;_<=h;++_){var A=_/h*Math.PI*2,j=-r*Math.cos(A),T=r*Math.sin(A);v.x=x.x+(j*S.x+T*w.x),v.y=x.y+(j*S.y+T*w.y),v.z=x.z+(j*S.z+T*w.z),l.push(v.x,v.y,v.z),y.subVectors(v,x).normalize(),d.push(y.x,y.y,y.z),f.push(i/o),f.push(_/h)}}for(var z=1;z<=o;z++)for(var C=1;C<=h;C++){var a=(h+1)*(z-1)+(C-1),b=(h+1)*z+(C-1),I=(h+1)*z+C,B=(h+1)*(z-1)+C;c.push(a,b,B),c.push(b,I,B)}function R(u,p,q,t,e){var n=Math.cos(u),r=Math.sin(u),o=q/p*u,h=Math.cos(o);e.x=t*(2+h)*.5*n,e.y=t*(2+h)*r*.5,e.z=t*Math.sin(o)*.5}return t.setIndex(c),t.setAttribute("position",new ts(l,3)),t.setAttribute("normal",new ts(d,3)),t.setAttribute("uv",new ts(f,2)),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}}],[{key:"fromJSON",value:function(data){return new e(data.radius,data.tube,data.tubularSegments,data.radialSegments,data.p,data.q)}}])}(us),$h=function(t){function e(){var t,path=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gu(new cr(-1,-1,0),new cr(-1,1,0),new cr(1,1,0)),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,h=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(m.a)(this,e),(t=O(this,e)).type="TubeGeometry",t.parameters={path:path,tubularSegments:n,radius:r,radialSegments:o,closed:h};var c=path.computeFrenetFrames(n,h);t.tangents=c.tangents,t.normals=c.normals,t.binormals=c.binormals;var l=new cr,d=new cr,f=new jn,v=new cr,y=[],x=[],k=[],w=[];function M(i){v=path.getPointAt(i/n,v);for(var t=c.normals[i],e=c.binormals[i],h=0;h<=o;h++){var f=h/o*Math.PI*2,m=Math.sin(f),k=-Math.cos(f);d.x=k*t.x+m*e.x,d.y=k*t.y+m*e.y,d.z=k*t.z+m*e.z,d.normalize(),x.push(d.x,d.y,d.z),l.x=v.x+r*d.x,l.y=v.y+r*d.y,l.z=v.z+r*d.z,y.push(l.x,l.y,l.z)}}return function(){for(var i=0;i<n;i++)M(i);M(!1===h?n:0),function(){for(var i=0;i<=n;i++)for(var t=0;t<=o;t++)f.x=i/n,f.y=t/o,k.push(f.x,f.y)}(),function(){for(var t=1;t<=n;t++)for(var i=1;i<=o;i++){var a=(o+1)*(t-1)+(i-1),b=(o+1)*t+(i-1),e=(o+1)*t+i,r=(o+1)*(t-1)+i;w.push(a,b,r),w.push(b,e,r)}}()}(),t.setIndex(w),t.setAttribute("position",new ts(y,3)),t.setAttribute("normal",new ts(x,3)),t.setAttribute("uv",new ts(k,2)),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);return data.path=this.parameters.path.toJSON(),data}}],[{key:"fromJSON",value:function(data){return new e((new Ku[data.path.type]).fromJSON(data.path),data.tubularSegments,data.radius,data.radialSegments,data.closed)}}])}(us),tc=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Object(m.a)(this,e),(t=O(this,e)).type="WireframeGeometry",t.parameters={geometry:n},null!==n){var r=[],o=new Set,h=new cr,c=new cr;if(null!==n.index){var l=n.attributes.position,d=n.index,f=n.groups;0===f.length&&(f=[{start:0,count:d.count,materialIndex:0}]);for(var v=0,ol=f.length;v<ol;++v)for(var y=f[v],x=y.start,i=x,k=x+y.count;i<k;i+=3)for(var w=0;w<3;w++){var M=d.getX(i+w),S=d.getX(i+(w+1)%3);h.fromBufferAttribute(l,M),c.fromBufferAttribute(l,S),!0===ec(h,c,o)&&(r.push(h.x,h.y,h.z),r.push(c.x,c.y,c.z))}}else for(var _=n.attributes.position,A=0,j=_.count/3;A<j;A++)for(var T=0;T<3;T++){var z=3*A+T,C=3*A+(T+1)%3;h.fromBufferAttribute(_,z),c.fromBufferAttribute(_,C),!0===ec(h,c,o)&&(r.push(h.x,h.y,h.z),r.push(c.x,c.y,c.z))}t.setAttribute("position",new ts(r,3))}return t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.parameters=Object.assign({},source.parameters),this}}])}(us);function ec(t,e,n){var r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z),o="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z);return!0!==n.has(r)&&!0!==n.has(o)&&(n.add(r),n.add(o),!0)}var ic=Object.freeze({__proto__:null,BoxGeometry:ws,CapsuleGeometry:nh,CircleGeometry:rh,ConeGeometry:sh,CylinderGeometry:ah,DodecahedronGeometry:uh,EdgesGeometry:fh,ExtrudeGeometry:Uh,IcosahedronGeometry:Hh,LatheGeometry:ih,OctahedronGeometry:qh,PlaneGeometry:Jh,PolyhedronGeometry:oh,RingGeometry:Xh,ShapeGeometry:Yh,SphereGeometry:Zh,TetrahedronGeometry:Gh,TorusGeometry:Qh,TorusKnotGeometry:Kh,TubeGeometry:$h,WireframeGeometry:tc}),nc=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isShadowMaterial=!0,n.type="ShadowMaterial",n.color=new Ba(0),n.transparent=!0,n.fog=!0,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.color.copy(source.color),this.fog=source.fog,this}}])}(Ea),rc=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e,[t])).isRawShaderMaterial=!0,n.type="RawShaderMaterial",n}return Object(v.a)(e,t),Object(x.a)(e)}(js),ac=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isMeshStandardMaterial=!0,n.type="MeshStandardMaterial",n.defines={STANDARD:""},n.color=new Ba(16777215),n.roughness=1,n.metalness=0,n.map=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.emissive=new Ba(0),n.emissiveIntensity=1,n.emissiveMap=null,n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=_i,n.normalScale=new jn(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.roughnessMap=null,n.metalnessMap=null,n.alphaMap=null,n.envMap=null,n.envMapRotation=new Qr,n.envMapIntensity=1,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.flatShading=!1,n.fog=!0,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.defines={STANDARD:""},this.color.copy(source.color),this.roughness=source.roughness,this.metalness=source.metalness,this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.roughnessMap=source.roughnessMap,this.metalnessMap=source.metalnessMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.envMapRotation.copy(source.envMapRotation),this.envMapIntensity=source.envMapIntensity,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.flatShading=source.flatShading,this.fog=source.fog,this}}])}(Ea),sc=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isMeshPhysicalMaterial=!0,n.defines={STANDARD:"",PHYSICAL:""},n.type="MeshPhysicalMaterial",n.anisotropyRotation=0,n.anisotropyMap=null,n.clearcoatMap=null,n.clearcoatRoughness=0,n.clearcoatRoughnessMap=null,n.clearcoatNormalScale=new jn(1,1),n.clearcoatNormalMap=null,n.ior=1.5,Object.defineProperty(n,"reflectivity",{get:function(){return wn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),n.iridescenceMap=null,n.iridescenceIOR=1.3,n.iridescenceThicknessRange=[100,400],n.iridescenceThicknessMap=null,n.sheenColor=new Ba(0),n.sheenColorMap=null,n.sheenRoughness=1,n.sheenRoughnessMap=null,n.transmissionMap=null,n.thickness=0,n.thicknessMap=null,n.attenuationDistance=1/0,n.attenuationColor=new Ba(1,1,1),n.specularIntensity=1,n.specularIntensityMap=null,n.specularColor=new Ba(1,1,1),n.specularColorMap=null,n._anisotropy=0,n._clearcoat=0,n._dispersion=0,n._iridescence=0,n._sheen=0,n._transmission=0,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"anisotropy",get:function(){return this._anisotropy},set:function(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}},{key:"iridescence",get:function(){return this._iridescence},set:function(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}},{key:"dispersion",get:function(){return this._dispersion},set:function(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}},{key:"sheen",get:function(){return this._sheen},set:function(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}},{key:"transmission",get:function(){return this._transmission},set:function(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}},{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=source.anisotropy,this.anisotropyRotation=source.anisotropyRotation,this.anisotropyMap=source.anisotropyMap,this.clearcoat=source.clearcoat,this.clearcoatMap=source.clearcoatMap,this.clearcoatRoughness=source.clearcoatRoughness,this.clearcoatRoughnessMap=source.clearcoatRoughnessMap,this.clearcoatNormalMap=source.clearcoatNormalMap,this.clearcoatNormalScale.copy(source.clearcoatNormalScale),this.dispersion=source.dispersion,this.ior=source.ior,this.iridescence=source.iridescence,this.iridescenceMap=source.iridescenceMap,this.iridescenceIOR=source.iridescenceIOR,this.iridescenceThicknessRange=Object(l.a)(source.iridescenceThicknessRange),this.iridescenceThicknessMap=source.iridescenceThicknessMap,this.sheen=source.sheen,this.sheenColor.copy(source.sheenColor),this.sheenColorMap=source.sheenColorMap,this.sheenRoughness=source.sheenRoughness,this.sheenRoughnessMap=source.sheenRoughnessMap,this.transmission=source.transmission,this.transmissionMap=source.transmissionMap,this.thickness=source.thickness,this.thicknessMap=source.thicknessMap,this.attenuationDistance=source.attenuationDistance,this.attenuationColor.copy(source.attenuationColor),this.specularIntensity=source.specularIntensity,this.specularIntensityMap=source.specularIntensityMap,this.specularColor.copy(source.specularColor),this.specularColorMap=source.specularColorMap,this}}])}(ac),oc=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isMeshPhongMaterial=!0,n.type="MeshPhongMaterial",n.color=new Ba(16777215),n.specular=new Ba(1118481),n.shininess=30,n.map=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.emissive=new Ba(0),n.emissiveIntensity=1,n.emissiveMap=null,n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=_i,n.normalScale=new jn(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=null,n.alphaMap=null,n.envMap=null,n.envMapRotation=new Qr,n.combine=_t,n.reflectivity=1,n.refractionRatio=.98,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.flatShading=!1,n.fog=!0,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.color.copy(source.color),this.specular.copy(source.specular),this.shininess=source.shininess,this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.envMapRotation.copy(source.envMapRotation),this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.flatShading=source.flatShading,this.fog=source.fog,this}}])}(Ea),uc=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isMeshToonMaterial=!0,n.defines={TOON:""},n.type="MeshToonMaterial",n.color=new Ba(16777215),n.map=null,n.gradientMap=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.emissive=new Ba(0),n.emissiveIntensity=1,n.emissiveMap=null,n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=_i,n.normalScale=new jn(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.alphaMap=null,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.fog=!0,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.color.copy(source.color),this.map=source.map,this.gradientMap=source.gradientMap,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.alphaMap=source.alphaMap,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.fog=source.fog,this}}])}(Ea),hc=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isMeshNormalMaterial=!0,n.type="MeshNormalMaterial",n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=_i,n.normalScale=new jn(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.wireframe=!1,n.wireframeLinewidth=1,n.flatShading=!1,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.flatShading=source.flatShading,this}}])}(Ea),cc=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isMeshLambertMaterial=!0,n.type="MeshLambertMaterial",n.color=new Ba(16777215),n.map=null,n.lightMap=null,n.lightMapIntensity=1,n.aoMap=null,n.aoMapIntensity=1,n.emissive=new Ba(0),n.emissiveIntensity=1,n.emissiveMap=null,n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=_i,n.normalScale=new jn(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.specularMap=null,n.alphaMap=null,n.envMap=null,n.envMapRotation=new Qr,n.combine=_t,n.reflectivity=1,n.refractionRatio=.98,n.wireframe=!1,n.wireframeLinewidth=1,n.wireframeLinecap="round",n.wireframeLinejoin="round",n.flatShading=!1,n.fog=!0,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.color.copy(source.color),this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.envMapRotation.copy(source.envMapRotation),this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.flatShading=source.flatShading,this.fog=source.fog,this}}])}(Ea),lc=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isMeshDepthMaterial=!0,n.type="MeshDepthMaterial",n.depthPacking=ki,n.map=null,n.alphaMap=null,n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.wireframe=!1,n.wireframeLinewidth=1,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.depthPacking=source.depthPacking,this.map=source.map,this.alphaMap=source.alphaMap,this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this}}])}(Ea),dc=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isMeshDistanceMaterial=!0,n.type="MeshDistanceMaterial",n.map=null,n.alphaMap=null,n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.map=source.map,this.alphaMap=source.alphaMap,this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this}}])}(Ea),fc=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isMeshMatcapMaterial=!0,n.defines={MATCAP:""},n.type="MeshMatcapMaterial",n.color=new Ba(16777215),n.matcap=null,n.map=null,n.bumpMap=null,n.bumpScale=1,n.normalMap=null,n.normalMapType=_i,n.normalScale=new jn(1,1),n.displacementMap=null,n.displacementScale=1,n.displacementBias=0,n.alphaMap=null,n.flatShading=!1,n.fog=!0,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.defines={MATCAP:""},this.color.copy(source.color),this.matcap=source.matcap,this.map=source.map,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.alphaMap=source.alphaMap,this.flatShading=source.flatShading,this.fog=source.fog,this}}])}(Ea),pc=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).isLineDashedMaterial=!0,n.type="LineDashedMaterial",n.scale=1,n.dashSize=3,n.gapSize=1,n.setValues(t),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.scale=source.scale,this.dashSize=source.dashSize,this.gapSize=source.gapSize,this}}])}(ru);function vc(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function yc(object){return ArrayBuffer.isView(object)&&!(object instanceof DataView)}function mc(t){for(var e=t.length,n=new Array(e),i=0;i!==e;++i)n[i]=i;return n.sort((function(i,e){return t[i]-t[e]})),n}function gc(t,e,n){for(var r=t.length,o=new t.constructor(r),i=0,h=0;h!==r;++i)for(var c=n[i]*e,l=0;l!==e;++l)o[h++]=t[c+l];return o}function bc(t,e,n,r){for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var h=o[r];if(void 0!==h)if(Array.isArray(h))do{void 0!==(h=o[r])&&(e.push(o.time),n.push.apply(n,h)),o=t[i++]}while(void 0!==o);else if(void 0!==h.toArray)do{void 0!==(h=o[r])&&(e.push(o.time),h.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{void 0!==(h=o[r])&&(e.push(o.time),n.push(h)),o=t[i++]}while(void 0!==o)}}var xc={convertArray:vc,isTypedArray:yc,getKeyframeOrder:mc,sortedArray:gc,flattenJSON:bc,subclip:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,h=t.clone();h.name=e;for(var c=[],i=0;i<h.tracks.length;++i){for(var track=h.tracks[i],l=track.getValueSize(),d=[],f=[],v=0;v<track.times.length;++v){var y=track.times[v]*o;if(!(y<n||y>=r)){d.push(track.times[v]);for(var m=0;m<l;++m)f.push(track.values[v*l+m])}}0!==d.length&&(track.times=vc(d,track.times.constructor),track.values=vc(f,track.values.constructor),c.push(track))}h.tracks=c;for(var x=1/0,k=0;k<h.tracks.length;++k)x>h.tracks[k].times[0]&&(x=h.tracks[k].times[0]);for(var w=0;w<h.tracks.length;++w)h.tracks[w].shift(-1*x);return h.resetDuration(),h},makeClipAdditive:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var o=n.tracks.length,h=e/r,c=function(){var e=n.tracks[i],r=e.ValueTypeName;if("bool"===r||"string"===r)return 0;var o=t.tracks.find((function(track){return track.name===e.name&&track.ValueTypeName===r}));if(void 0===o)return 0;var c=0,l=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=l/3);var d=0,f=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);var v,y=e.times.length-1;if(h<=e.times[0]){var m=c,x=l-c;v=e.values.slice(m,x)}else if(h>=e.times[y]){var k=y*l+c,w=k+l-c;v=e.values.slice(k,w)}else{var M=e.createInterpolant(),S=c,_=l-c;M.evaluate(h),v=M.resultBuffer.slice(S,_)}"quaternion"===r&&(new ur).fromArray(v).normalize().conjugate().toArray(v);for(var O=o.times.length,A=0;A<O;++A){var j=A*f+d;if("quaternion"===r)ur.multiplyQuaternionsFlat(o.values,j,v,0,o.values,j);else for(var T=f-2*d,z=0;z<T;++z)o.values[j+z]-=v[z]}},i=0;i<o;++i)c();return t.blendMode=mi,t}},kc=function(){return Object(x.a)((function t(e,n,r,o){Object(m.a)(this,t),this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==o?o:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}),[{key:"evaluate",value:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],o=e[n-1];t:{e:{var h;i:{n:if(!(t<r)){for(var c=n+2;;){if(void 0===r){if(t<o)break n;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(o=r,t<(r=e[++n]))break e}h=e.length;break i}if(t>=o)break t;var l=e[1];t<l&&(n=2,o=l);for(var d=n-2;;){if(void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(n===d)break;if(r=o,t>=(o=e[--n-1]))break e}h=n,n=0}for(;n<h;){var f=n+h>>>1;t<e[f]?h=f:n=f+1}if(r=e[n],void 0===(o=e[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,t,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=t*r,i=0;i!==r;++i)e[i]=n[o+i];return e}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}])}(),wc=function(t){function e(t,n,r,o){var h;return Object(m.a)(this,e),(h=O(this,e,[t,n,r,o]))._weightPrev=-0,h._offsetPrev=-0,h._weightNext=-0,h._offsetNext=-0,h.DefaultSettings_={endingStart:fi,endingEnd:fi},h}return Object(v.a)(e,t),Object(x.a)(e,[{key:"intervalChanged_",value:function(t,e,n){var r=this.parameterPositions,o=t-2,h=t+1,c=r[o],l=r[h];if(void 0===c)switch(this.getSettings_().endingStart){case pi:o=t,c=2*e-n;break;case vi:c=e+r[o=r.length-2]-r[o+1];break;default:o=t,c=n}if(void 0===l)switch(this.getSettings_().endingEnd){case pi:h=t,l=2*n-e;break;case vi:h=1,l=n+r[1]-r[0];break;default:h=t-1,l=e}var d=.5*(n-e),f=this.valueSize;this._weightPrev=d/(e-c),this._weightNext=d/(l-n),this._offsetPrev=o*f,this._offsetNext=h*f}},{key:"interpolate_",value:function(t,e,n,r){for(var o=this.resultBuffer,h=this.sampleValues,c=this.valueSize,l=t*c,d=l-c,f=this._offsetPrev,v=this._offsetNext,y=this._weightPrev,m=this._weightNext,p=(n-e)/(r-e),x=p*p,k=x*p,w=-y*k+2*y*x-y*p,M=(1+y)*k+(-1.5-2*y)*x+(-.5+y)*p+1,S=(-1-m)*k+(1.5+m)*x+.5*p,_=m*k-m*x,i=0;i!==c;++i)o[i]=w*h[f+i]+M*h[d+i]+S*h[l+i]+_*h[v+i];return o}}])}(kc),Mc=function(t){function e(t,n,r,o){return Object(m.a)(this,e),O(this,e,[t,n,r,o])}return Object(v.a)(e,t),Object(x.a)(e,[{key:"interpolate_",value:function(t,e,n,r){for(var o=this.resultBuffer,h=this.sampleValues,c=this.valueSize,l=t*c,d=l-c,f=(n-e)/(r-e),v=1-f,i=0;i!==c;++i)o[i]=h[d+i]*v+h[l+i]*f;return o}}])}(kc),Sc=function(t){function e(t,n,r,o){return Object(m.a)(this,e),O(this,e,[t,n,r,o])}return Object(v.a)(e,t),Object(x.a)(e,[{key:"interpolate_",value:function(t){return this.copySampleValue_(t-1)}}])}(kc),_c=function(){return Object(x.a)((function t(e,n,r,o){if(Object(m.a)(this,t),void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=vc(n,this.TimeBufferType),this.values=vc(r,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}),[{key:"InterpolantFactoryMethodDiscrete",value:function(t){return new Sc(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodLinear",value:function(t){return new Mc(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodSmooth",value:function(t){return new wc(this.times,this.values,this.getValueSize(),t)}},{key:"setInterpolation",value:function(t){var e;switch(t){case hi:e=this.InterpolantFactoryMethodDiscrete;break;case ci:e=this.InterpolantFactoryMethodLinear;break;case di:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return hi;case this.InterpolantFactoryMethodLinear:return ci;case this.InterpolantFactoryMethodSmooth:return di}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this}},{key:"scale",value:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this}},{key:"trim",value:function(t,e){for(var n=this.times,r=n.length,o=0,h=r-1;o!==r&&n[o]<t;)++o;for(;-1!==h&&n[h]>e;)--h;if(++h,0!==o||h!==r){o>=h&&(o=(h=Math.max(h,1))-1);var c=this.getValueSize();this.times=n.slice(o,h),this.values=this.values.slice(o*c,h*c)}return this}},{key:"validate",value:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,o=n.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var h=null,i=0;i!==o;i++){var c=n[i];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,i,c),t=!1;break}if(null!==h&&h>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,i,c,h),t=!1;break}h=c}if(void 0!==r&&yc(r))for(var l=0,d=r.length;l!==d;++l){var f=r[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),t=!1;break}}return t}},{key:"optimize",value:function(){for(var t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===di,o=t.length-1,h=1,i=1;i<o;++i){var c=!1,time=t[i];if(time!==t[i+1]&&(1!==i||time!==t[0]))if(r)c=!0;else for(var l=i*n,d=l-n,f=l+n,v=0;v!==n;++v){var y=e[l+v];if(y!==e[d+v]||y!==e[f+v]){c=!0;break}}if(c){if(i!==h){t[h]=t[i];for(var m=i*n,x=h*n,k=0;k!==n;++k)e[x+k]=e[m+k]}++h}}if(o>0){t[h]=t[o];for(var w=o*n,M=h*n,S=0;S!==n;++S)e[M+S]=e[w+S];++h}return h!==t.length?(this.times=t.slice(0,h),this.values=e.slice(0,h*n)):(this.times=t,this.values=e),this}},{key:"clone",value:function(){var t=this.times.slice(),e=this.values.slice(),track=new(0,this.constructor)(this.name,t,e);return track.createInterpolant=this.createInterpolant,track}}],[{key:"toJSON",value:function(track){var t,e=track.constructor;if(e.toJSON!==this.toJSON)t=e.toJSON(track);else{t={name:track.name,times:vc(track.times,Array),values:vc(track.values,Array)};var n=track.getInterpolation();n!==track.DefaultInterpolation&&(t.interpolation=n)}return t.type=track.ValueTypeName,t}}])}();_c.prototype.TimeBufferType=Float32Array,_c.prototype.ValueBufferType=Float32Array,_c.prototype.DefaultInterpolation=ci;var Oc=function(t){function e(t,n,r){return Object(m.a)(this,e),O(this,e,[t,n,r])}return Object(v.a)(e,t),Object(x.a)(e)}(_c);Oc.prototype.ValueTypeName="bool",Oc.prototype.ValueBufferType=Array,Oc.prototype.DefaultInterpolation=hi,Oc.prototype.InterpolantFactoryMethodLinear=void 0,Oc.prototype.InterpolantFactoryMethodSmooth=void 0;var Ac=function(t){function e(){return Object(m.a)(this,e),O(this,e,arguments)}return Object(v.a)(e,t),Object(x.a)(e)}(_c);Ac.prototype.ValueTypeName="color";var jc=function(t){function e(){return Object(m.a)(this,e),O(this,e,arguments)}return Object(v.a)(e,t),Object(x.a)(e)}(_c);jc.prototype.ValueTypeName="number";var Tc=function(t){function e(t,n,r,o){return Object(m.a)(this,e),O(this,e,[t,n,r,o])}return Object(v.a)(e,t),Object(x.a)(e,[{key:"interpolate_",value:function(t,e,n,r){for(var o=this.resultBuffer,h=this.sampleValues,c=this.valueSize,l=(n-e)/(r-e),d=t*c,f=d+c;d!==f;d+=4)ur.slerpFlat(o,0,h,d-c,h,d,l);return o}}])}(kc),zc=function(t){function e(){return Object(m.a)(this,e),O(this,e,arguments)}return Object(v.a)(e,t),Object(x.a)(e,[{key:"InterpolantFactoryMethodLinear",value:function(t){return new Tc(this.times,this.values,this.getValueSize(),t)}}])}(_c);zc.prototype.ValueTypeName="quaternion",zc.prototype.InterpolantFactoryMethodSmooth=void 0;var Cc=function(t){function e(t,n,r){return Object(m.a)(this,e),O(this,e,[t,n,r])}return Object(v.a)(e,t),Object(x.a)(e)}(_c);Cc.prototype.ValueTypeName="string",Cc.prototype.ValueBufferType=Array,Cc.prototype.DefaultInterpolation=hi,Cc.prototype.InterpolantFactoryMethodLinear=void 0,Cc.prototype.InterpolantFactoryMethodSmooth=void 0;var Ic=function(t){function e(){return Object(m.a)(this,e),O(this,e,arguments)}return Object(v.a)(e,t),Object(x.a)(e)}(_c);Ic.prototype.ValueTypeName="vector";var Bc=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yi;Object(m.a)(this,t),this.name=e,this.tracks=r,this.duration=n,this.blendMode=o,this.uuid=kn(),this.duration<0&&this.resetDuration()}),[{key:"resetDuration",value:function(){for(var t=0,i=0,e=this.tracks.length;i!==e;++i){var track=this.tracks[i];t=Math.max(t,track.times[track.times.length-1])}return this.duration=t,this}},{key:"trim",value:function(){for(var i=0;i<this.tracks.length;i++)this.tracks[i].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var t=!0,i=0;i<this.tracks.length;i++)t=t&&this.tracks[i].validate();return t}},{key:"optimize",value:function(){for(var i=0;i<this.tracks.length;i++)this.tracks[i].optimize();return this}},{key:"clone",value:function(){for(var t=[],i=0;i<this.tracks.length;i++)t.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,o=n.length;i!==o;++i)e.push(Rc(n[i]).scale(r));var h=new this(t.name,t.duration,e,t.blendMode);return h.uuid=t.uuid,h}},{key:"toJSON",value:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},i=0,o=n.length;i!==o;++i)e.push(_c.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(t,e,n,r){for(var o=e.length,h=[],i=0;i<o;i++){var c=[],l=[];c.push((i+o-1)%o,i,(i+1)%o),l.push(0,1,0);var d=mc(c);c=gc(c,1,d),l=gc(l,1,d),r||0!==c[0]||(c.push(o),l.push(l[0])),h.push(new jc(".morphTargetInfluences["+e[i].name+"]",c,l).scale(1/n))}return new this(t,-1,h)}},{key:"findByName",value:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(t,e,n){for(var r={},pattern=/^([\w-]*?)([\d]+)$/,i=0,o=t.length;i<o;i++){var h=t[i],c=h.name.match(pattern);if(c&&c.length>1){var l=c[1],d=r[l];d||(r[l]=d=[]),d.push(h)}}var f=[];for(var v in r)f.push(this.CreateFromMorphTargetSequence(v,r[v],e,n));return f}},{key:"parseAnimation",value:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,r,o){if(0!==n.length){var h=[],c=[];bc(n,h,c,r),0!==h.length&&o.push(new t(e,h,c))}},r=[],o=t.name||"default",h=t.fps||30,c=t.blendMode,l=t.length||-1,d=t.hierarchy||[],f=0;f<d.length;f++){var v=d[f].keys;if(v&&0!==v.length)if(v[0].morphTargets){var y={},m=void 0;for(m=0;m<v.length;m++)if(v[m].morphTargets)for(var x=0;x<v[m].morphTargets.length;x++)y[v[m].morphTargets[x]]=-1;for(var k in y){for(var w=[],M=[],S=0;S!==v[m].morphTargets.length;++S){var _=v[m];w.push(_.time),M.push(_.morphTarget===k?1:0)}r.push(new jc(".morphTargetInfluence["+k+"]",w,M))}l=y.length*h}else{var O=".bones["+e[f].name+"]";n(Ic,O+".position",v,"pos",r),n(zc,O+".quaternion",v,"rot",r),n(Ic,O+".scale",v,"scl",r)}}return 0===r.length?null:new this(o,l,r,c)}}])}();function Rc(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return jc;case"vector":case"vector2":case"vector3":case"vector4":return Ic;case"color":return Ac;case"quaternion":return zc;case"bool":case"boolean":return Oc;case"string":return Cc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],r=[];bc(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}var Pc={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Ec=Object(x.a)((function t(e,n,r){Object(m.a)(this,t);var o=this,h=!1,c=0,l=0,d=void 0,f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(t){l++,!1===h&&void 0!==o.onStart&&o.onStart(t,c,l),h=!0},this.itemEnd=function(t){c++,void 0!==o.onProgress&&o.onProgress(t,c,l),c===l&&(h=!1,void 0!==o.onLoad&&o.onLoad())},this.itemError=function(t){void 0!==o.onError&&o.onError(t)},this.resolveURL=function(t){return d?d(t):t},this.setURLModifier=function(t){return d=t,this},this.addHandler=function(t,e){return f.push(t,e),this},this.removeHandler=function(t){var e=f.indexOf(t);return-1!==e&&f.splice(e,2),this},this.getHandler=function(t){for(var i=0,e=f.length;i<e;i+=2){var n=f[i],r=f[i+1];if(n.global&&(n.lastIndex=0),n.test(t))return r}return null}})),Fc=new Ec,Nc=function(){return Object(x.a)((function t(e){Object(m.a)(this,t),this.manager=void 0!==e?e:Fc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}),[{key:"load",value:function(){}},{key:"loadAsync",value:function(t,e){var n=this;return new Promise((function(r,o){n.load(t,r,e,o)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(t){return this.crossOrigin=t,this}},{key:"setWithCredentials",value:function(t){return this.withCredentials=t,this}},{key:"setPath",value:function(path){return this.path=path,this}},{key:"setResourcePath",value:function(t){return this.resourcePath=t,this}},{key:"setRequestHeader",value:function(t){return this.requestHeader=t,this}}])}();Nc.DEFAULT_MATERIAL_NAME="__DEFAULT";var Lc,Vc={},Wc=function(t){function e(t,n){var r;return Object(m.a)(this,e),(r=O(this,e,[t])).response=n,r}return Object(v.a)(e,t),Object(x.a)(e)}(Object(o.a)(Error)),Uc=function(t){function e(t){return Object(m.a)(this,e),O(this,e,[t])}return Object(v.a)(e,t),Object(x.a)(e,[{key:"load",value:function(t,e,n,r){var o=this;void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var h=Pc.get(t);if(void 0!==h)return this.manager.itemStart(t),setTimeout((function(){e&&e(h),o.manager.itemEnd(t)}),0),h;if(void 0===Vc[t]){Vc[t]=[],Vc[t].push({onLoad:e,onProgress:n,onError:r});var c=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,d=this.responseType;fetch(c).then((function(e){if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;var n=Vc[t],r=e.body.getReader(),o=e.headers.get("X-File-Size")||e.headers.get("Content-Length"),h=o?parseInt(o):0,c=0!==h,l=0,d=new ReadableStream({start:function(t){!function e(){r.read().then((function(r){var o=r.done,d=r.value;if(o)t.close();else{l+=d.byteLength;for(var f=new ProgressEvent("progress",{lengthComputable:c,loaded:l,total:h}),i=0,v=n.length;i<v;i++){var y=n[i];y.onProgress&&y.onProgress(f)}t.enqueue(d),e()}}),(function(e){t.error(e)}))}()}});return new Response(d)}throw new Wc('fetch for "'.concat(e.url,'" responded with ').concat(e.status,": ").concat(e.statusText),e)})).then((function(t){switch(d){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((function(text){return(new DOMParser).parseFromString(text,l)}));case"json":return t.json();default:if(void 0===l)return t.text();var e=/charset="?([^;"\s]*)"?/i.exec(l),label=e&&e[1]?e[1].toLowerCase():void 0,n=new TextDecoder(label);return t.arrayBuffer().then((function(t){return n.decode(t)}))}})).then((function(data){Pc.add(t,data);var e=Vc[t];delete Vc[t];for(var i=0,n=e.length;i<n;i++){var r=e[i];r.onLoad&&r.onLoad(data)}})).catch((function(e){var n=Vc[t];if(void 0===n)throw o.manager.itemError(t),e;delete Vc[t];for(var i=0,r=n.length;i<r;i++){var h=n[i];h.onError&&h.onError(e)}o.manager.itemError(t)})).finally((function(){o.manager.itemEnd(t)})),this.manager.itemStart(t)}else Vc[t].push({onLoad:e,onProgress:n,onError:r})}},{key:"setResponseType",value:function(t){return this.responseType=t,this}},{key:"setMimeType",value:function(t){return this.mimeType=t,this}}])}(Nc),Dc=function(t){function e(t){return Object(m.a)(this,e),O(this,e,[t])}return Object(v.a)(e,t),Object(x.a)(e,[{key:"load",value:function(t,e,n,r){var o=this,h=new Uc(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(t,(function(text){try{e(o.parse(JSON.parse(text)))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),n,r)}},{key:"parse",value:function(t){for(var e=[],i=0;i<t.length;i++){var n=Bc.parse(t[i]);e.push(n)}return e}}])}(Nc),Hc=function(t){function e(t){return Object(m.a)(this,e),O(this,e,[t])}return Object(v.a)(e,t),Object(x.a)(e,[{key:"load",value:function(t,e,n,r){var o=this,h=[],c=new ju,l=new Uc(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);var d=0;function f(i){l.load(t[i],(function(t){var n=o.parse(t,!0);h[i]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(d+=1)&&(1===n.mipmapCount&&(c.minFilter=Kt),c.image=h,c.format=n.format,c.needsUpdate=!0,e&&e(c))}),n,r)}if(Array.isArray(t))for(var i=0,v=t.length;i<v;++i)f(i);else l.load(t,(function(t){var n=o.parse(t,!0);if(n.isCubemap){for(var r=n.mipmaps.length/n.mipmapCount,l=0;l<r;l++){h[l]={mipmaps:[]};for(var d=0;d<n.mipmapCount;d++)h[l].mipmaps.push(n.mipmaps[l*n.mipmapCount+d]),h[l].format=n.format,h[l].width=n.width,h[l].height=n.height}c.image=h}else c.image.width=n.width,c.image.height=n.height,c.mipmaps=n.mipmaps;1===n.mipmapCount&&(c.minFilter=Kt),c.format=n.format,c.needsUpdate=!0,e&&e(c)}),n,r);return c}}])}(Nc),qc=function(t){function e(t){return Object(m.a)(this,e),O(this,e,[t])}return Object(v.a)(e,t),Object(x.a)(e,[{key:"load",value:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,h=Pc.get(t);if(void 0!==h)return o.manager.itemStart(t),setTimeout((function(){e&&e(h),o.manager.itemEnd(t)}),0),h;var image=Rn("img");function c(){d(),Pc.add(t,this),e&&e(this),o.manager.itemEnd(t)}function l(e){d(),r&&r(e),o.manager.itemError(t),o.manager.itemEnd(t)}function d(){image.removeEventListener("load",c,!1),image.removeEventListener("error",l,!1)}return image.addEventListener("load",c,!1),image.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(image.crossOrigin=this.crossOrigin),o.manager.itemStart(t),image.src=t,image}}])}(Nc),Jc=function(t){function e(t){return Object(m.a)(this,e),O(this,e,[t])}return Object(v.a)(e,t),Object(x.a)(e,[{key:"load",value:function(t,e,n,r){var o=new Es;o.colorSpace=ji;var h=new qc(this.manager);h.setCrossOrigin(this.crossOrigin),h.setPath(this.path);var c=0;function l(i){h.load(t[i],(function(image){o.images[i]=image,6===++c&&(o.needsUpdate=!0,e&&e(o))}),void 0,r)}for(var i=0;i<t.length;++i)l(i);return o}}])}(Nc),Xc=function(t){function e(t){return Object(m.a)(this,e),O(this,e,[t])}return Object(v.a)(e,t),Object(x.a)(e,[{key:"load",value:function(t,e,n,r){var o=this,h=new xo,c=new Uc(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(o.withCredentials),c.load(t,(function(t){var n;try{n=o.parse(t)}catch(t){if(void 0===r)return void console.error(t);r(t)}void 0!==n.image?h.image=n.image:void 0!==n.data&&(h.image.width=n.width,h.image.height=n.height,h.image.data=n.data),h.wrapS=void 0!==n.wrapS?n.wrapS:qt,h.wrapT=void 0!==n.wrapT?n.wrapT:qt,h.magFilter=void 0!==n.magFilter?n.magFilter:Kt,h.minFilter=void 0!==n.minFilter?n.minFilter:Kt,h.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(h.colorSpace=n.colorSpace),void 0!==n.flipY&&(h.flipY=n.flipY),void 0!==n.format&&(h.format=n.format),void 0!==n.type&&(h.type=n.type),void 0!==n.mipmaps&&(h.mipmaps=n.mipmaps,h.minFilter=ee),1===n.mipmapCount&&(h.minFilter=Kt),void 0!==n.generateMipmaps&&(h.generateMipmaps=n.generateMipmaps),h.needsUpdate=!0,e&&e(h,n)}),n,r),h}}])}(Nc),Yc=function(t){function e(t){return Object(m.a)(this,e),O(this,e,[t])}return Object(v.a)(e,t),Object(x.a)(e,[{key:"load",value:function(t,e,n,r){var o=new $n,h=new qc(this.manager);return h.setCrossOrigin(this.crossOrigin),h.setPath(this.path),h.load(t,(function(image){o.image=image,o.needsUpdate=!0,void 0!==e&&e(o)}),n,r),o}}])}(Nc),Zc=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(m.a)(this,e),(n=O(this,e)).isLight=!0,n.type="Light",n.color=new Ba(t),n.intensity=r,n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"dispose",value:function(){}},{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),this.color.copy(source.color),this.intensity=source.intensity,this}},{key:"toJSON",value:function(meta){var data=_(e,"toJSON",this,3)([meta]);return data.object.color=this.color.getHex(),data.object.intensity=this.intensity,void 0!==this.groundColor&&(data.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(data.object.distance=this.distance),void 0!==this.angle&&(data.object.angle=this.angle),void 0!==this.decay&&(data.object.decay=this.decay),void 0!==this.penumbra&&(data.object.penumbra=this.penumbra),void 0!==this.shadow&&(data.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(data.object.target=this.target.uuid),data}}])}(pa),Gc=function(t){function e(t,n,r){var o;return Object(m.a)(this,e),(o=O(this,e,[t,r])).isHemisphereLight=!0,o.type="HemisphereLight",o.position.copy(pa.DEFAULT_UP),o.updateMatrix(),o.groundColor=new Ba(n),o}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),this.groundColor.copy(source.groundColor),this}}])}(Zc),Qc=new Wr,Kc=new cr,$c=new cr,tl=function(){return Object(x.a)((function t(e){Object(m.a)(this,t),this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new jn(512,512),this.map=null,this.mapPass=null,this.matrix=new Wr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Lo,this._frameExtents=new jn(1,1),this._viewportCount=1,this._viewports=[new er(0,0,1,1)]}),[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(t){var e=this.camera,n=this.matrix;Kc.setFromMatrixPosition(t.matrixWorld),e.position.copy(Kc),$c.setFromMatrixPosition(t.target.matrixWorld),e.lookAt($c),e.updateMatrixWorld(),Qc.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Qc),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Qc)}},{key:"getViewport",value:function(t){return this._viewports[t]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(source){return this.camera=source.camera.clone(),this.intensity=source.intensity,this.bias=source.bias,this.radius=source.radius,this.mapSize.copy(source.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var object={};return 1!==this.intensity&&(object.intensity=this.intensity),0!==this.bias&&(object.bias=this.bias),0!==this.normalBias&&(object.normalBias=this.normalBias),1!==this.radius&&(object.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(object.mapSize=this.mapSize.toArray()),object.camera=this.camera.toJSON(!1).object,delete object.camera.matrix,object}}])}(),el=function(t){function e(){var t;return Object(m.a)(this,e),(t=O(this,e,[new Bs(50,1,.5,500)])).isSpotLightShadow=!0,t.focus=1,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"updateMatrices",value:function(t){var n=this.camera,r=2*xn*t.angle*this.focus,o=this.mapSize.width/this.mapSize.height,h=t.distance||n.far;r===n.fov&&o===n.aspect&&h===n.far||(n.fov=r,n.aspect=o,n.far=h,n.updateProjectionMatrix()),_(e,"updateMatrices",this,3)([t])}},{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.focus=source.focus,this}}])}(tl),il=function(t){function e(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return Object(m.a)(this,e),(r=O(this,e,[t,n])).isSpotLight=!0,r.type="SpotLight",r.position.copy(pa.DEFAULT_UP),r.updateMatrix(),r.target=new pa,r.distance=o,r.angle=h,r.penumbra=c,r.decay=l,r.map=null,r.shadow=new el,r}return Object(v.a)(e,t),Object(x.a)(e,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),this.distance=source.distance,this.angle=source.angle,this.penumbra=source.penumbra,this.decay=source.decay,this.target=source.target.clone(),this.shadow=source.shadow.clone(),this}}])}(Zc),nl=new Wr,rl=new cr,al=new cr,sl=function(t){function e(){var t;return Object(m.a)(this,e),(t=O(this,e,[new Bs(90,1,.5,500)])).isPointLightShadow=!0,t._frameExtents=new jn(4,2),t._viewportCount=6,t._viewports=[new er(2,1,1,1),new er(0,1,1,1),new er(3,1,1,1),new er(1,1,1,1),new er(3,0,1,1),new er(1,0,1,1)],t._cubeDirections=[new cr(1,0,0),new cr(-1,0,0),new cr(0,0,1),new cr(0,0,-1),new cr(0,1,0),new cr(0,-1,0)],t._cubeUps=[new cr(0,1,0),new cr(0,1,0),new cr(0,1,0),new cr(0,1,0),new cr(0,0,1),new cr(0,0,-1)],t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"updateMatrices",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,o=t.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),rl.setFromMatrixPosition(t.matrixWorld),n.position.copy(rl),al.copy(n.position),al.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(al),n.updateMatrixWorld(),r.makeTranslation(-rl.x,-rl.y,-rl.z),nl.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nl)}}])}(tl),hl=function(t){function e(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return Object(m.a)(this,e),(r=O(this,e,[t,n])).isPointLight=!0,r.type="PointLight",r.distance=o,r.decay=h,r.shadow=new sl,r}return Object(v.a)(e,t),Object(x.a)(e,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),this.distance=source.distance,this.decay=source.decay,this.shadow=source.shadow.clone(),this}}])}(Zc),cl=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return Object(m.a)(this,e),(t=O(this,e)).isOrthographicCamera=!0,t.type="OrthographicCamera",t.zoom=1,t.view=null,t.left=n,t.right=r,t.top=o,t.bottom=h,t.near=c,t.far=l,t.updateProjectionMatrix(),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),this.left=source.left,this.right=source.right,this.top=source.top,this.bottom=source.bottom,this.near=source.near,this.far=source.far,this.zoom=source.zoom,this.view=null===source.view?null:Object.assign({},source.view),this}},{key:"setViewOffset",value:function(t,e,n,r,o,h){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=h,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=n-t,h=n+t,c=r+e,l=r-e;if(null!==this.view&&this.view.enabled){var d=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h=(o+=d*this.view.offsetX)+d*this.view.width,l=(c-=f*this.view.offsetY)-f*this.view.height}this.projectionMatrix.makeOrthographic(o,h,c,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(meta){var data=_(e,"toJSON",this,3)([meta]);return data.object.zoom=this.zoom,data.object.left=this.left,data.object.right=this.right,data.object.top=this.top,data.object.bottom=this.bottom,data.object.near=this.near,data.object.far=this.far,null!==this.view&&(data.object.view=Object.assign({},this.view)),data}}])}(Ts),ll=function(t){function e(){var t;return Object(m.a)(this,e),(t=O(this,e,[new cl(-5,5,5,-5,.5,500)])).isDirectionalLightShadow=!0,t}return Object(v.a)(e,t),Object(x.a)(e)}(tl),fl=function(t){function e(t,n){var r;return Object(m.a)(this,e),(r=O(this,e,[t,n])).isDirectionalLight=!0,r.type="DirectionalLight",r.position.copy(pa.DEFAULT_UP),r.updateMatrix(),r.target=new pa,r.shadow=new ll,r}return Object(v.a)(e,t),Object(x.a)(e,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.target=source.target.clone(),this.shadow=source.shadow.clone(),this}}])}(Zc),pl=function(t){function e(t,n){var r;return Object(m.a)(this,e),(r=O(this,e,[t,n])).isAmbientLight=!0,r.type="AmbientLight",r}return Object(v.a)(e,t),Object(x.a)(e)}(Zc),vl=function(t){function e(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return Object(m.a)(this,e),(r=O(this,e,[t,n])).isRectAreaLight=!0,r.type="RectAreaLight",r.width=o,r.height=h,r}return Object(v.a)(e,t),Object(x.a)(e,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(t){this.intensity=t/(this.width*this.height*Math.PI)}},{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.width=source.width,this.height=source.height,this}},{key:"toJSON",value:function(meta){var data=_(e,"toJSON",this,3)([meta]);return data.object.width=this.width,data.object.height=this.height,data}}])}(Zc),yl=function(){return Object(x.a)((function t(){Object(m.a)(this,t),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var i=0;i<9;i++)this.coefficients.push(new cr)}),[{key:"set",value:function(t){for(var i=0;i<9;i++)this.coefficients[i].copy(t[i]);return this}},{key:"zero",value:function(){for(var i=0;i<9;i++)this.coefficients[i].set(0,0,0);return this}},{key:"getAt",value:function(t,e){var n=t.x,r=t.y,o=t.z,h=this.coefficients;return e.copy(h[0]).multiplyScalar(.282095),e.addScaledVector(h[1],.488603*r),e.addScaledVector(h[2],.488603*o),e.addScaledVector(h[3],.488603*n),e.addScaledVector(h[4],n*r*1.092548),e.addScaledVector(h[5],r*o*1.092548),e.addScaledVector(h[6],.315392*(3*o*o-1)),e.addScaledVector(h[7],n*o*1.092548),e.addScaledVector(h[8],.546274*(n*n-r*r)),e}},{key:"getIrradianceAt",value:function(t,e){var n=t.x,r=t.y,o=t.z,h=this.coefficients;return e.copy(h[0]).multiplyScalar(.886227),e.addScaledVector(h[1],1.023328*r),e.addScaledVector(h[2],1.023328*o),e.addScaledVector(h[3],1.023328*n),e.addScaledVector(h[4],.858086*n*r),e.addScaledVector(h[5],.858086*r*o),e.addScaledVector(h[6],.743125*o*o-.247708),e.addScaledVector(h[7],.858086*n*o),e.addScaledVector(h[8],.429043*(n*n-r*r)),e}},{key:"add",value:function(t){for(var i=0;i<9;i++)this.coefficients[i].add(t.coefficients[i]);return this}},{key:"addScaledSH",value:function(t,s){for(var i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],s);return this}},{key:"scale",value:function(s){for(var i=0;i<9;i++)this.coefficients[i].multiplyScalar(s);return this}},{key:"lerp",value:function(t,e){for(var i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}},{key:"equals",value:function(t){for(var i=0;i<9;i++)if(!this.coefficients[i].equals(t.coefficients[i]))return!1;return!0}},{key:"copy",value:function(t){return this.set(t.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}}],[{key:"getBasisAt",value:function(t,e){var n=t.x,r=t.y,o=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*o,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*o,e[6]=.315392*(3*o*o-1),e[7]=1.092548*n*o,e[8]=.546274*(n*n-r*r)}}])}(),ml=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new yl,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(m.a)(this,e),(t=O(this,e,[void 0,r])).isLightProbe=!0,t.sh=n,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.sh.copy(source.sh),this}},{key:"fromJSON",value:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}},{key:"toJSON",value:function(meta){var data=_(e,"toJSON",this,3)([meta]);return data.object.sh=this.sh.toArray(),data}}])}(Zc),gl=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e,[t])).textures={},n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"load",value:function(t,e,n,r){var o=this,h=new Uc(o.manager);h.setPath(o.path),h.setRequestHeader(o.requestHeader),h.setWithCredentials(o.withCredentials),h.load(t,(function(text){try{e(o.parse(JSON.parse(text)))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),n,r)}},{key:"parse",value:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var r=this.createMaterialFromType(t.type);if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&void 0!==r.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=t.sheen),void 0!==t.sheenColor&&(r.sheenColor=(new Ba).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(r.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==r.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==r.specular&&r.specular.setHex(t.specular),void 0!==t.specularIntensity&&(r.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.dispersion&&(r.dispersion=t.dispersion),void 0!==t.iridescence&&(r.iridescence=t.iridescence),void 0!==t.iridescenceIOR&&(r.iridescenceIOR=t.iridescenceIOR),void 0!==t.iridescenceThicknessRange&&(r.iridescenceThicknessRange=t.iridescenceThicknessRange),void 0!==t.transmission&&(r.transmission=t.transmission),void 0!==t.thickness&&(r.thickness=t.thickness),void 0!==t.attenuationDistance&&(r.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(t.attenuationColor),void 0!==t.anisotropy&&(r.anisotropy=t.anisotropy),void 0!==t.anisotropyRotation&&(r.anisotropyRotation=t.anisotropyRotation),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.shadowSide&&(r.shadowSide=t.shadowSide),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.alphaHash&&(r.alphaHash=t.alphaHash),void 0!==t.depthFunc&&(r.depthFunc=t.depthFunc),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.blendSrc&&(r.blendSrc=t.blendSrc),void 0!==t.blendDst&&(r.blendDst=t.blendDst),void 0!==t.blendEquation&&(r.blendEquation=t.blendEquation),void 0!==t.blendSrcAlpha&&(r.blendSrcAlpha=t.blendSrcAlpha),void 0!==t.blendDstAlpha&&(r.blendDstAlpha=t.blendDstAlpha),void 0!==t.blendEquationAlpha&&(r.blendEquationAlpha=t.blendEquationAlpha),void 0!==t.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(t.blendColor),void 0!==t.blendAlpha&&(r.blendAlpha=t.blendAlpha),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),void 0!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.alphaToCoverage&&(r.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(r.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.forceSinglePass&&(r.forceSinglePass=t.forceSinglePass),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),void 0!==t.uniforms)for(var o in t.uniforms){var h=t.uniforms[o];switch(r.uniforms[o]={},h.type){case"t":r.uniforms[o].value=n(h.value);break;case"c":r.uniforms[o].value=(new Ba).setHex(h.value);break;case"v2":r.uniforms[o].value=(new jn).fromArray(h.value);break;case"v3":r.uniforms[o].value=(new cr).fromArray(h.value);break;case"v4":r.uniforms[o].value=(new er).fromArray(h.value);break;case"m3":r.uniforms[o].value=(new Tn).fromArray(h.value);break;case"m4":r.uniforms[o].value=(new Wr).fromArray(h.value);break;default:r.uniforms[o].value=h.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.glslVersion&&(r.glslVersion=t.glslVersion),void 0!==t.extensions)for(var c in t.extensions)r.extensions[c]=t.extensions[c];if(void 0!==t.lights&&(r.lights=t.lights),void 0!==t.clipping&&(r.clipping=t.clipping),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){var l=t.normalScale;!1===Array.isArray(l)&&(l=[l,l]),r.normalScale=(new jn).fromArray(l)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(r.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(r.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapRotation&&r.envMapRotation.fromArray(t.envMapRotation),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new jn).fromArray(t.clearcoatNormalScale)),void 0!==t.iridescenceMap&&(r.iridescenceMap=n(t.iridescenceMap)),void 0!==t.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),void 0!==t.transmissionMap&&(r.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(r.thicknessMap=n(t.thicknessMap)),void 0!==t.anisotropyMap&&(r.anisotropyMap=n(t.anisotropyMap)),void 0!==t.sheenColorMap&&(r.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(r.sheenRoughnessMap=n(t.sheenRoughnessMap)),r}},{key:"setTextures",value:function(t){return this.textures=t,this}},{key:"createMaterialFromType",value:function(t){return e.createMaterialFromType(t)}}],[{key:"createMaterialFromType",value:function(t){return new{ShadowMaterial:nc,SpriteMaterial:Hs,RawShaderMaterial:rc,ShaderMaterial:js,PointsMaterial:gu,MeshPhysicalMaterial:sc,MeshStandardMaterial:ac,MeshPhongMaterial:oc,MeshToonMaterial:uc,MeshNormalMaterial:hc,MeshLambertMaterial:cc,MeshDepthMaterial:lc,MeshDistanceMaterial:dc,MeshBasicMaterial:Fa,MeshMatcapMaterial:fc,LineDashedMaterial:pc,LineBasicMaterial:ru,Material:Ea}[t]}}])}(Nc),bl=function(){return Object(x.a)((function t(){Object(m.a)(this,t)}),null,[{key:"decodeText",value:function(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var s="",i=0,e=t.length;i<e;i++)s+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(s))}catch(t){return s}}},{key:"extractUrlBase",value:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}},{key:"resolveURL",value:function(t,path){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(path)&&/^\//.test(t)&&(path=path.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:path+t)}}])}(),xl=function(t){function e(){var t;return Object(m.a)(this,e),(t=O(this,e)).isInstancedBufferGeometry=!0,t.type="InstancedBufferGeometry",t.instanceCount=1/0,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.instanceCount=source.instanceCount,this}},{key:"toJSON",value:function(){var data=_(e,"toJSON",this,3)([]);return data.instanceCount=this.instanceCount,data.isInstancedBufferGeometry=!0,data}}])}(us),kl=function(t){function e(t){return Object(m.a)(this,e),O(this,e,[t])}return Object(v.a)(e,t),Object(x.a)(e,[{key:"load",value:function(t,e,n,r){var o=this,h=new Uc(o.manager);h.setPath(o.path),h.setRequestHeader(o.requestHeader),h.setWithCredentials(o.withCredentials),h.load(t,(function(text){try{e(o.parse(JSON.parse(text)))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),n,r)}},{key:"parse",value:function(t){var e={},n={};function r(t,r){if(void 0!==e[r])return e[r];var o=t.interleavedBuffers[r],h=function(t,e){if(void 0!==n[e])return n[e];var r=t.arrayBuffers,o=r[e],h=new Uint32Array(o).buffer;return n[e]=h,h}(t,o.buffer),c=Bn(o.type,h),l=new Ws(c,o.stride);return l.uuid=o.uuid,e[r]=l,l}var o=t.isInstancedBufferGeometry?new xl:new us,h=t.data.index;if(void 0!==h){var c=Bn(h.type,h.array);o.setIndex(new qa(c,1))}var l=t.data.attributes;for(var d in l){var f=l[d],v=void 0;if(f.isInterleavedBufferAttribute){var y=r(t.data,f.data);v=new Ds(y,f.itemSize,f.offset,f.normalized)}else{var m=Bn(f.type,f.array);v=new(f.isInstancedBufferAttribute?So:qa)(m,f.itemSize,f.normalized)}void 0!==f.name&&(v.name=f.name),void 0!==f.usage&&v.setUsage(f.usage),o.setAttribute(d,v)}var x=t.data.morphAttributes;if(x)for(var k in x){for(var w=x[k],M=[],i=0,S=w.length;i<S;i++){var _=w[i],O=void 0;if(_.isInterleavedBufferAttribute){var A=r(t.data,_.data);O=new Ds(A,_.itemSize,_.offset,_.normalized)}else{var j=Bn(_.type,_.array);O=new qa(j,_.itemSize,_.normalized)}void 0!==_.name&&(O.name=_.name),M.push(O)}o.morphAttributes[k]=M}t.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);var T=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==T)for(var z=0,C=T.length;z!==C;++z){var I=T[z];o.addGroup(I.start,I.count,I.materialIndex)}var B=t.data.boundingSphere;if(void 0!==B){var R=new cr;void 0!==B.center&&R.fromArray(B.center),o.boundingSphere=new Ir(R,B.radius)}return t.name&&(o.name=t.name),t.userData&&(o.userData=t.userData),o}}])}(Nc),wl=function(t){function e(t){return Object(m.a)(this,e),O(this,e,[t])}return Object(v.a)(e,t),Object(x.a)(e,[{key:"load",value:function(t,e,n,r){var o=this,path=""===this.path?bl.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||path;var h=new Uc(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(t,(function(text){var n=null;try{n=JSON.parse(text)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var h=n.metadata;if(void 0===h||void 0===h.type||"geometry"===h.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+t)),void console.error("THREE.ObjectLoader: Can't load "+t);o.parse(n,e)}),n,r)}},{key:"loadAsync",value:(h=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r,path,o,text,h,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this,path=""===this.path?bl.extractUrlBase(e):this.path,this.resourcePath=this.resourcePath||path,(o=new Uc(this.manager)).setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),t.next=9,o.loadAsync(e,n);case 9:if(text=t.sent,h=JSON.parse(text),void 0!==(c=h.metadata)&&void 0!==c.type&&"geometry"!==c.type.toLowerCase()){t.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+e);case 14:return t.next=16,r.parseAsync(h);case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"parse",value:function(t,e){var n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),o=this.parseGeometries(t.geometries,r),h=this.parseImages(t.images,(function(){void 0!==e&&e(object)})),c=this.parseTextures(t.textures,h),l=this.parseMaterials(t.materials,c),object=this.parseObject(t.object,o,l,c,n),d=this.parseSkeletons(t.skeletons,object);if(this.bindSkeletons(object,d),this.bindLightTargets(object),void 0!==e){var f=!1;for(var v in h)if(h[v].data instanceof HTMLImageElement){f=!0;break}!1===f&&e(object)}return object}},{key:"parseAsync",value:(o=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,r,o,h,c,l,object,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,r),t.next=5,this.parseImagesAsync(e.images);case 5:return h=t.sent,c=this.parseTextures(e.textures,h),l=this.parseMaterials(e.materials,c),object=this.parseObject(e.object,o,l,c,n),d=this.parseSkeletons(e.skeletons,object),this.bindSkeletons(object,d),this.bindLightTargets(object),t.abrupt("return",object);case 13:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"parseShapes",value:function(t){var e={};if(void 0!==t)for(var i=0,n=t.length;i<n;i++){var r=(new ph).fromJSON(t[i]);e[r.uuid]=r}return e}},{key:"parseSkeletons",value:function(t,object){var e={},n={};if(object.traverse((function(t){t.isBone&&(n[t.uuid]=t)})),void 0!==t)for(var i=0,r=t.length;i<r;i++){var o=(new Mo).fromJSON(t[i],n);e[o.uuid]=o}return e}},{key:"parseGeometries",value:function(t,e){var n={};if(void 0!==t)for(var r=new kl,i=0,o=t.length;i<o;i++){var h=void 0,data=t[i];switch(data.type){case"BufferGeometry":case"InstancedBufferGeometry":h=r.parse(data);break;default:data.type in ic?h=ic[data.type].fromJSON(data,e):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(data.type,'"'))}h.uuid=data.uuid,void 0!==data.name&&(h.name=data.name),void 0!==data.userData&&(h.userData=data.userData),n[data.uuid]=h}return n}},{key:"parseMaterials",value:function(t,e){var n={},r={};if(void 0!==t){var o=new gl;o.setTextures(e);for(var i=0,h=t.length;i<h;i++){var data=t[i];void 0===n[data.uuid]&&(n[data.uuid]=o.parse(data)),r[data.uuid]=n[data.uuid]}}return r}},{key:"parseAnimations",value:function(t){var e={};if(void 0!==t)for(var i=0;i<t.length;i++){var data=t[i],n=Bc.parse(data);e[n.uuid]=n}return e}},{key:"parseImages",value:function(t,e){var n,r=this,o={};function h(image){if("string"==typeof image){var t=image;return function(t){return r.manager.itemStart(t),n.load(t,(function(){r.manager.itemEnd(t)}),void 0,(function(){r.manager.itemError(t),r.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:r.resourcePath+t)}return image.data?{data:Bn(image.type,image.data),width:image.width,height:image.height}:null}if(void 0!==t&&t.length>0){var c=new Ec(e);(n=new qc(c)).setCrossOrigin(this.crossOrigin);for(var i=0,l=t.length;i<l;i++){var image=t[i],d=image.url;if(Array.isArray(d)){for(var f=[],v=0,y=d.length;v<y;v++){var m=h(d[v]);null!==m&&(m instanceof HTMLImageElement?f.push(m):f.push(new xo(m.data,m.width,m.height)))}o[image.uuid]=new Gn(f)}else{var x=h(image.url);o[image.uuid]=new Gn(x)}}}return o}},{key:"parseImagesAsync",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,o,h,c,l,i,d,image,f,v,y,m,x,k,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=function(){return l=Object(r.a)(regeneratorRuntime.mark((function t(image){var e,path;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof image){t.next=8;break}return path=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e=image)?e:n.resourcePath+e,t.next=5,h.loadAsync(path);case 5:return t.abrupt("return",t.sent);case 8:if(!image.data){t.next=12;break}return t.abrupt("return",{data:Bn(image.type,image.data),width:image.width,height:image.height});case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)},c=function(t){return l.apply(this,arguments)},n=this,o={},!(void 0!==e&&e.length>0)){t.next=33;break}(h=new qc(this.manager)).setCrossOrigin(this.crossOrigin),i=0,d=e.length;case 8:if(!(i<d)){t.next=33;break}if(image=e[i],f=image.url,!Array.isArray(f)){t.next=26;break}v=[],y=0,m=f.length;case 14:if(!(y<m)){t.next=23;break}return x=f[y],t.next=18,c(x);case 18:null!==(k=t.sent)&&(k instanceof HTMLImageElement?v.push(k):v.push(new xo(k.data,k.width,k.height)));case 20:y++,t.next=14;break;case 23:o[image.uuid]=new Gn(v),t.next=30;break;case 26:return t.next=28,c(image.url);case 28:w=t.sent,o[image.uuid]=new Gn(w);case 30:i++,t.next=8;break;case 33:return t.abrupt("return",o);case 34:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"parseTextures",value:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={};if(void 0!==t)for(var i=0,o=t.length;i<o;i++){var data=t[i];void 0===data.image&&console.warn('THREE.ObjectLoader: No "image" specified for',data.uuid),void 0===e[data.image]&&console.warn("THREE.ObjectLoader: Undefined image",data.image);var source=e[data.image],image=source.data,h=void 0;Array.isArray(image)?(h=new Es,6===image.length&&(h.needsUpdate=!0)):(h=image&&image.data?new xo:new $n,image&&(h.needsUpdate=!0)),h.source=source,h.uuid=data.uuid,void 0!==data.name&&(h.name=data.name),void 0!==data.mapping&&(h.mapping=n(data.mapping,Ml)),void 0!==data.channel&&(h.channel=data.channel),void 0!==data.offset&&h.offset.fromArray(data.offset),void 0!==data.repeat&&h.repeat.fromArray(data.repeat),void 0!==data.center&&h.center.fromArray(data.center),void 0!==data.rotation&&(h.rotation=data.rotation),void 0!==data.wrap&&(h.wrapS=n(data.wrap[0],Sl),h.wrapT=n(data.wrap[1],Sl)),void 0!==data.format&&(h.format=data.format),void 0!==data.internalFormat&&(h.internalFormat=data.internalFormat),void 0!==data.type&&(h.type=data.type),void 0!==data.colorSpace&&(h.colorSpace=data.colorSpace),void 0!==data.minFilter&&(h.minFilter=n(data.minFilter,_l)),void 0!==data.magFilter&&(h.magFilter=n(data.magFilter,_l)),void 0!==data.anisotropy&&(h.anisotropy=data.anisotropy),void 0!==data.flipY&&(h.flipY=data.flipY),void 0!==data.generateMipmaps&&(h.generateMipmaps=data.generateMipmaps),void 0!==data.premultiplyAlpha&&(h.premultiplyAlpha=data.premultiplyAlpha),void 0!==data.unpackAlignment&&(h.unpackAlignment=data.unpackAlignment),void 0!==data.compareFunction&&(h.compareFunction=data.compareFunction),void 0!==data.userData&&(h.userData=data.userData),r[data.uuid]=h}return r}},{key:"parseObject",value:function(data,t,e,n,r){var object,o,h;function c(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function l(t){if(void 0!==t){if(Array.isArray(t)){for(var n=[],i=0,r=t.length;i<r;i++){var o=t[i];void 0===e[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),n.push(e[o])}return n}return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),e[t]}}function d(t){return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),n[t]}switch(data.type){case"Scene":object=new Vs,void 0!==data.background&&(Number.isInteger(data.background)?object.background=new Ba(data.background):object.background=d(data.background)),void 0!==data.environment&&(object.environment=d(data.environment)),void 0!==data.fog&&("Fog"===data.fog.type?object.fog=new Ls(data.fog.color,data.fog.near,data.fog.far):"FogExp2"===data.fog.type&&(object.fog=new Ns(data.fog.color,data.fog.density)),""!==data.fog.name&&(object.fog.name=data.fog.name)),void 0!==data.backgroundBlurriness&&(object.backgroundBlurriness=data.backgroundBlurriness),void 0!==data.backgroundIntensity&&(object.backgroundIntensity=data.backgroundIntensity),void 0!==data.backgroundRotation&&object.backgroundRotation.fromArray(data.backgroundRotation),void 0!==data.environmentIntensity&&(object.environmentIntensity=data.environmentIntensity),void 0!==data.environmentRotation&&object.environmentRotation.fromArray(data.environmentRotation);break;case"PerspectiveCamera":object=new Bs(data.fov,data.aspect,data.near,data.far),void 0!==data.focus&&(object.focus=data.focus),void 0!==data.zoom&&(object.zoom=data.zoom),void 0!==data.filmGauge&&(object.filmGauge=data.filmGauge),void 0!==data.filmOffset&&(object.filmOffset=data.filmOffset),void 0!==data.view&&(object.view=Object.assign({},data.view));break;case"OrthographicCamera":object=new cl(data.left,data.right,data.top,data.bottom,data.near,data.far),void 0!==data.zoom&&(object.zoom=data.zoom),void 0!==data.view&&(object.view=Object.assign({},data.view));break;case"AmbientLight":object=new pl(data.color,data.intensity);break;case"DirectionalLight":(object=new fl(data.color,data.intensity)).target=data.target||"";break;case"PointLight":object=new hl(data.color,data.intensity,data.distance,data.decay);break;case"RectAreaLight":object=new vl(data.color,data.intensity,data.width,data.height);break;case"SpotLight":(object=new il(data.color,data.intensity,data.distance,data.angle,data.penumbra,data.decay)).target=data.target||"";break;case"HemisphereLight":object=new Gc(data.color,data.groundColor,data.intensity);break;case"LightProbe":object=(new ml).fromJSON(data);break;case"SkinnedMesh":o=c(data.geometry),h=l(data.material),object=new go(o,h),void 0!==data.bindMode&&(object.bindMode=data.bindMode),void 0!==data.bindMatrix&&object.bindMatrix.fromArray(data.bindMatrix),void 0!==data.skeleton&&(object.skeleton=data.skeleton);break;case"Mesh":o=c(data.geometry),h=l(data.material),object=new xs(o,h);break;case"InstancedMesh":o=c(data.geometry),h=l(data.material);var f=data.count,v=data.instanceMatrix,y=data.instanceColor;(object=new Io(o,h,f)).instanceMatrix=new So(new Float32Array(v.array),16),void 0!==y&&(object.instanceColor=new So(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":o=c(data.geometry),h=l(data.material),(object=new nu(data.maxInstanceCount,data.maxVertexCount,data.maxIndexCount,h)).geometry=o,object.perObjectFrustumCulled=data.perObjectFrustumCulled,object.sortObjects=data.sortObjects,object._drawRanges=data.drawRanges,object._reservedRanges=data.reservedRanges,object._visibility=data.visibility,object._active=data.active,object._bounds=data.bounds.map((function(t){var e=new fr;e.min.fromArray(t.boxMin),e.max.fromArray(t.boxMax);var n=new Ir;return n.radius=t.sphereRadius,n.center.fromArray(t.sphereCenter),{boxInitialized:t.boxInitialized,box:e,sphereInitialized:t.sphereInitialized,sphere:n}})),object._maxInstanceCount=data.maxInstanceCount,object._maxVertexCount=data.maxVertexCount,object._maxIndexCount=data.maxIndexCount,object._geometryInitialized=data.geometryInitialized,object._geometryCount=data.geometryCount,object._matricesTexture=d(data.matricesTexture.uuid),void 0!==data.colorsTexture&&(object._colorsTexture=d(data.colorsTexture.uuid));break;case"LOD":object=new oo;break;case"Line":object=new du(c(data.geometry),l(data.material));break;case"LineLoop":object=new mu(c(data.geometry),l(data.material));break;case"LineSegments":object=new yu(c(data.geometry),l(data.material));break;case"PointCloud":case"Points":object=new Mu(c(data.geometry),l(data.material));break;case"Sprite":object=new no(l(data.material));break;case"Group":object=new _u;break;case"Bone":object=new bo;break;default:object=new pa}if(object.uuid=data.uuid,void 0!==data.name&&(object.name=data.name),void 0!==data.matrix?(object.matrix.fromArray(data.matrix),void 0!==data.matrixAutoUpdate&&(object.matrixAutoUpdate=data.matrixAutoUpdate),object.matrixAutoUpdate&&object.matrix.decompose(object.position,object.quaternion,object.scale)):(void 0!==data.position&&object.position.fromArray(data.position),void 0!==data.rotation&&object.rotation.fromArray(data.rotation),void 0!==data.quaternion&&object.quaternion.fromArray(data.quaternion),void 0!==data.scale&&object.scale.fromArray(data.scale)),void 0!==data.up&&object.up.fromArray(data.up),void 0!==data.castShadow&&(object.castShadow=data.castShadow),void 0!==data.receiveShadow&&(object.receiveShadow=data.receiveShadow),data.shadow&&(void 0!==data.shadow.intensity&&(object.shadow.intensity=data.shadow.intensity),void 0!==data.shadow.bias&&(object.shadow.bias=data.shadow.bias),void 0!==data.shadow.normalBias&&(object.shadow.normalBias=data.shadow.normalBias),void 0!==data.shadow.radius&&(object.shadow.radius=data.shadow.radius),void 0!==data.shadow.mapSize&&object.shadow.mapSize.fromArray(data.shadow.mapSize),void 0!==data.shadow.camera&&(object.shadow.camera=this.parseObject(data.shadow.camera))),void 0!==data.visible&&(object.visible=data.visible),void 0!==data.frustumCulled&&(object.frustumCulled=data.frustumCulled),void 0!==data.renderOrder&&(object.renderOrder=data.renderOrder),void 0!==data.userData&&(object.userData=data.userData),void 0!==data.layers&&(object.layers.mask=data.layers),void 0!==data.children)for(var m=data.children,i=0;i<m.length;i++)object.add(this.parseObject(m[i],t,e,n,r));if(void 0!==data.animations)for(var x=data.animations,k=0;k<x.length;k++){var w=x[k];object.animations.push(r[w])}if("LOD"===data.type){void 0!==data.autoUpdate&&(object.autoUpdate=data.autoUpdate);for(var M=data.levels,S=0;S<M.length;S++){var _=M[S],O=object.getObjectByProperty("uuid",_.object);void 0!==O&&object.addLevel(O,_.distance,_.hysteresis)}}return object}},{key:"bindSkeletons",value:function(object,t){0!==Object.keys(t).length&&object.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}},{key:"bindLightTargets",value:function(object){object.traverse((function(t){if(t.isDirectionalLight||t.isSpotLight){var e=t.target,n=object.getObjectByProperty("uuid",e);t.target=void 0!==n?n:new pa}}))}}]);var n,o,h}(Nc),Ml={UVMapping:Nt,CubeReflectionMapping:Lt,CubeRefractionMapping:Vt,EquirectangularReflectionMapping:Wt,EquirectangularRefractionMapping:Ut,CubeUVReflectionMapping:Dt},Sl={RepeatWrapping:Ht,ClampToEdgeWrapping:qt,MirroredRepeatWrapping:Jt},_l={NearestFilter:Xt,NearestMipmapNearestFilter:Yt,NearestMipmapLinearFilter:Gt,LinearFilter:Kt,LinearMipmapNearestFilter:$t,LinearMipmapLinearFilter:ee},Ol=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e,[t])).isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),n.options={premultiplyAlpha:"none"},n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"setOptions",value:function(t){return this.options=t,this}},{key:"load",value:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,h=Pc.get(t);if(void 0!==h)return o.manager.itemStart(t),h.then?void h.then((function(n){e&&e(n),o.manager.itemEnd(t)})).catch((function(t){r&&r(t)})):(setTimeout((function(){e&&e(h),o.manager.itemEnd(t)}),0),h);var c={};c.credentials="anonymous"===this.crossOrigin?"same-origin":"include",c.headers=this.requestHeader;var l=fetch(t,c).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(o.options,{colorSpaceConversion:"none"}))})).then((function(n){return Pc.add(t,n),e&&e(n),o.manager.itemEnd(t),n})).catch((function(e){r&&r(e),Pc.remove(t),o.manager.itemError(t),o.manager.itemEnd(t)}));Pc.add(t,l),o.manager.itemStart(t)}}])}(Nc),Al=function(){return Object(x.a)((function t(){Object(m.a)(this,t)}),null,[{key:"getContext",value:function(){return void 0===Lc&&(Lc=new(window.AudioContext||window.webkitAudioContext)),Lc}},{key:"setContext",value:function(t){Lc=t}}])}(),jl=function(t){function e(t){return Object(m.a)(this,e),O(this,e,[t])}return Object(v.a)(e,t),Object(x.a)(e,[{key:"load",value:function(t,e,n,r){var o=this,h=new Uc(this.manager);function c(e){r?r(e):console.error(e),o.manager.itemError(t)}h.setResponseType("arraybuffer"),h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(t,(function(t){try{var n=t.slice(0);Al.getContext().decodeAudioData(n,(function(t){e(t)})).catch(c)}catch(t){c(t)}}),n,r)}}])}(Nc),Tl=new Wr,zl=new Wr,Cl=new Wr,Il=function(){return Object(x.a)((function t(){Object(m.a)(this,t),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Bs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Bs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}),[{key:"update",value:function(t){var e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,Cl.copy(t.projectionMatrix);var n,r,o=e.eyeSep/2,h=o*e.near/e.focus,c=e.near*Math.tan(bn*e.fov*.5)/e.zoom;zl.elements[12]=-o,Tl.elements[12]=o,n=-c*e.aspect+h,r=c*e.aspect+h,Cl.elements[0]=2*e.near/(r-n),Cl.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(Cl),n=-c*e.aspect-h,r=c*e.aspect-h,Cl.elements[0]=2*e.near/(r-n),Cl.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(Cl)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(zl),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Tl)}}])}(),Bl=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(m.a)(this,e),(t=O(this,e)).isArrayCamera=!0,t.cameras=n,t}return Object(v.a)(e,t),Object(x.a)(e)}(Bs),Rl=function(){return Object(x.a)((function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(m.a)(this,t),this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}),[{key:"start",value:function(){this.startTime=Pl(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=Pl();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}])}();function Pl(){return performance.now()}var El=new cr,Fl=new ur,Nl=new cr,Ll=new cr,Vl=function(t){function e(){var t;return Object(m.a)(this,e),(t=O(this,e)).type="AudioListener",t.context=Al.getContext(),t.gain=t.context.createGain(),t.gain.connect(t.context.destination),t.filter=null,t.timeDelta=0,t._clock=new Rl,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(t){_(e,"updateMatrixWorld",this,3)([t]);var n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(El,Fl,Nl),Ll.set(0,0,-1).applyQuaternion(Fl),n.positionX){var o=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(El.x,o),n.positionY.linearRampToValueAtTime(El.y,o),n.positionZ.linearRampToValueAtTime(El.z,o),n.forwardX.linearRampToValueAtTime(Ll.x,o),n.forwardY.linearRampToValueAtTime(Ll.y,o),n.forwardZ.linearRampToValueAtTime(Ll.z,o),n.upX.linearRampToValueAtTime(r.x,o),n.upY.linearRampToValueAtTime(r.y,o),n.upZ.linearRampToValueAtTime(r.z,o)}else n.setPosition(El.x,El.y,El.z),n.setOrientation(Ll.x,Ll.y,Ll.z,r.x,r.y,r.z)}}])}(pa),Wl=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e)).type="Audio",n.listener=t,n.context=t.context,n.gain=n.context.createGain(),n.gain.connect(t.getInput()),n.autoplay=!1,n.buffer=null,n.detune=0,n.loop=!1,n.loopStart=0,n.loopEnd=0,n.offset=0,n.duration=void 0,n.playbackRate=1,n.isPlaying=!1,n.hasPlaybackControl=!0,n.source=null,n.sourceType="empty",n._startedAt=0,n._progress=0,n._connected=!1,n.filters=[],n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}},{key:"setMediaElementSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}},{key:"setMediaStreamSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}},{key:"setBuffer",value:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var source=this.context.createBufferSource();return source.buffer=this.buffer,source.loop=this.loop,source.loopStart=this.loopStart,source.loopEnd=this.loopEnd,source.onended=this.onEnded.bind(this),source.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=source,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var i=1,t=this.filters.length;i<t;i++)this.filters[i-1].connect(this.filters[i]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var i=1,t=this.filters.length;i<t;i++)this.filters[i-1].disconnect(this.filters[i]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}},{key:"setDetune",value:function(t){return this.detune=t,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(filter){return this.setFilters(filter?[filter]:[])}},{key:"setPlaybackRate",value:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1,this._progress=0}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(t){return this.loopStart=t,this}},{key:"setLoopEnd",value:function(t){return this.loopEnd=t,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}},{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),"buffer"!==source.sourceType?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=source.autoplay,this.buffer=source.buffer,this.detune=source.detune,this.loop=source.loop,this.loopStart=source.loopStart,this.loopEnd=source.loopEnd,this.offset=source.offset,this.duration=source.duration,this.playbackRate=source.playbackRate,this.hasPlaybackControl=source.hasPlaybackControl,this.sourceType=source.sourceType,this.filters=source.filters.slice(),this)}},{key:"clone",value:function(t){return new this.constructor(this.listener).copy(this,t)}}])}(pa),Ul=new cr,Dl=new ur,Hl=new cr,ql=new cr,Jl=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e,[t])).panner=n.context.createPanner(),n.panner.panningModel="HRTF",n.panner.connect(n.gain),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"connect",value:function(){_(e,"connect",this,3)([]),this.panner.connect(this.gain)}},{key:"disconnect",value:function(){_(e,"disconnect",this,3)([]),this.panner.disconnect(this.gain)}},{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(t){return this.panner.refDistance=t,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(t){return this.panner.rolloffFactor=t,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(t){return this.panner.distanceModel=t,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(t){return this.panner.maxDistance=t,this}},{key:"setDirectionalCone",value:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(t){if(_(e,"updateMatrixWorld",this,3)([t]),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Ul,Dl,Hl),ql.set(0,0,1).applyQuaternion(Dl);var n=this.panner;if(n.positionX){var r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Ul.x,r),n.positionY.linearRampToValueAtTime(Ul.y,r),n.positionZ.linearRampToValueAtTime(Ul.z,r),n.orientationX.linearRampToValueAtTime(ql.x,r),n.orientationY.linearRampToValueAtTime(ql.y,r),n.orientationZ.linearRampToValueAtTime(ql.z,r)}else n.setPosition(Ul.x,Ul.y,Ul.z),n.setOrientation(ql.x,ql.y,ql.z)}}}])}(Wl),Xl=function(){return Object(x.a)((function t(audio){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;Object(m.a)(this,t),this.analyser=audio.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),audio.getOutput().connect(this.analyser)}),[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var t=0,data=this.getFrequencyData(),i=0;i<data.length;i++)t+=data[i];return t/data.length}}])}(),Yl=function(){return Object(x.a)((function t(e,n,r){var o,h,c;switch(Object(m.a)(this,t),this.binding=e,this.valueSize=r,n){case"quaternion":o=this._slerp,h=this._slerpAdditive,c=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":o=this._select,h=this._select,c=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:o=this._lerp,h=this._lerpAdditive,c=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=h,this._setIdentity=c,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}),[{key:"accumulate",value:function(t,e){var n=this.buffer,r=this.valueSize,o=t*r+r,h=this.cumulativeWeight;if(0===h){for(var i=0;i!==r;++i)n[o+i]=n[i];h=e}else{var c=e/(h+=e);this._mixBufferRegion(n,o,0,c,r)}this.cumulativeWeight=h}},{key:"accumulateAdditive",value:function(t){var e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}},{key:"apply",value:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,o=this.cumulativeWeight,h=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){var l=e*this._origIndex;this._mixBufferRegion(n,r,l,1-o,e)}h>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(var i=e,d=e+e;i!==d;++i)if(n[i]!==n[i+e]){c.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(var i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,i=t;i<e;i++)this.buffer[i]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}},{key:"_select",value:function(t,e,n,r,o){if(r>=.5)for(var i=0;i!==o;++i)t[e+i]=t[n+i]}},{key:"_slerp",value:function(t,e,n,r){ur.slerpFlat(t,e,t,e,t,n,r)}},{key:"_slerpAdditive",value:function(t,e,n,r,o){var h=this._workIndex*o;ur.multiplyQuaternionsFlat(t,h,t,e,t,n),ur.slerpFlat(t,e,t,e,t,h,r)}},{key:"_lerp",value:function(t,e,n,r,o){for(var s=1-r,i=0;i!==o;++i){var h=e+i;t[h]=t[h]*s+t[n+i]*r}}},{key:"_lerpAdditive",value:function(t,e,n,r,o){for(var i=0;i!==o;++i){var h=e+i;t[h]=t[h]+t[n+i]*r}}}])}(),Zl="\\[\\]\\.:\\/",Gl=new RegExp("["+Zl+"]","g"),Ql="[^"+Zl+"]",Kl="[^"+Zl.replace("\\.","")+"]",$l=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Ql)+/(WCOD+)?/.source.replace("WCOD",Kl)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ql)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ql)+"$"),ed=["material","materials","bones","map"],id=function(){return Object(x.a)((function t(e,path,n){Object(m.a)(this,t);var r=n||nd.parseTrackName(path);this._targetGroup=e,this._bindings=e.subscribe_(path,r)}),[{key:"getValue",value:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}},{key:"setValue",value:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}},{key:"bind",value:function(){for(var t=this._bindings,i=this._targetGroup.nCachedObjects_,e=t.length;i!==e;++i)t[i].bind()}},{key:"unbind",value:function(){for(var t=this._bindings,i=this._targetGroup.nCachedObjects_,e=t.length;i!==e;++i)t[i].unbind()}}])}(),nd=function(){function t(e,path,n){Object(m.a)(this,t),this.path=path,this.parsedPath=n||t.parseTrackName(path),this.node=t.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return Object(x.a)(t,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(t,e){t[e]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(t,e){for(var source=this.resolvedProperty,i=0,n=source.length;i!==n;++i)t[e++]=source[i]}},{key:"_getValue_arrayElement",value:function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(t,e){this.resolvedProperty.toArray(t,e)}},{key:"_setValue_direct",value:function(t,e){this.targetObject[this.propertyName]=t[e]}},{key:"_setValue_direct_setNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]}},{key:"_setValue_array_setNeedsUpdate",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(t,e){this.resolvedProperty.fromArray(t,e)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(t,e){this.bind(),this.getValue(t,e)}},{key:"_setValue_unbound",value:function(t,e){this.bind(),this.setValue(t,e)}},{key:"bind",value:function(){var e=this.node,n=this.parsedPath,r=n.objectName,o=n.propertyName,h=n.propertyIndex;if(e||(e=t.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(r){var c=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var i=0;i<e.length;i++)if(e[i].name===c){c=i;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==c){if(void 0===e[c])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[c]}}var l=e[o];if(void 0!==l){var d=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?d=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(d=this.Versioning.MatrixWorldNeedsUpdate);var f=this.BindingType.Direct;if(void 0!==h){if("morphTargetInfluences"===o){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[h]&&(h=e.morphTargetDictionary[h])}f=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=h}else void 0!==l.fromArray&&void 0!==l.toArray?(f=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(f=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=o;this.getValue=this.GetterByBindingType[f],this.setValue=this.SetterByBindingTypeAndVersioning[f][d]}else{var v=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+v+"."+o+" but it wasn't found.",e)}}else console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(e,path,n){return e&&e.isAnimationObjectGroup?new t.Composite(e,path,n):new t(e,path,n)}},{key:"sanitizeNodeName",value:function(t){return t.replace(/\s/g,"_").replace(Gl,"")}},{key:"parseTrackName",value:function(t){var e=$l.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var o=n.nodeName.substring(r+1);-1!==ed.indexOf(o)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=o)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}},{key:"findNode",value:function(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function(t){for(var i=0;i<t.length;i++){var n=t[i];if(n.name===e||n.uuid===e)return n;var o=r(n.children);if(o)return o}return null},o=r(t.children);if(o)return o}return null}}])}();nd.Composite=id,nd.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},nd.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},nd.prototype.GetterByBindingType=[nd.prototype._getValue_direct,nd.prototype._getValue_array,nd.prototype._getValue_arrayElement,nd.prototype._getValue_toArray],nd.prototype.SetterByBindingTypeAndVersioning=[[nd.prototype._setValue_direct,nd.prototype._setValue_direct_setNeedsUpdate,nd.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[nd.prototype._setValue_array,nd.prototype._setValue_array_setNeedsUpdate,nd.prototype._setValue_array_setMatrixWorldNeedsUpdate],[nd.prototype._setValue_arrayElement,nd.prototype._setValue_arrayElement_setNeedsUpdate,nd.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[nd.prototype._setValue_fromArray,nd.prototype._setValue_fromArray_setNeedsUpdate,nd.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var rd=function(){return Object(x.a)((function t(){Object(m.a)(this,t),this.isAnimationObjectGroup=!0,this.uuid=kn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var i=0,n=arguments.length;i!==n;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}),[{key:"add",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,o=this._bindings,h=o.length,c=void 0,l=t.length,d=this.nCachedObjects_,i=0,f=arguments.length;i!==f;++i){var object=arguments[i],v=object.uuid,y=e[v];if(void 0===y){y=l++,e[v]=y,t.push(object);for(var m=0,x=h;m!==x;++m)o[m].push(new nd(object,n[m],r[m]))}else if(y<d){c=t[y];var k=--d,w=t[k];e[w.uuid]=y,t[y]=w,e[v]=k,t[k]=object;for(var M=0,S=h;M!==S;++M){var _=o[M],O=_[k],A=_[y];_[y]=O,void 0===A&&(A=new nd(object,n[M],r[M])),_[k]=A}}else t[y]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}},{key:"remove",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length,o=this.nCachedObjects_,i=0,h=arguments.length;i!==h;++i){var object=arguments[i],c=object.uuid,l=e[c];if(void 0!==l&&l>=o){var d=o++,f=t[d];e[f.uuid]=l,t[l]=f,e[c]=d,t[d]=object;for(var v=0,y=r;v!==y;++v){var m=n[v],x=m[d],k=m[l];m[l]=x,m[d]=k}}}this.nCachedObjects_=o}},{key:"uncache",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length,o=this.nCachedObjects_,h=t.length,i=0,c=arguments.length;i!==c;++i){var l=arguments[i].uuid,d=e[l];if(void 0!==d)if(delete e[l],d<o){var f=--o,v=t[f],y=--h,m=t[y];e[v.uuid]=d,t[d]=v,e[m.uuid]=f,t[f]=m,t.pop();for(var x=0,k=r;x!==k;++x){var w=n[x],M=w[f],S=w[y];w[d]=M,w[f]=S,w.pop()}}else{var _=--h,O=t[_];_>0&&(e[O.uuid]=d),t[d]=O,t.pop();for(var A=0,j=r;A!==j;++A){var T=n[A];T[d]=T[_],T.pop()}}}this.nCachedObjects_=o}},{key:"subscribe_",value:function(path,t){var e=this._bindingsIndicesByPath,n=e[path],r=this._bindings;if(void 0!==n)return r[n];var o=this._paths,h=this._parsedPaths,c=this._objects,l=c.length,d=this.nCachedObjects_,f=new Array(l);n=r.length,e[path]=n,o.push(path),h.push(t),r.push(f);for(var i=d,v=c.length;i!==v;++i){var object=c[i];f[i]=new nd(object,path,t)}return f}},{key:"unsubscribe_",value:function(path){var t=this._bindingsIndicesByPath,e=t[path];if(void 0!==e){var n=this._paths,r=this._parsedPaths,o=this._bindings,h=o.length-1,c=o[h];t[path[h]]=e,o[e]=c,o.pop(),r[e]=r[h],r.pop(),n[e]=n[h],n.pop()}}}])}(),ad=function(){return Object(x.a)((function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;Object(m.a)(this,t),this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=o;for(var h=n.tracks,c=h.length,l=new Array(c),d={endingStart:fi,endingEnd:fi},i=0;i!==c;++i){var f=h[i].createInterpolant(null);l[i]=f,f.settings=d}this._interpolantSettings=d,this._interpolants=l,this._propertyBindings=new Array(c),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=oi,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}),[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(time){return this._startTime=time,this}},{key:"setLoop",value:function(t,e){return this.loop=t,this.repetitions=e,this}},{key:"setEffectiveWeight",value:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(t){return this._scheduleFading(t,0,1)}},{key:"fadeOut",value:function(t){return this._scheduleFading(t,1,0)}},{key:"crossFadeFrom",value:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,o=t._clip.duration,h=o/r,c=r/o;t.warp(1,h,e),this.warp(c,1,e)}return this}},{key:"crossFadeTo",value:function(t,e,n){return t.crossFadeFrom(this,e,n)}},{key:"stopFading",value:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"setEffectiveTimeScale",value:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}},{key:"syncWith",value:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}},{key:"halt",value:function(t){return this.warp(this._effectiveTimeScale,0,t)}},{key:"warp",value:function(t,e,n){var r=this._mixer,o=r.time,h=this.timeScale,c=this._timeScaleInterpolant;null===c&&(c=r._lendControlInterpolant(),this._timeScaleInterpolant=c);var l=c.parameterPositions,d=c.sampleValues;return l[0]=o,l[1]=o+n,d[0]=t/h,d[1]=e/h,this}},{key:"stopWarping",value:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(time,t,e,n){if(this.enabled){var r=this._startTime;if(null!==r){var o=(time-r)*e;o<0||0===e?t=0:(this._startTime=null,t=e*o)}t*=this._updateTimeScale(time);var h=this._updateTime(t),c=this._updateWeight(time);if(c>0){var l=this._interpolants,d=this._propertyBindings;if(this.blendMode===mi)for(var f=0,v=l.length;f!==v;++f)l[f].evaluate(h),d[f].accumulateAdditive(c);else for(var y=0,m=l.length;y!==m;++y)l[y].evaluate(h),d[y].accumulate(n,c)}}else this._updateWeight(time)}},{key:"_updateWeight",value:function(time){var t=0;if(this.enabled){t=this.weight;var e=this._weightInterpolant;if(null!==e){var n=e.evaluate(time)[0];t*=n,time>e.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(time){var t=0;if(!this.paused){t=this.timeScale;var e=this._timeScaleInterpolant;if(null!==e)t*=e.evaluate(time)[0],time>e.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(t){var e=this._clip.duration,n=this.loop,time=this.time+t,r=this._loopCount,o=n===ui;if(0===t)return-1===r||!o||1&~r?time:e-time;if(n===si){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(time>=e)time=e;else{if(!(time<0)){this.time=time;break t}time=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=time,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),time>=e||time<0){var h=Math.floor(time/e);time-=e*h,r+=Math.abs(h);var c=this.repetitions-r;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,time=t>0?e:0,this.time=time,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===c){var l=t<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=time,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=time;if(o&&!(1&~r))return e-time}return time}},{key:"_setEndings",value:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=pi,r.endingEnd=pi):(r.endingStart=t?this.zeroSlopeAtStart?pi:fi:vi,r.endingEnd=e?this.zeroSlopeAtEnd?pi:fi:vi)}},{key:"_scheduleFading",value:function(t,e,n){var r=this._mixer,o=r.time,h=this._weightInterpolant;null===h&&(h=r._lendControlInterpolant(),this._weightInterpolant=h);var c=h.parameterPositions,l=h.sampleValues;return c[0]=o,l[0]=e,c[1]=o+t,l[1]=n,this}}])}(),sd=new Float32Array(1),od=function(t){function e(t){var n;return Object(m.a)(this,e),(n=O(this,e))._root=t,n._initMemoryManager(),n._accuIndex=0,n.time=0,n.timeScale=1,n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"_bindAction",value:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,o=r.length,h=t._propertyBindings,c=t._interpolants,l=n.uuid,d=this._bindingsByRootAndName,f=d[l];void 0===f&&(f={},d[l]=f);for(var i=0;i!==o;++i){var track=r[i],v=track.name,y=f[v];if(void 0!==y)++y.referenceCount,h[i]=y;else{if(void 0!==(y=h[i])){null===y._cacheIndex&&(++y.referenceCount,this._addInactiveBinding(y,l,v));continue}var path=e&&e._propertyBindings[i].binding.parsedPath;++(y=new Yl(nd.create(n,v,path),track.ValueTypeName,track.getValueSize())).referenceCount,this._addInactiveBinding(y,l,v),h[i]=y}c[i].resultBuffer=y.buffer}}},{key:"_activateAction",value:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var o=t._propertyBindings,i=0,h=o.length;i!==h;++i){var c=o[i];0==c.useCount++&&(this._lendBinding(c),c.saveOriginalState())}this._lendAction(t)}}},{key:"_deactivateAction",value:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions}},{key:"_addInactiveAction",value:function(t,e,n){var r=this._actions,o=this._actionsByClip,h=o[e];if(void 0===h)h={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=h;else{var c=h.knownActions;t._byClipCacheIndex=c.length,c.push(t)}t._cacheIndex=r.length,r.push(t),h.actionByRoot[n]=t}},{key:"_removeInactiveAction",value:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var o=t._clip.uuid,h=this._actionsByClip,c=h[o],l=c.knownActions,d=l[l.length-1],f=t._byClipCacheIndex;d._byClipCacheIndex=f,l[f]=d,l.pop(),t._byClipCacheIndex=null,delete c.actionByRoot[(t._localRoot||this._root).uuid],0===l.length&&delete h[o],this._removeInactiveBindingsForAction(t)}},{key:"_removeInactiveBindingsForAction",value:function(t){for(var e=t._propertyBindings,i=0,n=e.length;i!==n;++i){var r=e[i];0==--r.referenceCount&&this._removeInactiveBinding(r)}}},{key:"_lendAction",value:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}},{key:"_takeBackAction",value:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}},{key:"_addInactiveBinding",value:function(t,e,n){var r=this._bindingsByRootAndName,o=this._bindings,h=r[e];void 0===h&&(h={},r[e]=h),h[n]=t,t._cacheIndex=o.length,o.push(t)}},{key:"_removeInactiveBinding",value:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,o=n.path,h=this._bindingsByRootAndName,c=h[r],l=e[e.length-1],d=t._cacheIndex;l._cacheIndex=d,e[d]=l,e.pop(),delete c[o],0===Object.keys(c).length&&delete h[r]}},{key:"_lendBinding",value:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}},{key:"_takeBackBinding",value:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}},{key:"_lendControlInterpolant",value:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new Mc(new Float32Array(2),new Float32Array(2),1,sd)).__cacheIndex=e,t[e]=n),n}},{key:"_takeBackControlInterpolant",value:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,o=e[r];t.__cacheIndex=r,e[r]=t,o.__cacheIndex=n,e[n]=o}},{key:"clipAction",value:function(t,e,n){var r=e||this._root,o=r.uuid,h="string"==typeof t?Bc.findByName(r,t):t,c=null!==h?h.uuid:t,l=this._actionsByClip[c],d=null;if(void 0===n&&(n=null!==h?h.blendMode:yi),void 0!==l){var f=l.actionByRoot[o];if(void 0!==f&&f.blendMode===n)return f;d=l.knownActions[0],null===h&&(h=d._clip)}if(null===h)return null;var v=new ad(this,h,e,n);return this._bindAction(v,d),this._addInactiveAction(v,c,o),v}},{key:"existingAction",value:function(t,e){var n=e||this._root,r=n.uuid,o="string"==typeof t?Bc.findByName(n,t):t,h=o?o.uuid:t,c=this._actionsByClip[h];return void 0!==c&&c.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var t=this._actions,i=this._nActiveActions-1;i>=0;--i)t[i].stop();return this}},{key:"update",value:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,time=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1,i=0;i!==n;++i){e[i]._update(time,t,r,o)}for(var h=this._bindings,c=this._nActiveBindings,l=0;l!==c;++l)h[l].apply(o);return this}},{key:"setTime",value:function(t){this.time=0;for(var i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(t)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,o=r[n];if(void 0!==o){for(var h=o.knownActions,i=0,c=h.length;i!==c;++i){var l=h[i];this._deactivateAction(l);var d=l._cacheIndex,f=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,f._cacheIndex=d,e[d]=f,e.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}}},{key:"uncacheRoot",value:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var o=n[r].actionByRoot[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var h=this._bindingsByRootAndName[e];if(void 0!==h)for(var c in h){var l=h[c];l.restoreOriginalState(),this._removeInactiveBinding(l)}}},{key:"uncacheAction",value:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}])}(yn),ud=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(m.a)(this,e),(t=O(this,e,[n,r,h])).isRenderTarget3D=!0,t.depth=o,t.texture=new sr(null,n,r,o),t.texture.isRenderTargetTexture=!0,t}return Object(v.a)(e,t),Object(x.a)(e)}(ir),hd=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object(m.a)(this,e),(t=O(this,e,[n,r,h])).isRenderTargetArray=!0,t.depth=o,t.texture=new rr(null,n,r,o),t.texture.isRenderTargetTexture=!0,t}return Object(v.a)(e,t),Object(x.a)(e)}(ir),cd=function(){function t(e){Object(m.a)(this,t),this.value=e}return Object(x.a)(t,[{key:"clone",value:function(){return new t(void 0===this.value.clone?this.value:this.value.clone())}}])}(),ld=0,fd=function(t){function e(){var t;return Object(m.a)(this,e),(t=O(this,e)).isUniformsGroup=!0,Object.defineProperty(t,"id",{value:ld++}),t.name="",t.usage=nn,t.uniforms=[],t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"add",value:function(t){return this.uniforms.push(t),this}},{key:"remove",value:function(t){var e=this.uniforms.indexOf(t);return-1!==e&&this.uniforms.splice(e,1),this}},{key:"setName",value:function(t){return this.name=t,this}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),this}},{key:"copy",value:function(source){this.name=source.name,this.usage=source.usage;var t=source.uniforms;this.uniforms.length=0;for(var i=0,e=t.length;i<e;i++)for(var n=Array.isArray(t[i])?t[i]:[t[i]],r=0;r<n.length;r++)this.uniforms.push(n[r].clone());return this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(yn),pd=function(t){function e(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(m.a)(this,e),(r=O(this,e,[t,n])).isInstancedInterleavedBuffer=!0,r.meshPerAttribute=o,r}return Object(v.a)(e,t),Object(x.a)(e,[{key:"copy",value:function(source){return _(e,"copy",this,3)([source]),this.meshPerAttribute=source.meshPerAttribute,this}},{key:"clone",value:function(data){var t=_(e,"clone",this,3)([data]);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(data){var t=_(e,"toJSON",this,3)([data]);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}])}(Ws),vd=function(){return Object(x.a)((function t(e,n,r,o,h){Object(m.a)(this,t),this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=o,this.count=h,this.version=0}),[{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setBuffer",value:function(t){return this.buffer=t,this}},{key:"setType",value:function(t,e){return this.type=t,this.elementSize=e,this}},{key:"setItemSize",value:function(t){return this.itemSize=t,this}},{key:"setCount",value:function(t){return this.count=t,this}}])}(),yd=new Wr,md=function(){return Object(x.a)((function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;Object(m.a)(this,t),this.ray=new Vr(e,n),this.near=r,this.far=o,this.camera=null,this.layers=new Kr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}),[{key:"set",value:function(t,e){this.ray.set(t,e)}},{key:"setFromCamera",value:function(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}},{key:"setFromXRController",value:function(t){return yd.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(yd),this}},{key:"intersectObject",value:function(object){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return bd(object,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(gd),t}},{key:"intersectObjects",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0,r=t.length;i<r;i++)bd(t[i],this,n,e);return n.sort(gd),n}}])}();function gd(a,b){return a.distance-b.distance}function bd(object,t,e,n){var r=!0;object.layers.test(t.layers)&&(!1===object.raycast(t,e)&&(r=!1));if(!0===r&&!0===n)for(var o=object.children,i=0,h=o.length;i<h;i++)bd(o[i],t,e,!0)}var xd=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(m.a)(this,t),this.radius=e,this.phi=n,this.theta=r,this}),[{key:"set",value:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}},{key:"makeSafe",value:function(){var t=1e-6;return this.phi=wn(this.phi,t,Math.PI-t),this}},{key:"setFromVector3",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:"setFromCartesianCoords",value:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(wn(e/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),kd=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(m.a)(this,t),this.radius=e,this.theta=n,this.y=r,this}),[{key:"set",value:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}},{key:"copy",value:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}},{key:"setFromVector3",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:"setFromCartesianCoords",value:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),wd=function(){return Object(x.a)((function t(e,n,r,o){Object(m.a)(this,t),t.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,n,r,o)}),[{key:"identity",value:function(){return this.set(1,0,0,1),this}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;i<4;i++)this.elements[i]=t[i+e];return this}},{key:"set",value:function(t,e,n,r){var o=this.elements;return o[0]=t,o[2]=e,o[1]=n,o[3]=r,this}}])}(),Md=new jn,Sd=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jn(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jn(-1/0,-1/0);Object(m.a)(this,t),this.isBox2=!0,this.min=e,this.max=n}),[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var i=0,e=t.length;i<e;i++)this.expandByPoint(t[i]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var n=Md.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"containsPoint",value:function(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}},{key:"getParameter",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}},{key:"clampPoint",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return this.clampPoint(t,Md).distanceTo(t)}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}])}(),_d=new cr,Od=new cr,Ad=function(){return Object(x.a)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cr;Object(m.a)(this,t),this.start=e,this.end=n}),[{key:"set",value:function(t,e){return this.start.copy(t),this.end.copy(e),this}},{key:"copy",value:function(line){return this.start.copy(line.start),this.end.copy(line.end),this}},{key:"getCenter",value:function(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(t){return t.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}},{key:"closestPointToPointParameter",value:function(t,e){_d.subVectors(t,this.start),Od.subVectors(this.end,this.start);var n=Od.dot(Od),r=Od.dot(_d)/n;return e&&(r=wn(r,0,1)),r}},{key:"closestPointToPoint",value:function(t,e,n){var r=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}},{key:"equals",value:function(line){return line.start.equals(this.start)&&line.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}])}(),jd=new cr,Td=function(t){function e(t,n){var r;Object(m.a)(this,e),(r=O(this,e)).light=t,r.matrixAutoUpdate=!1,r.color=n,r.type="SpotLightHelper";for(var o=new us,h=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,c=1;i<32;i++,c++){var l=i/32*Math.PI*2,d=c/32*Math.PI*2;h.push(Math.cos(l),Math.sin(l),1,Math.cos(d),Math.sin(d),1)}o.setAttribute("position",new ts(h,3));var f=new ru({fog:!1,toneMapped:!1});return r.cone=new yu(o,f),r.add(r.cone),r.update(),r}return Object(v.a)(e,t),Object(x.a)(e,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),jd.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(jd),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}])}(pa),zd=new cr,Cd=new Wr,Id=new Wr,Bd=function(t){function e(object){var t;Object(m.a)(this,e);for(var n=Rd(object),r=new us,o=[],h=[],c=new Ba(0,0,1),l=new Ba(0,1,0),i=0;i<n.length;i++){var d=n[i];d.parent&&d.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),h.push(c.r,c.g,c.b),h.push(l.r,l.g,l.b))}return r.setAttribute("position",new ts(o,3)),r.setAttribute("color",new ts(h,3)),(t=O(this,e,[r,new ru({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})])).isSkeletonHelper=!0,t.type="SkeletonHelper",t.root=object,t.bones=n,t.matrix=object.matrixWorld,t.matrixAutoUpdate=!1,t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"updateMatrixWorld",value:function(t){var n=this.bones,r=this.geometry,o=r.getAttribute("position");Id.copy(this.root.matrixWorld).invert();for(var i=0,h=0;i<n.length;i++){var c=n[i];c.parent&&c.parent.isBone&&(Cd.multiplyMatrices(Id,c.matrixWorld),zd.setFromMatrixPosition(Cd),o.setXYZ(h,zd.x,zd.y,zd.z),Cd.multiplyMatrices(Id,c.parent.matrixWorld),zd.setFromMatrixPosition(Cd),o.setXYZ(h+1,zd.x,zd.y,zd.z),h+=2)}r.getAttribute("position").needsUpdate=!0,_(e,"updateMatrixWorld",this,3)([t])}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(yu);function Rd(object){var t=[];!0===object.isBone&&t.push(object);for(var i=0;i<object.children.length;i++)t.push.apply(t,Rd(object.children[i]));return t}var Pd=function(t){function e(t,n,r){var o;return Object(m.a)(this,e),(o=O(this,e,[new Zh(n,4,2),new Fa({wireframe:!0,fog:!1,toneMapped:!1})])).light=t,o.color=r,o.type="PointLightHelper",o.matrix=o.light.matrixWorld,o.matrixAutoUpdate=!1,o.update(),o}return Object(v.a)(e,t),Object(x.a)(e,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}])}(xs),Ed=new cr,Fd=new Ba,Nd=new Ba,Ld=function(t){function e(t,n,r){var o;Object(m.a)(this,e),(o=O(this,e)).light=t,o.matrix=t.matrixWorld,o.matrixAutoUpdate=!1,o.color=r,o.type="HemisphereLightHelper";var h=new qh(n);h.rotateY(.5*Math.PI),o.material=new Fa({wireframe:!0,fog:!1,toneMapped:!1}),void 0===o.color&&(o.material.vertexColors=!0);var c=h.getAttribute("position"),l=new Float32Array(3*c.count);return h.setAttribute("color",new qa(l,3)),o.add(new xs(h,o.material)),o.update(),o}return Object(v.a)(e,t),Object(x.a)(e,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");Fd.copy(this.light.color),Nd.copy(this.light.groundColor);for(var i=0,n=e.count;i<n;i++){var r=i<n/2?Fd:Nd;e.setXYZ(i,r.r,r.g,r.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(Ed.setFromMatrixPosition(this.light.matrixWorld).negate())}}])}(pa),Vd=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;Object(m.a)(this,e),o=new Ba(o),h=new Ba(h);for(var c=r/2,l=n/r,d=n/2,f=[],v=[],i=0,y=0,x=-d;i<=r;i++,x+=l){f.push(-d,0,x,d,0,x),f.push(x,0,-d,x,0,d);var k=i===c?o:h;k.toArray(v,y),y+=3,k.toArray(v,y),y+=3,k.toArray(v,y),y+=3,k.toArray(v,y),y+=3}var w=new us;return w.setAttribute("position",new ts(f,3)),w.setAttribute("color",new ts(v,3)),(t=O(this,e,[w,new ru({vertexColors:!0,toneMapped:!1})])).type="GridHelper",t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(yu),Wd=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;Object(m.a)(this,e),c=new Ba(c),l=new Ba(l);var d=[],f=[];if(r>1)for(var i=0;i<r;i++){var v=i/r*(2*Math.PI),y=Math.sin(v)*n,x=Math.cos(v)*n;d.push(0,0,0),d.push(y,0,x);var k=1&i?c:l;f.push(k.r,k.g,k.b),f.push(k.r,k.g,k.b)}for(var w=0;w<o;w++)for(var M=1&w?c:l,S=n-n/o*w,_=0;_<h;_++){var A=_/h*(2*Math.PI),j=Math.sin(A)*S,T=Math.cos(A)*S;d.push(j,0,T),f.push(M.r,M.g,M.b),A=(_+1)/h*(2*Math.PI),j=Math.sin(A)*S,T=Math.cos(A)*S,d.push(j,0,T),f.push(M.r,M.g,M.b)}var z=new us;return z.setAttribute("position",new ts(d,3)),z.setAttribute("color",new ts(f,3)),(t=O(this,e,[z,new ru({vertexColors:!0,toneMapped:!1})])).type="PolarGridHelper",t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(yu),Ud=new cr,Dd=new cr,Hd=new cr,qd=function(t){function e(t,n,r){var o;Object(m.a)(this,e),(o=O(this,e)).light=t,o.matrix=t.matrixWorld,o.matrixAutoUpdate=!1,o.color=r,o.type="DirectionalLightHelper",void 0===n&&(n=1);var h=new us;h.setAttribute("position",new ts([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));var c=new ru({fog:!1,toneMapped:!1});return o.lightPlane=new du(h,c),o.add(o.lightPlane),(h=new us).setAttribute("position",new ts([0,0,0,0,0,1],3)),o.targetLine=new du(h,c),o.add(o.targetLine),o.update(),o}return Object(v.a)(e,t),Object(x.a)(e,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Ud.setFromMatrixPosition(this.light.matrixWorld),Dd.setFromMatrixPosition(this.light.target.matrixWorld),Hd.subVectors(Dd,Ud),this.lightPlane.lookAt(Dd),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Dd),this.targetLine.scale.z=Hd.length()}}])}(pa),Jd=new cr,Xd=new Ts,Yd=function(t){function e(t){var n;Object(m.a)(this,e);var r=new us,o=new ru({color:16777215,vertexColors:!0,toneMapped:!1}),h=[],c=[],l={};function d(a,b){f(a),f(b)}function f(t){h.push(0,0,0),c.push(0,0,0),void 0===l[t]&&(l[t]=[]),l[t].push(h.length/3-1)}d("n1","n2"),d("n2","n4"),d("n4","n3"),d("n3","n1"),d("f1","f2"),d("f2","f4"),d("f4","f3"),d("f3","f1"),d("n1","f1"),d("n2","f2"),d("n3","f3"),d("n4","f4"),d("p","n1"),d("p","n2"),d("p","n3"),d("p","n4"),d("u1","u2"),d("u2","u3"),d("u3","u1"),d("c","t"),d("p","c"),d("cn1","cn2"),d("cn3","cn4"),d("cf1","cf2"),d("cf3","cf4"),r.setAttribute("position",new ts(h,3)),r.setAttribute("color",new ts(c,3)),(n=O(this,e,[r,o])).type="CameraHelper",n.camera=t,n.camera.updateProjectionMatrix&&n.camera.updateProjectionMatrix(),n.matrix=t.matrixWorld,n.matrixAutoUpdate=!1,n.pointMap=l,n.update();var v=new Ba(16755200),y=new Ba(16711680),x=new Ba(43775),k=new Ba(16777215),w=new Ba(3355443);return n.setColors(v,y,x,k,w),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"setColors",value:function(t,e,n,r,o){var h=this.geometry.getAttribute("color");h.setXYZ(0,t.r,t.g,t.b),h.setXYZ(1,t.r,t.g,t.b),h.setXYZ(2,t.r,t.g,t.b),h.setXYZ(3,t.r,t.g,t.b),h.setXYZ(4,t.r,t.g,t.b),h.setXYZ(5,t.r,t.g,t.b),h.setXYZ(6,t.r,t.g,t.b),h.setXYZ(7,t.r,t.g,t.b),h.setXYZ(8,t.r,t.g,t.b),h.setXYZ(9,t.r,t.g,t.b),h.setXYZ(10,t.r,t.g,t.b),h.setXYZ(11,t.r,t.g,t.b),h.setXYZ(12,t.r,t.g,t.b),h.setXYZ(13,t.r,t.g,t.b),h.setXYZ(14,t.r,t.g,t.b),h.setXYZ(15,t.r,t.g,t.b),h.setXYZ(16,t.r,t.g,t.b),h.setXYZ(17,t.r,t.g,t.b),h.setXYZ(18,t.r,t.g,t.b),h.setXYZ(19,t.r,t.g,t.b),h.setXYZ(20,t.r,t.g,t.b),h.setXYZ(21,t.r,t.g,t.b),h.setXYZ(22,t.r,t.g,t.b),h.setXYZ(23,t.r,t.g,t.b),h.setXYZ(24,e.r,e.g,e.b),h.setXYZ(25,e.r,e.g,e.b),h.setXYZ(26,e.r,e.g,e.b),h.setXYZ(27,e.r,e.g,e.b),h.setXYZ(28,e.r,e.g,e.b),h.setXYZ(29,e.r,e.g,e.b),h.setXYZ(30,e.r,e.g,e.b),h.setXYZ(31,e.r,e.g,e.b),h.setXYZ(32,n.r,n.g,n.b),h.setXYZ(33,n.r,n.g,n.b),h.setXYZ(34,n.r,n.g,n.b),h.setXYZ(35,n.r,n.g,n.b),h.setXYZ(36,n.r,n.g,n.b),h.setXYZ(37,n.r,n.g,n.b),h.setXYZ(38,r.r,r.g,r.b),h.setXYZ(39,r.r,r.g,r.b),h.setXYZ(40,o.r,o.g,o.b),h.setXYZ(41,o.r,o.g,o.b),h.setXYZ(42,o.r,o.g,o.b),h.setXYZ(43,o.r,o.g,o.b),h.setXYZ(44,o.r,o.g,o.b),h.setXYZ(45,o.r,o.g,o.b),h.setXYZ(46,o.r,o.g,o.b),h.setXYZ(47,o.r,o.g,o.b),h.setXYZ(48,o.r,o.g,o.b),h.setXYZ(49,o.r,o.g,o.b),h.needsUpdate=!0}},{key:"update",value:function(){var t=this.geometry,e=this.pointMap;Xd.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);var n=this.camera.coordinateSystem===pn?-1:0;Zd("c",e,t,Xd,0,0,n),Zd("t",e,t,Xd,0,0,1),Zd("n1",e,t,Xd,-1,-1,n),Zd("n2",e,t,Xd,1,-1,n),Zd("n3",e,t,Xd,-1,1,n),Zd("n4",e,t,Xd,1,1,n),Zd("f1",e,t,Xd,-1,-1,1),Zd("f2",e,t,Xd,1,-1,1),Zd("f3",e,t,Xd,-1,1,1),Zd("f4",e,t,Xd,1,1,1),Zd("u1",e,t,Xd,.7,1.1,n),Zd("u2",e,t,Xd,-.7,1.1,n),Zd("u3",e,t,Xd,0,2,n),Zd("cf1",e,t,Xd,-1,0,1),Zd("cf2",e,t,Xd,1,0,1),Zd("cf3",e,t,Xd,0,-1,1),Zd("cf4",e,t,Xd,0,1,1),Zd("cn1",e,t,Xd,-1,0,n),Zd("cn2",e,t,Xd,1,0,n),Zd("cn3",e,t,Xd,0,-1,n),Zd("cn4",e,t,Xd,0,1,n),t.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(yu);function Zd(t,e,n,r,o,h,c){Jd.set(o,h,c).unproject(r);var l=e[t];if(void 0!==l)for(var d=n.getAttribute("position"),i=0,f=l.length;i<f;i++)d.setXYZ(l[i],Jd.x,Jd.y,Jd.z)}var Gd,Qd,Kd=new fr,$d=function(t){function e(object){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;Object(m.a)(this,e);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(24),h=new us;return h.setIndex(new qa(r,1)),h.setAttribute("position",new qa(o,3)),(t=O(this,e,[h,new ru({color:n,toneMapped:!1})])).object=object,t.type="BoxHelper",t.matrixAutoUpdate=!1,t.update(),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"update",value:function(object){if(void 0!==object&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Kd.setFromObject(this.object),!Kd.isEmpty()){var t=Kd.min,e=Kd.max,n=this.geometry.attributes.position,r=n.array;r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=t.x,r[4]=e.y,r[5]=e.z,r[6]=t.x,r[7]=t.y,r[8]=e.z,r[9]=e.x,r[10]=t.y,r[11]=e.z,r[12]=e.x,r[13]=e.y,r[14]=t.z,r[15]=t.x,r[16]=e.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=e.x,r[22]=t.y,r[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(object){return this.object=object,this.update(),this}},{key:"copy",value:function(source,t){return _(e,"copy",this,3)([source,t]),this.object=source.object,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(yu),tf=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;Object(m.a)(this,e);var o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),h=new us;return h.setIndex(new qa(o,1)),h.setAttribute("position",new ts([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),(n=O(this,e,[h,new ru({color:r,toneMapped:!1})])).box=t,n.type="Box3Helper",n.geometry.computeBoundingSphere(),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"updateMatrixWorld",value:function(t){var n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),_(e,"updateMatrixWorld",this,3)([t]))}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(yu),ef=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;Object(m.a)(this,e);var h=o,c=new us;c.setAttribute("position",new ts([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),c.computeBoundingSphere(),(n=O(this,e,[c,new ru({color:h,toneMapped:!1})])).type="PlaneHelper",n.plane=t,n.size=r;var l=new us;return l.setAttribute("position",new ts([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),l.computeBoundingSphere(),n.add(new xs(l,new Fa({color:h,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),n}return Object(v.a)(e,t),Object(x.a)(e,[{key:"updateMatrixWorld",value:function(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),_(e,"updateMatrixWorld",this,3)([t])}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}])}(du),nf=new cr,rf=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new cr(0,0,1),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cr(0,0,0),o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*o,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*c;return Object(m.a)(this,e),(t=O(this,e)).type="ArrowHelper",void 0===Gd&&((Gd=new us).setAttribute("position",new ts([0,0,0,0,1,0],3)),(Qd=new ah(0,.5,1,5,1)).translate(0,-.5,0)),t.position.copy(r),t.line=new du(Gd,new ru({color:h,toneMapped:!1})),t.line.matrixAutoUpdate=!1,t.add(t.line),t.cone=new xs(Qd,new Fa({color:h,toneMapped:!1})),t.cone.matrixAutoUpdate=!1,t.add(t.cone),t.setDirection(n),t.setLength(o,c,l),t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"setDirection",value:function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{nf.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(nf,e)}}},{key:"setLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*e;this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}},{key:"setColor",value:function(t){this.line.material.color.set(t),this.cone.material.color.set(t)}},{key:"copy",value:function(source){return _(e,"copy",this,3)([source,!1]),this.line.copy(source.line),this.cone.copy(source.cone),this}},{key:"dispose",value:function(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}])}(pa),af=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Object(m.a)(this,e);var r=[0,0,0,n,0,0,0,0,0,0,n,0,0,0,0,0,0,n],o=new us;return o.setAttribute("position",new ts(r,3)),o.setAttribute("color",new ts([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),(t=O(this,e,[o,new ru({vertexColors:!0,toneMapped:!1})])).type="AxesHelper",t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"setColors",value:function(t,e,n){var r=new Ba,o=this.geometry.attributes.color.array;return r.set(t),r.toArray(o,0),r.toArray(o,3),r.set(e),r.toArray(o,6),r.toArray(o,9),r.set(n),r.toArray(o,12),r.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(yu),sf=function(){return Object(x.a)((function t(){Object(m.a)(this,t),this.type="ShapePath",this.color=new Ba,this.subPaths=[],this.currentPath=null}),[{key:"moveTo",value:function(t,e){return this.currentPath=new eh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}},{key:"lineTo",value:function(t,e){return this.currentPath.lineTo(t,e),this}},{key:"quadraticCurveTo",value:function(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}},{key:"bezierCurveTo",value:function(t,e,n,r,o,h){return this.currentPath.bezierCurveTo(t,e,n,r,o,h),this}},{key:"splineThru",value:function(t){return this.currentPath.splineThru(t),this}},{key:"toShapes",value:function(t){function e(t,e){for(var n=e.length,r=!1,p=n-1,q=0;q<n;p=q++){var o=e[p],h=e[q],c=h.x-o.x,l=h.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=e[q],c=-c,h=e[p],l=-l),t.y<o.y||t.y>h.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var d=l*(t.x-o.x)-c*(t.y-o.y);if(0===d)return!0;if(d<0)continue;r=!r}}else{if(t.y!==o.y)continue;if(h.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=h.x)return!0}}return r}var n,r,o,h=Lh.isClockWise,c=this.subPaths;if(0===c.length)return[];var l=[];if(1===c.length)return r=c[0],(o=new ph).curves=r.curves,l.push(o),l;var d=!h(c[0].getPoints());d=t?!d:d;var f,v,y=[],m=[],x=[],k=0;m[k]=void 0,x[k]=[];for(var i=0,w=c.length;i<w;i++)n=h(f=(r=c[i]).getPoints()),(n=t?!n:n)?(!d&&m[k]&&k++,m[k]={s:new ph,p:f},m[k].s.curves=r.curves,d&&k++,x[k]=[]):x[k].push({h:r,p:f[0]});if(!m[0])return function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i],o=new ph;o.curves=r.curves,e.push(o)}return e}(c);if(m.length>1){for(var M=!1,S=0,_=0,O=m.length;_<O;_++)y[_]=[];for(var A=0,j=m.length;A<j;A++)for(var T=x[A],z=0;z<T.length;z++){for(var C=T[z],I=!0,B=0;B<m.length;B++)e(C.p,m[B].p)&&(A!==B&&S++,I?(I=!1,y[B].push(C)):M=!0);I&&y[A].push(C)}S>0&&!1===M&&(x=y)}for(var R=0,P=m.length;R<P;R++){o=m[R].s,l.push(o);for(var E=0,F=(v=x[R]).length;E<F;E++)o.holes.push(v[E].h)}return l}}])}(),of=function(t){function e(object){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(m.a)(this,e),(t=O(this,e)).object=object,t.domElement=n,t.enabled=!0,t.state=-1,t.keys={},t.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},t.touches={ONE:null,TWO:null},t}return Object(v.a)(e,t),Object(x.a)(e,[{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"dispose",value:function(){}},{key:"update",value:function(){}}])}(yn);function uf(t,e,n,r){var o=function(t){switch(t){case ne:case re:return{byteLength:1,components:1};case se:case ae:case ce:return{byteLength:2,components:1};case le:case de:return{byteLength:2,components:4};case ue:case oe:case he:return{byteLength:4,components:1};case pe:return{byteLength:4,components:3}}throw new Error("Unknown texture type ".concat(t,"."))}(r);switch(n){case ve:case ge:return t*e;case be:return t*e*2;case we:case Me:return t*e/o.components*o.byteLength;case Se:case _e:return t*e*2/o.components*o.byteLength;case ye:return t*e*3/o.components*o.byteLength;case me:case Ae:return t*e*4/o.components*o.byteLength;case je:case Te:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case ze:case Ce:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Be:case Pe:return Math.max(t,16)*Math.max(e,8)/4;case Ie:case Re:return Math.max(t,8)*Math.max(e,8)/2;case Ee:case Fe:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Ne:case Le:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Ve:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case We:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case Ue:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case De:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case He:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case qe:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case Je:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case Xe:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case Ye:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case Ze:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case Ge:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case Qe:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case Ke:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case $e:case ti:case ei:return Math.ceil(t/4)*Math.ceil(e/4)*16;case ii:case ni:return Math.ceil(t/4)*Math.ceil(e/4)*8;case ri:case ai:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error("Unable to determine texture byte length for ".concat(n," format."))}var hf={contain:function(t,e){var n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t},cover:function(t,e){var n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t},fill:function(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t},getByteLength:uf};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:j}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=j)}}]);