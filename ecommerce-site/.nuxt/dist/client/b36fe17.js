(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{455:function(e,t,r){"use strict";r.r(t),r.d(t,"FBXLoader",(function(){return fe}));r(23),r(71),r(72),r(73),r(304);var n=r(404),o=r(383),l=r(30),c=r(24),v=r(142),f=r(143),h=r(306),d=r(299),m=r(303),y=(r(111),r(25),r(54),r(70),r(308),r(309),r(311),r(312),r(41),r(343),r(26),r(16),r(33),r(55),r(346),r(46),r(205),r(203),r(56),r(447),r(347),r(348),r(314),r(315),r(316),r(317),r(318),r(319),r(320),r(321),r(322),r(323),r(324),r(325),r(326),r(327),r(328),r(329),r(330),r(331),r(332),r(333),r(334),r(335),r(336),r(337),r(351),r(352),r(353),r(354),r(355),r(356),r(358),r(359),r(360),r(361),r(362),r(363),r(364),r(365),r(366),r(367),r(369),r(370),r(371),r(372),r(373),r(374),r(375),r(376),r(377),r(378),r(379),r(380),r(381),r(22),r(47),r(402),r(403),r(206),r(289)),w=(r(200),r(349),r(350),r(450),r(92),Uint8Array),k=Uint16Array,I=Int32Array,T=new w([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),x=new w([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),E=new w([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),A=function(e,t){for(var b=new k(31),i=0;i<31;++i)b[i]=t+=1<<e[i-1];var r=new I(b[30]);for(i=1;i<30;++i)for(var n=b[i];n<b[i+1];++n)r[n]=n-b[i]<<5|i;return{b:b,r:r}},N=A(T,2),O=N.b,D=N.r;O[28]=258,D[258]=28;for(var P=A(x,0),R=P.b,S=(P.r,new k(32768)),F=0;F<32768;++F){var C=(43690&F)>>1|(21845&F)<<1;C=(61680&(C=(52428&C)>>2|(13107&C)<<2))>>4|(3855&C)<<4,S[F]=((65280&C)>>8|(255&C)<<8)>>1}var L=function(e,t,r){for(var s=e.length,i=0,n=new k(t);i<s;++i)e[i]&&++n[e[i]-1];var o,l=new k(t);for(i=1;i<t;++i)l[i]=l[i-1]+n[i-1]<<1;if(r){o=new k(1<<t);var c=15-t;for(i=0;i<s;++i)if(e[i])for(var v=i<<4|e[i],f=t-e[i],h=l[e[i]-1]++<<f,d=h|(1<<f)-1;h<=d;++h)o[S[h]>>c]=v}else for(o=new k(s),i=0;i<s;++i)e[i]&&(o[i]=S[l[e[i]-1]++]>>15-e[i]);return o},M=new w(288);for(F=0;F<144;++F)M[F]=8;for(F=144;F<256;++F)M[F]=9;for(F=256;F<280;++F)M[F]=7;for(F=280;F<288;++F)M[F]=8;var j=new w(32);for(F=0;F<32;++F)j[F]=5;var U=L(M,9,1),B=L(j,5,1),V=function(a){for(var e=a[0],i=1;i<a.length;++i)a[i]>e&&(e=a[i]);return e},z=function(e,p,t){var r=p/8|0;return(e[r]|e[r+1]<<8)>>(7&p)&t},X=function(e,p){var t=p/8|0;return(e[t]|e[t+1]<<8|e[t+2]<<16)>>(7&p)},G=function(p){return(p+7)/8|0},W=function(e,s,t){return(null==s||s<0)&&(s=0),(null==t||t>e.length)&&(t=e.length),new w(e.subarray(s,t))},_=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],H=function(e,t,r){var n=new Error(t||_[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,H),!r)throw n;return n},K=function(e,t,r,n){var o=e.length,dl=n?n.length:0;if(!o||t.f&&!t.l)return r||new w(0);var l=!r,c=l||2!=t.i,v=t.i;l&&(r=new w(3*o));var f=function(e){var t=r.length;if(e>t){var n=new w(Math.max(2*t,e));n.set(r),r=n}},h=t.f||0,d=t.p||0,m=t.b||0,y=t.l,k=t.d,I=t.m,A=t.n,N=8*o;do{if(!y){h=z(e,d,1);var D=z(e,d+1,3);if(d+=3,!D){var P=e[(s=G(d)+4)-4]|e[s-3]<<8,S=s+P;if(S>o){v&&H(0);break}c&&f(m+P),r.set(e.subarray(s,S),m),t.b=m+=P,t.p=d=8*S,t.f=h;continue}if(1==D)y=U,k=B,I=9,A=5;else if(2==D){var F=z(e,d,31)+257,C=z(e,d+10,15)+4,M=F+z(e,d+5,31)+1;d+=14;for(var j=new w(M),_=new w(19),i=0;i<C;++i)_[E[i]]=z(e,d+3*i,7);d+=3*C;var K=V(_),Y=(1<<K)-1,Z=L(_,K,1);for(i=0;i<M;){var s,J=Z[z(e,d,Y)];if(d+=15&J,(s=J>>4)<16)j[i++]=s;else{var $=0,Q=0;for(16==s?(Q=3+z(e,d,3),d+=2,$=j[i-1]):17==s?(Q=3+z(e,d,7),d+=3):18==s&&(Q=11+z(e,d,127),d+=7);Q--;)j[i++]=$}}var ee=j.subarray(0,F),dt=j.subarray(F);I=V(ee),A=V(dt),y=L(ee,I,1),k=L(dt,A,1)}else H(1);if(d>N){v&&H(0);break}}c&&f(m+131072);for(var te=(1<<I)-1,re=(1<<A)-1,ae=d;;ae=d){var ne=($=y[X(e,d)&te])>>4;if((d+=15&$)>N){v&&H(0);break}if($||H(2),ne<256)r[m++]=ne;else{if(256==ne){ae=d,y=null;break}var oe=ne-254;if(ne>264){var b=T[i=ne-257];oe=z(e,d,(1<<b)-1)+O[i],d+=b}var ie=k[X(e,d)&re],se=ie>>4;ie||H(3),d+=15&ie;dt=R[se];if(se>3){b=x[se];dt+=X(e,d)&(1<<b)-1,d+=b}if(d>N){v&&H(0);break}c&&f(m+131072);var le=m+oe;if(m<dt){var ue=dl-dt,ce=Math.min(dt,le);for(ue+m<0&&H(3);m<ce;++m)r[m]=n[ue+m]}for(;m<le;++m)r[m]=r[m-dt]}}t.l=y,t.p=ae,t.b=m,t.f=h,y&&(h=1,t.m=I,t.d=k,t.n=A)}while(!h);return m!=r.length&&l?W(r,0,m):r.subarray(0,m)},Y=new w(0),Z=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&H(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&H(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function J(data,e){return K(data.subarray(Z(data,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var td="undefined"!=typeof TextDecoder&&new TextDecoder;try{td.decode(Y,{stream:!0})}catch(e){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var $=r(405);r(313);function Q(p,u,e){var t=e.length-p-1;if(u>=e[t])return t-1;if(u<=e[p])return p;for(var r=p,n=t,o=Math.floor((r+n)/2);u<e[o]||u>=e[o+1];)u<e[o]?n=o:r=o,o=Math.floor((r+n)/2);return o}function ee(span,u,p,e){var t=[],r=[],n=[];t[0]=1;for(var o=1;o<=p;++o){r[o]=u-e[span+1-o],n[o]=e[span+o]-u;for(var l=0,c=0;c<o;++c){var v=n[c+1],f=r[o-c],h=t[c]/(v+f);t[c]=l+v*h,l=f*h}t[o]=l}return t}function te(e,i){for(var t=1,r=2;r<=e;++r)t*=r;for(var n=1,o=2;o<=i;++o)n*=o;for(var l=2;l<=e-i;++l)n*=l;return t/n}function re(p,e,t,u,r){var n=function(p,e,t,u,r){for(var n=r<p?r:p,o=[],span=Q(p,u,e),l=function(span,u,p,e,t){for(var r=[],i=0;i<=p;++i)r[i]=0;for(var n=[],o=0;o<=e;++o)n[o]=r.slice(0);for(var l=[],c=0;c<=p;++c)l[c]=r.slice(0);l[0][0]=1;for(var v=r.slice(0),f=r.slice(0),h=1;h<=p;++h){v[h]=u-t[span+1-h],f[h]=t[span+h]-u;for(var d=0,m=0;m<h;++m){var y=f[m+1],w=v[h-m];l[h][m]=y+w;var k=l[m][h-1]/l[h][m];l[m][h]=d+y*k,d=w*k}l[h][h]=d}for(var I=0;I<=p;++I)n[0][I]=l[I][p];for(var T=0;T<=p;++T){for(var x=0,E=1,a=[],A=0;A<=p;++A)a[A]=r.slice(0);a[0][0]=1;for(var N=1;N<=e;++N){var O=0,D=T-N,P=p-N;T>=N&&(a[E][0]=a[x][0]/l[P+1][D],O=a[E][0]*l[D][P]);for(var R=T-1<=P?N-1:p-T,S=D>=-1?1:-D;S<=R;++S)a[E][S]=(a[x][S]-a[x][S-1])/l[P+1][D+S],O+=a[E][S]*l[D+S][P];T<=P&&(a[E][N]=-a[x][N-1]/l[P+1][T],O+=a[E][N]*l[T][P]),n[N][T]=O;var F=x;x=E,E=F}}for(var C=p,L=1;L<=e;++L){for(var M=0;M<=p;++M)n[L][M]*=C;C*=p-L}return n}(span,u,p,n,e),c=[],i=0;i<t.length;++i){var v=t[i].clone(),f=v.w;v.x*=f,v.y*=f,v.z*=f,c[i]=v}for(var h=0;h<=n;++h){for(var d=c[span-p].clone().multiplyScalar(l[h][0]),m=1;m<=p;++m)d.add(c[span-p+m].clone().multiplyScalar(l[h][m]));o[h]=d}for(var w=n+1;w<=r+1;++w)o[w]=new y.Fh(0,0,0);return o}(p,e,t,u,r);return function(e){for(var t=e.length,r=[],n=[],i=0;i<t;++i){var o=e[i];r[i]=new y.Eh(o.x,o.y,o.z),n[i]=o.w}for(var l=[],c=0;c<t;++c){for(var v=r[c].clone(),f=1;f<=c;++f)v.sub(l[c-f].clone().multiplyScalar(te(c,f)*n[f]));l[c]=v.divideScalar(n[0])}return l}(n)}function ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ae=function(){return!!e})()}function ne(e,t,r,n){var p=Object($.a)(Object(d.a)(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof p?function(e){return p.apply(r,e)}:p}var oe,ie,se,le=function(e){function t(e,r,n,o,l){var c,f,m,w;Object(v.a)(this,t),f=this,m=t,m=Object(d.a)(m),c=Object(h.a)(f,ae()?Reflect.construct(m,w||[],Object(d.a)(f).constructor):m.apply(f,w));var k=r?r.length-1:0,I=n?n.length:0;c.degree=e,c.knots=r,c.controlPoints=[],c.startKnot=o||0,c.endKnot=l||k;for(var i=0;i<I;++i){var T=n[i];c.controlPoints[i]=new y.Fh(T.x,T.y,T.z,T.w)}return c}return Object(m.a)(t,e),Object(f.a)(t,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new y.Eh,u=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),r=function(p,e,t,u){for(var span=Q(p,u,e),r=ee(span,u,p,e),n=new y.Fh(0,0,0,0),o=0;o<=p;++o){var l=t[span-p+o],c=r[o],v=l.w*c;n.x+=l.x*v,n.y+=l.y*v,n.z+=l.z*v,n.w+=l.w*c}return n}(this.degree,this.knots,this.controlPoints,u);return 1!==r.w&&r.divideScalar(r.w),t.set(r.x,r.y,r.z)}},{key:"getTangent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new y.Eh,u=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),r=re(this.degree,this.knots,this.controlPoints,u,1);return t.copy(r[1]).normalize(),t}},{key:"toJSON",value:function(){var data=ne(t,"toJSON",this,3)([]);return data.degree=this.degree,data.knots=Object(o.a)(this.knots),data.controlPoints=this.controlPoints.map((function(p){return p.toArray()})),data.startKnot=this.startKnot,data.endKnot=this.endKnot,data}},{key:"fromJSON",value:function(e){return ne(t,"fromJSON",this,3)([e]),this.degree=e.degree,this.knots=Object(o.a)(e.knots),this.controlPoints=e.controlPoints.map((function(p){return new y.Fh(p[0],p[1],p[2],p[3])})),this.startKnot=e.startKnot,this.endKnot=e.endKnot,this}}])}(y.yb);function ue(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,a){if(e){if("string"==typeof e)return ce(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ce(e,a):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,l=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw l}}}}function ce(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=Array(a);t<a;t++)r[t]=e[t];return r}function ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ve=function(){return!!e})()}var fe=function(e){function t(e){return Object(v.a)(this,t),r=this,n=t,o=[e],n=Object(d.a)(n),Object(h.a)(r,ve()?Reflect.construct(n,o||[],Object(d.a)(r).constructor):n.apply(r,o));var r,n,o}return Object(m.a)(t,e),Object(f.a)(t,[{key:"load",value:function(e,t,r,n){var o=this,path=""===o.path?y.Hd.extractUrlBase(e):o.path,l=new y.kc(this.manager);l.setPath(o.path),l.setResponseType("arraybuffer"),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,(function(r){try{t(o.parse(r,path))}catch(t){n?n(t):console.error(t),o.manager.itemError(e)}}),r,n)}},{key:"parse",value:function(e,path){if(n="Kaydara FBX Binary  \0",(r=e).byteLength>=n.length&&n===De(r,0,n.length))oe=(new ge).parse(e);else{var t=De(e);if(!function(text){var e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],cursor=0;function t(e){var t=text[e-1];return text=text.slice(cursor+e),cursor++,t}for(var i=0;i<e.length;++i){if(t(1)===e[i])return!1}return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if(be(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+be(t));oe=(new me).parse(t)}var r,n,o=new y.eh(this.manager).setPath(this.resourcePath||path).setCrossOrigin(this.crossOrigin);return new pe(o,this.manager).parse(oe)}}])}(y.Gd),pe=function(){return Object(f.a)((function e(t,r){Object(v.a)(this,e),this.textureLoader=t,this.manager=r}),[{key:"parse",value:function(){ie=this.parseConnections();var e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),n=this.parseDeformers(),o=(new he).parse(n);return this.parseScene(n,o,r),se}},{key:"parseConnections",value:function(){var e=new Map;"Connections"in oe&&oe.Connections.connections.forEach((function(t){var r=t[0],n=t[1],o=t[2];e.has(r)||e.set(r,{parents:[],children:[]});var l={ID:n,relationship:o};e.get(r).parents.push(l),e.has(n)||e.set(n,{parents:[],children:[]});var c={ID:r,relationship:o};e.get(n).children.push(c)}));return e}},{key:"parseImages",value:function(){var e={},t={};if("Video"in oe.Objects){var r=oe.Objects.Video;for(var n in r){var o=r[n];if(e[parseInt(n)]=o.RelativeFilename||o.Filename,"Content"in o){var l=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,c="string"==typeof o.Content&&""!==o.Content;if(l||c){var image=this.parseImage(r[n]);t[o.RelativeFilename||o.Filename]=image}}}}for(var v in e){var f=e[v];void 0!==t[f]?e[v]=t[f]:e[v]=e[v].split("\\").pop()}return e}},{key:"parseImage",value:function(e){var t,content=e.Content,r=e.RelativeFilename||e.Filename,n=r.slice(r.lastIndexOf(".")+1).toLowerCase();switch(n){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",r),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+n+'" is not supported.')}if("string"==typeof content)return"data:"+t+";base64,"+content;var o=new Uint8Array(content);return window.URL.createObjectURL(new Blob([o],{type:t}))}},{key:"parseTextures",value:function(e){var t=new Map;if("Texture"in oe.Objects){var r=oe.Objects.Texture;for(var n in r){var o=this.parseTexture(r[n],e);t.set(parseInt(n),o)}}return t}},{key:"parseTexture",value:function(e,t){var r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;var n=e.WrapModeU,o=e.WrapModeV,l=void 0!==n?n.value:0,c=void 0!==o?o.value:0;if(r.wrapS=0===l?y.kg:y.Y,r.wrapT=0===c?y.kg:y.Y,"Scaling"in e){var v=e.Scaling.value;r.repeat.x=v[0],r.repeat.y=v[1]}if("Translation"in e){var f=e.Translation.value;r.offset.x=f[0],r.offset.y=f[1]}return r}},{key:"loadTexture",value:function(e,t){var r=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),n=e.FileName.split(".").pop().toLowerCase(),o=r.has(n)?this.manager.getHandler(".".concat(n)):this.textureLoader;if(!o)return console.warn("FBXLoader: ".concat(n.toUpperCase()," loader not found, creating placeholder texture for"),e.RelativeFilename),new y.dh;var l=o.path;l||o.setPath(this.textureLoader.path);var c,v=ie.get(e.id).children;void 0!==v&&v.length>0&&void 0!==t[v[0].ID]&&(0!==(c=t[v[0].ID]).indexOf("blob:")&&0!==c.indexOf("data:")||o.setPath(void 0));var f=o.load(c);return o.setPath(l),f}},{key:"parseMaterials",value:function(e){var t=new Map;if("Material"in oe.Objects){var r=oe.Objects.Material;for(var n in r){var o=this.parseMaterial(r[n],e);null!==o&&t.set(parseInt(n),o)}}return t}},{key:"parseMaterial",value:function(e,t){var r=e.id,n=e.attrName,o=e.ShadingModel;if("object"===Object(c.a)(o)&&(o=o.value),!ie.has(r))return null;var l,v=this.parseParameters(e,t,r);switch(o.toLowerCase()){case"phong":l=new y.de;break;case"lambert":l=new y.ae;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),l=new y.de}return l.setValues(v),l.name=n,l}},{key:"parseParameters",value:function(e,t,r){var n={};e.BumpFactor&&(n.bumpScale=e.BumpFactor.value),e.Diffuse?n.color=y.cb.toWorkingColorSpace((new y.ab).fromArray(e.Diffuse.value),y.qg):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(n.color=y.cb.toWorkingColorSpace((new y.ab).fromArray(e.DiffuseColor.value),y.qg)),e.DisplacementFactor&&(n.displacementScale=e.DisplacementFactor.value),e.Emissive?n.emissive=y.cb.toWorkingColorSpace((new y.ab).fromArray(e.Emissive.value),y.qg):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(n.emissive=y.cb.toWorkingColorSpace((new y.ab).fromArray(e.EmissiveColor.value),y.qg)),e.EmissiveFactor&&(n.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),n.opacity=1-(e.TransparencyFactor?parseFloat(e.TransparencyFactor.value):0),1!==n.opacity&&0!==n.opacity||(n.opacity=e.Opacity?parseFloat(e.Opacity.value):null,null===n.opacity&&(n.opacity=1-(e.TransparentColor?parseFloat(e.TransparentColor.value[0]):0))),n.opacity<1&&(n.transparent=!0),e.ReflectionFactor&&(n.reflectivity=e.ReflectionFactor.value),e.Shininess&&(n.shininess=e.Shininess.value),e.Specular?n.specular=y.cb.toWorkingColorSpace((new y.ab).fromArray(e.Specular.value),y.qg):e.SpecularColor&&"Color"===e.SpecularColor.type&&(n.specular=y.cb.toWorkingColorSpace((new y.ab).fromArray(e.SpecularColor.value),y.qg));var o=this;return ie.get(r).children.forEach((function(e){var r=e.relationship;switch(r){case"Bump":n.bumpMap=o.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":n.aoMap=o.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":n.map=o.getTexture(t,e.ID),void 0!==n.map&&(n.map.colorSpace=y.qg);break;case"DisplacementColor":n.displacementMap=o.getTexture(t,e.ID);break;case"EmissiveColor":n.emissiveMap=o.getTexture(t,e.ID),void 0!==n.emissiveMap&&(n.emissiveMap.colorSpace=y.qg);break;case"NormalMap":case"Maya|TEX_normal_map":n.normalMap=o.getTexture(t,e.ID);break;case"ReflectionColor":n.envMap=o.getTexture(t,e.ID),void 0!==n.envMap&&(n.envMap.mapping=y.fc,n.envMap.colorSpace=y.qg);break;case"SpecularColor":n.specularMap=o.getTexture(t,e.ID),void 0!==n.specularMap&&(n.specularMap.colorSpace=y.qg);break;case"TransparentColor":case"TransparencyFactor":n.alphaMap=o.getTexture(t,e.ID),n.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",r)}})),n}},{key:"getTexture",value:function(e,t){return"LayeredTexture"in oe.Objects&&t in oe.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=ie.get(t).children[0].ID),e.get(t)}},{key:"parseDeformers",value:function(){var e={},t={};if("Deformer"in oe.Objects){var r=oe.Objects.Deformer;for(var n in r){var o=r[n],l=ie.get(parseInt(n));if("Skin"===o.attrType){var c=this.parseSkeleton(l,r);c.ID=n,l.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),c.geometryID=l.parents[0].ID,e[n]=c}else if("BlendShape"===o.attrType){var v={id:n};v.rawTargets=this.parseMorphTargets(l,r),v.id=n,l.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[n]=v}}}return{skeletons:e,morphTargets:t}}},{key:"parseSkeleton",value:function(e,t){var r=[];return e.children.forEach((function(e){var n=t[e.ID];if("Cluster"===n.attrType){var o={ID:e.ID,indices:[],weights:[],transformLink:(new y.Ud).fromArray(n.TransformLink.a)};"Indexes"in n&&(o.indices=n.Indexes.a,o.weights=n.Weights.a),r.push(o)}})),{rawBones:r,bones:[]}}},{key:"parseMorphTargets",value:function(e,t){for(var r=[],i=0;i<e.children.length;i++){var n=e.children[i],o=t[n.ID],l={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;l.geoID=ie.get(parseInt(n.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,r.push(l)}return r}},{key:"parseScene",value:function(e,t,r){se=new y.Dc;var n=this.parseModels(e.skeletons,t,r),o=oe.Objects.Model,l=this;n.forEach((function(e){var t=o[e.ID];l.setLookAtProperties(e,t),ie.get(e.ID).parents.forEach((function(t){var r=n.get(t.ID);void 0!==r&&r.add(e)})),null===e.parent&&se.add(e)})),this.bindSkeleton(e.skeletons,t,n),this.addGlobalSceneSettings(),se.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);var t=Ae(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));var c=(new de).parse();1===se.children.length&&se.children[0].isGroup&&(se.children[0].animations=c,se=se.children[0]),se.animations=c}},{key:"parseModels",value:function(e,t,r){var n=new Map,o=oe.Objects.Model;for(var l in o){var c=parseInt(l),v=o[l],f=ie.get(c),h=this.buildSkeleton(f,e,c,v.attrName);if(!h){switch(v.attrType){case"Camera":h=this.createCamera(f);break;case"Light":h=this.createLight(f);break;case"Mesh":h=this.createMesh(f,t,r);break;case"NurbsCurve":h=this.createCurve(f,t);break;case"LimbNode":case"Root":h=new y.F;break;default:h=new y.Dc}h.name=v.attrName?y.ef.sanitizeNodeName(v.attrName):"",h.userData.originalName=v.attrName,h.ID=c}this.getTransformData(h,v),n.set(c,h)}return n}},{key:"buildSkeleton",value:function(e,t,r,n){var o=null;return e.parents.forEach((function(e){var l=function(){var l=t[c];l.rawBones.forEach((function(t,i){if(t.ID===e.ID){var c=o;(o=new y.F).matrixWorld.copy(t.transformLink),o.name=n?y.ef.sanitizeNodeName(n):"",o.userData.originalName=n,o.ID=r,l.bones[i]=o,null!==c&&o.add(c)}}))};for(var c in t)l()})),o}},{key:"createCamera",value:function(e){var t,r;if(e.children.forEach((function(e){var t=oe.Objects.NodeAttribute[e.ID];void 0!==t&&(r=t)})),void 0===r)t=new y.Ee;else{var n=0;void 0!==r.CameraProjectionType&&1===r.CameraProjectionType.value&&(n=1);var o=1;void 0!==r.NearPlane&&(o=r.NearPlane.value/1e3);var l=1e3;void 0!==r.FarPlane&&(l=r.FarPlane.value/1e3);var c=window.innerWidth,v=window.innerHeight;void 0!==r.AspectWidth&&void 0!==r.AspectHeight&&(c=r.AspectWidth.value,v=r.AspectHeight.value);var f=c/v,h=45;void 0!==r.FieldOfView&&(h=r.FieldOfView.value);var d=r.FocalLength?r.FocalLength.value:null;switch(n){case 0:t=new y.Te(h,f,o,l),null!==d&&t.setFocalLength(d);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),t=new y.Ee;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+n+"."),t=new y.Ee}}return t}},{key:"createLight",value:function(e){var t,r;if(e.children.forEach((function(e){var t=oe.Objects.NodeAttribute[e.ID];void 0!==t&&(r=t)})),void 0===r)t=new y.Ee;else{var n;n=void 0===r.LightType?0:r.LightType.value;var o=16777215;void 0!==r.Color&&(o=y.cb.toWorkingColorSpace((new y.ab).fromArray(r.Color.value),y.qg));var l=void 0===r.Intensity?1:r.Intensity.value/100;void 0!==r.CastLightOnObject&&0===r.CastLightOnObject.value&&(l=0);var c=0;void 0!==r.FarAttenuationEnd&&(c=void 0!==r.EnableFarAttenuation&&0===r.EnableFarAttenuation.value?0:r.FarAttenuationEnd.value);switch(n){case 0:t=new y.Xe(o,l,c,1);break;case 1:t=new y.Qb(o,l);break;case 2:var v=Math.PI/3;void 0!==r.InnerAngle&&(v=y.Rd.degToRad(r.InnerAngle.value));var f=0;void 0!==r.OuterAngle&&(f=y.Rd.degToRad(r.OuterAngle.value),f=Math.max(f,1)),t=new y.Jg(o,l,c,v,f,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new y.Xe(o,l)}void 0!==r.CastShadows&&1===r.CastShadows.value&&(t.castShadow=!0)}return t}},{key:"createMesh",value:function(e,t,r){var n,o=null,l=null,c=[];return e.children.forEach((function(e){t.has(e.ID)&&(o=t.get(e.ID)),r.has(e.ID)&&c.push(r.get(e.ID))})),c.length>1?l=c:c.length>0?l=c[0]:(l=new y.de({name:y.Gd.DEFAULT_MATERIAL_NAME,color:13421772}),c.push(l)),"color"in o.attributes&&c.forEach((function(e){e.vertexColors=!0})),o.FBX_Deformer?(n=new y.Cg(o,l)).normalizeSkinWeights():n=new y.Wd(o,l),n}},{key:"createCurve",value:function(e,t){var r=e.children.reduce((function(e,r){return t.has(r.ID)&&(e=t.get(r.ID)),e}),null),n=new y.rd({name:y.Gd.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new y.pd(r,n)}},{key:"getTransformData",value:function(e,t){var r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),r.eulerOrder=Ne("RotationOrder"in t?t.RotationOrder.value:0),"Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}},{key:"setLookAtProperties",value:function(e,t){"LookAtProperty"in t&&ie.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){var r=oe.Objects.Model[t.ID];if("Lcl_Translation"in r){var n=r.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(n),se.add(e.target)):e.lookAt((new y.Eh).fromArray(n))}}}))}},{key:"bindSkeleton",value:function(e,t,r){var n=this.parsePoseNodes(),o=function(){var o=e[l];ie.get(parseInt(o.ID)).parents.forEach((function(e){if(t.has(e.ID)){var l=e.ID;ie.get(l).parents.forEach((function(e){r.has(e.ID)&&r.get(e.ID).bind(new y.Ag(o.bones),n[e.ID])}))}}))};for(var l in e)o()}},{key:"parsePoseNodes",value:function(){var e={};if("Pose"in oe.Objects){var t=oe.Objects.Pose;for(var r in t)if("BindPose"===t[r].attrType&&t[r].NbPoseNodes>0){var n=t[r].PoseNode;Array.isArray(n)?n.forEach((function(t){e[t.Node]=(new y.Ud).fromArray(t.Matrix.a)})):e[n.Node]=(new y.Ud).fromArray(n.Matrix.a)}}return e}},{key:"addGlobalSceneSettings",value:function(){if("GlobalSettings"in oe){if("AmbientColor"in oe.GlobalSettings){var e=oe.GlobalSettings.AmbientColor.value,t=e[0],g=e[1],b=e[2];if(0!==t||0!==g||0!==b){var r=(new y.ab).setRGB(t,g,b,y.qg);se.add(new y.k(r,1))}}"UnitScaleFactor"in oe.GlobalSettings&&(se.userData.unitScaleFactor=oe.GlobalSettings.UnitScaleFactor.value)}}}])}(),he=function(){return Object(f.a)((function e(){Object(v.a)(this,e),this.negativeMaterialIndices=!1}),[{key:"parse",value:function(e){var t=new Map;if("Geometry"in oe.Objects){var r=oe.Objects.Geometry;for(var n in r){var o=ie.get(parseInt(n)),l=this.parseGeometry(o,r[n],e);t.set(parseInt(n),l)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}},{key:"parseGeometry",value:function(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}},{key:"parseMeshGeometry",value:function(e,t,r){var n=r.skeletons,o=[],l=e.parents.map((function(e){return oe.Objects.Model[e.ID]}));if(0!==l.length){var c=e.children.reduce((function(e,t){return void 0!==n[t.ID]&&(e=n[t.ID]),e}),null);e.children.forEach((function(e){void 0!==r.morphTargets[e.ID]&&o.push(r.morphTargets[e.ID])}));var v=l[0],f={};"RotationOrder"in v&&(f.eulerOrder=Ne(v.RotationOrder.value)),"InheritType"in v&&(f.inheritType=parseInt(v.InheritType.value)),"GeometricTranslation"in v&&(f.translation=v.GeometricTranslation.value),"GeometricRotation"in v&&(f.rotation=v.GeometricRotation.value),"GeometricScaling"in v&&(f.scale=v.GeometricScaling.value);var h=Ae(f);return this.genGeometry(t,c,o,h)}}},{key:"genGeometry",value:function(e,t,r,n){var o=new y.N;e.attrName&&(o.name=e.attrName);var l=this.parseGeoNode(e,t),c=this.genBuffers(l),v=new y.mc(c.vertex,3);if(v.applyMatrix4(n),o.setAttribute("position",v),c.colors.length>0&&o.setAttribute("color",new y.mc(c.colors,3)),t&&(o.setAttribute("skinIndex",new y.oh(c.weightsIndices,4)),o.setAttribute("skinWeight",new y.mc(c.vertexWeights,4)),o.FBX_Deformer=t),c.normal.length>0){var f=(new y.Td).getNormalMatrix(n),h=new y.mc(c.normal,3);h.applyNormalMatrix(f),o.setAttribute("normal",h)}if(c.uvs.forEach((function(e,i){var t=0===i?"uv":"uv".concat(i);o.setAttribute(t,new y.mc(c.uvs[i],2))})),l.material&&"AllSame"!==l.material.mappingType){var d=c.materialIndex[0],m=0;if(c.materialIndex.forEach((function(e,i){e!==d&&(o.addGroup(m,i-m,d),d=e,m=i)})),o.groups.length>0){var w=o.groups[o.groups.length-1],k=w.start+w.count;k!==c.materialIndex.length&&o.addGroup(k,c.materialIndex.length-k,d)}0===o.groups.length&&o.addGroup(0,c.materialIndex.length,c.materialIndex[0])}return this.addMorphTargets(o,e,r,n),o}},{key:"parseGeoNode",value:function(e,t){var r={};if(r.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],r.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];for(var i=0;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},null!==t&&(r.skeleton=t,t.rawBones.forEach((function(e,i){e.indices.forEach((function(t,n){void 0===r.weightTable[t]&&(r.weightTable[t]=[]),r.weightTable[t].push({id:i,weight:e.weights[n]})}))}))),r}},{key:"genBuffers",value:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},r=0,n=0,o=!1,l=[],c=[],v=[],f=[],h=[],d=[],m=this;return e.vertexIndices.forEach((function(y,w){var k,I=!1;y<0&&(y=~y,I=!0);var T=[],x=[];if(l.push(3*y,3*y+1,3*y+2),e.color){var data=Te(w,r,y,e.color);v.push(data[0],data[1],data[2])}if(e.skeleton){if(void 0!==e.weightTable[y]&&e.weightTable[y].forEach((function(e){x.push(e.weight),T.push(e.id)})),x.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);var E=[0,0,0,0],A=[0,0,0,0];x.forEach((function(e,t){var r=e,n=T[t];A.forEach((function(e,t,o){if(r>e){o[t]=r,r=e;var l=E[t];E[t]=n,n=l}}))})),T=E,x=A}for(;x.length<4;)x.push(0),T.push(0);for(var i=0;i<4;++i)h.push(x[i]),d.push(T[i])}if(e.normal){var N=Te(w,r,y,e.normal);c.push(N[0],N[1],N[2])}e.material&&"AllSame"!==e.material.mappingType&&(k=Te(w,r,y,e.material)[0])<0&&(m.negativeMaterialIndices=!0,k=0),e.uv&&e.uv.forEach((function(e,i){var data=Te(w,r,y,e);void 0===f[i]&&(f[i]=[]),f[i].push(data[0]),f[i].push(data[1])})),n++,I&&(m.genFace(t,e,l,k,c,v,f,h,d,n),r++,n=0,l=[],c=[],v=[],f=[],h=[],d=[])})),t}},{key:"getNormalNewell",value:function(e){for(var t=new y.Eh(0,0,0),i=0;i<e.length;i++){var r=e[i],n=e[(i+1)%e.length];t.x+=(r.y-n.y)*(r.z+n.z),t.y+=(r.z-n.z)*(r.x+n.x),t.z+=(r.x-n.x)*(r.y+n.y)}return t.normalize(),t}},{key:"getNormalTangentAndBitangent",value:function(e){var t=this.getNormalNewell(e),r=(Math.abs(t.z)>.5?new y.Eh(0,1,0):new y.Eh(0,0,1)).cross(t).normalize(),n=t.clone().cross(r).normalize();return{normal:t,tangent:r,bitangent:n}}},{key:"flattenVertex",value:function(e,t,r){return new y.Dh(e.dot(t),e.dot(r))}},{key:"genFace",value:function(e,t,r,n,o,c,v,f,h,d){var m;if(d>3){for(var w=[],k=t.baseVertexPositions||t.vertexPositions,i=0;i<r.length;i+=3)w.push(new y.Eh(k[r[i]],k[r[i+1]],k[r[i+2]]));for(var I=this.getNormalTangentAndBitangent(w),T=I.tangent,x=I.bitangent,E=[],A=0,N=w;A<N.length;A++){var O=N[A];E.push(this.flattenVertex(O,T,x))}m=y.yg.triangulateShape(E,[])}else m=[[0,1,2]];var D,P=ue(m);try{var R=function(){var d=Object(l.a)(D.value,3),m=d[0],y=d[1],w=d[2];e.vertex.push(t.vertexPositions[r[3*m]]),e.vertex.push(t.vertexPositions[r[3*m+1]]),e.vertex.push(t.vertexPositions[r[3*m+2]]),e.vertex.push(t.vertexPositions[r[3*y]]),e.vertex.push(t.vertexPositions[r[3*y+1]]),e.vertex.push(t.vertexPositions[r[3*y+2]]),e.vertex.push(t.vertexPositions[r[3*w]]),e.vertex.push(t.vertexPositions[r[3*w+1]]),e.vertex.push(t.vertexPositions[r[3*w+2]]),t.skeleton&&(e.vertexWeights.push(f[4*m]),e.vertexWeights.push(f[4*m+1]),e.vertexWeights.push(f[4*m+2]),e.vertexWeights.push(f[4*m+3]),e.vertexWeights.push(f[4*y]),e.vertexWeights.push(f[4*y+1]),e.vertexWeights.push(f[4*y+2]),e.vertexWeights.push(f[4*y+3]),e.vertexWeights.push(f[4*w]),e.vertexWeights.push(f[4*w+1]),e.vertexWeights.push(f[4*w+2]),e.vertexWeights.push(f[4*w+3]),e.weightsIndices.push(h[4*m]),e.weightsIndices.push(h[4*m+1]),e.weightsIndices.push(h[4*m+2]),e.weightsIndices.push(h[4*m+3]),e.weightsIndices.push(h[4*y]),e.weightsIndices.push(h[4*y+1]),e.weightsIndices.push(h[4*y+2]),e.weightsIndices.push(h[4*y+3]),e.weightsIndices.push(h[4*w]),e.weightsIndices.push(h[4*w+1]),e.weightsIndices.push(h[4*w+2]),e.weightsIndices.push(h[4*w+3])),t.color&&(e.colors.push(c[3*m]),e.colors.push(c[3*m+1]),e.colors.push(c[3*m+2]),e.colors.push(c[3*y]),e.colors.push(c[3*y+1]),e.colors.push(c[3*y+2]),e.colors.push(c[3*w]),e.colors.push(c[3*w+1]),e.colors.push(c[3*w+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(n),e.materialIndex.push(n),e.materialIndex.push(n)),t.normal&&(e.normal.push(o[3*m]),e.normal.push(o[3*m+1]),e.normal.push(o[3*m+2]),e.normal.push(o[3*y]),e.normal.push(o[3*y+1]),e.normal.push(o[3*y+2]),e.normal.push(o[3*w]),e.normal.push(o[3*w+1]),e.normal.push(o[3*w+2])),t.uv&&t.uv.forEach((function(t,r){void 0===e.uvs[r]&&(e.uvs[r]=[]),e.uvs[r].push(v[r][2*m]),e.uvs[r].push(v[r][2*m+1]),e.uvs[r].push(v[r][2*y]),e.uvs[r].push(v[r][2*y+1]),e.uvs[r].push(v[r][2*w]),e.uvs[r].push(v[r][2*w+1])}))};for(P.s();!(D=P.n()).done;)R()}catch(e){P.e(e)}finally{P.f()}}},{key:"addMorphTargets",value:function(e,t,r,n){if(0!==r.length){e.morphTargetsRelative=!0,e.morphAttributes.position=[];var o=this;r.forEach((function(r){r.rawTargets.forEach((function(r){var l=oe.Objects.Geometry[r.geoID];void 0!==l&&o.genMorphGeometry(e,t,l,n,r.name)}))}))}}},{key:"genMorphGeometry",value:function(e,t,r,n,o){for(var l=void 0!==t.Vertices?t.Vertices.a:[],c=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],v=void 0!==r.Vertices?r.Vertices.a:[],f=void 0!==r.Indexes?r.Indexes.a:[],h=3*e.attributes.position.count,d=new Float32Array(h),i=0;i<f.length;i++){var m=3*f[i];d[m]=v[3*i],d[m+1]=v[3*i+1],d[m+2]=v[3*i+2]}var w={vertexIndices:c,vertexPositions:d,baseVertexPositions:l},k=this.genBuffers(w),I=new y.mc(k.vertex,3);I.name=o||r.attrName,I.applyMatrix4(n),e.morphAttributes.position.push(I)}},{key:"parseNormals",value:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.Normals.a,o=[];return"IndexToDirect"===r&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:n,indices:o,mappingType:t,referenceType:r}}},{key:"parseUVs",value:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.UV.a,o=[];return"IndexToDirect"===r&&(o=e.UVIndex.a),{dataSize:2,buffer:n,indices:o,mappingType:t,referenceType:r}}},{key:"parseVertexColors",value:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.Colors.a,o=[];"IndexToDirect"===r&&(o=e.ColorIndex.a);for(var i=0,l=new y.ab;i<n.length;i+=4)l.fromArray(n,i),y.cb.toWorkingColorSpace(l,y.qg),l.toArray(n,i);return{dataSize:4,buffer:n,indices:o,mappingType:t,referenceType:r}}},{key:"parseMaterialIndices",value:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};for(var n=e.Materials.a,o=[],i=0;i<n.length;++i)o.push(i);return{dataSize:1,buffer:n,indices:o,mappingType:t,referenceType:r}}},{key:"parseNurbsGeometry",value:function(e){var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new y.N;for(var r,n,o=t-1,l=e.KnotVector.a,c=[],v=e.Points.a,i=0,f=v.length;i<f;i+=4)c.push((new y.Fh).fromArray(v,i));if("Closed"===e.Form)c.push(c[0]);else if("Periodic"===e.Form){r=o,n=l.length-1-r;for(var h=0;h<o;++h)c.push(c[h])}var d=new le(o,l,c,r,n).getPoints(12*c.length);return(new y.N).setFromPoints(d)}}])}(),de=function(){return Object(f.a)((function e(){Object(v.a)(this,e)}),[{key:"parse",value:function(){var e=[],t=this.parseClips();if(void 0!==t)for(var r in t){var n=t[r],o=this.addClip(n);e.push(o)}return e}},{key:"parseClips",value:function(){if(void 0!==oe.Objects.AnimationCurve){var e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);var t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}}},{key:"parseAnimationCurveNodes",value:function(){var e=oe.Objects.AnimationCurveNode,t=new Map;for(var r in e){var n=e[r];if(null!==n.attrName.match(/S|R|T|DeformPercent/)){var o={id:n.id,attr:n.attrName,curves:{}};t.set(o.id,o)}}return t}},{key:"parseAnimationCurves",value:function(e){var t=oe.Objects.AnimationCurve;for(var r in t){var n={id:t[r].id,times:t[r].KeyTime.a.map(ke),values:t[r].KeyValueFloat.a},o=ie.get(n.id);if(void 0!==o){var l=o.parents[0].ID,c=o.parents[0].relationship;c.match(/X/)?e.get(l).curves.x=n:c.match(/Y/)?e.get(l).curves.y=n:c.match(/Z/)?e.get(l).curves.z=n:c.match(/DeformPercent/)&&e.has(l)&&(e.get(l).curves.morph=n)}}}},{key:"parseAnimationLayers",value:function(e){var t=oe.Objects.AnimationLayer,r=new Map,n=function(){var t=[],n=ie.get(parseInt(o));void 0!==n&&(n.children.forEach((function(r,i){if(e.has(r.ID)){var n=e.get(r.ID);if(void 0!==n.curves.x||void 0!==n.curves.y||void 0!==n.curves.z){if(void 0===t[i]){var o=ie.get(r.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==o){var l=oe.Objects.Model[o.toString()];if(void 0===l)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",r);var c={modelName:l.attrName?y.ef.sanitizeNodeName(l.attrName):"",ID:l.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};se.traverse((function(e){e.ID===l.id&&(c.transform=e.matrix,e.userData.transformData&&(c.eulerOrder=e.userData.transformData.eulerOrder))})),c.transform||(c.transform=new y.Ud),"PreRotation"in l&&(c.preRotation=l.PreRotation.value),"PostRotation"in l&&(c.postRotation=l.PostRotation.value),t[i]=c}}t[i]&&(t[i][n.attr]=n)}else if(void 0!==n.curves.morph){if(void 0===t[i]){var v=ie.get(r.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,f=ie.get(v).parents[0].ID,h=ie.get(f).parents[0].ID,d=ie.get(h).parents[0].ID,m=oe.Objects.Model[d],w={modelName:m.attrName?y.ef.sanitizeNodeName(m.attrName):"",morphName:oe.Objects.Deformer[v].attrName};t[i]=w}t[i][n.attr]=n}}})),r.set(parseInt(o),t))};for(var o in t)n();return r}},{key:"parseAnimStacks",value:function(e){var t=oe.Objects.AnimationStack,r={};for(var n in t){var o=ie.get(parseInt(n)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var l=e.get(o[0].ID);r[n]={name:t[n].attrName,layer:l}}return r}},{key:"addClip",value:function(e){var t=[],r=this;return e.layer.forEach((function(e){t=t.concat(r.generateTracks(e))})),new y.m(e.name,-1,t)}},{key:"generateTracks",value:function(e){var t=[],r=new y.Eh,n=new y.Eh;if(e.transform&&e.transform.decompose(r,new y.if,n),r=r.toArray(),n=n.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var o=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");void 0!==o&&t.push(o)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var l=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);void 0!==l&&t.push(l)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var c=this.generateVectorTrack(e.modelName,e.S.curves,n,"scale");void 0!==c&&t.push(c)}if(void 0!==e.DeformPercent){var v=this.generateMorphTrack(e);void 0!==v&&t.push(v)}return t}},{key:"generateVectorTrack",value:function(e,t,r,n){var o=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(o,t,r);return new y.Gh(e+"."+n,o,l)}},{key:"generateRotationTrack",value:function(e,t,r,n,o){var l,c;if(void 0!==t.x&&void 0!==t.y&&void 0!==t.z){var v=this.interpolateRotations(t.x,t.y,t.z,o);l=v[0],c=v[1]}var f=Ne(0);void 0!==r&&((r=r.map(y.Rd.degToRad)).push(f),r=(new y.hc).fromArray(r),r=(new y.if).setFromEuler(r)),void 0!==n&&((n=n.map(y.Rd.degToRad)).push(f),n=(new y.hc).fromArray(n),n=(new y.if).setFromEuler(n).invert());var h=new y.if,d=new y.hc,m=[];if(!c||!l)return new y.jf(e+".quaternion",[0],[0]);for(var i=0;i<c.length;i+=3){if(d.set(c[i],c[i+1],c[i+2],o),h.setFromEuler(d),void 0!==r&&h.premultiply(r),void 0!==n&&h.multiply(n),i>2)(new y.if).fromArray(m,(i-3)/3*4).dot(h)<0&&h.set(-h.x,-h.y,-h.z,-h.w);h.toArray(m,i/3*4)}return new y.jf(e+".quaternion",l,m)}},{key:"generateMorphTrack",value:function(e){var t=e.DeformPercent.curves.morph,r=t.values.map((function(e){return e/100})),n=se.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new y.De(e.modelName+".morphTargetInfluences["+n+"]",t.times,r)}},{key:"getTimesForAllAxes",value:function(e){var t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),(t=t.sort((function(a,b){return a-b}))).length>1){for(var r=1,n=t[0],i=1;i<t.length;i++){var o=t[i];o!==n&&(t[r]=o,n=o,r++)}t=t.slice(0,r)}return t}},{key:"getKeyframeTrackValues",value:function(e,t,r){var n=r,o=[],l=-1,c=-1,v=-1;return e.forEach((function(time){if(t.x&&(l=t.x.times.indexOf(time)),t.y&&(c=t.y.times.indexOf(time)),t.z&&(v=t.z.times.indexOf(time)),-1!==l){var e=t.x.values[l];o.push(e),n[0]=e}else o.push(n[0]);if(-1!==c){var r=t.y.values[c];o.push(r),n[1]=r}else o.push(n[1]);if(-1!==v){var f=t.z.values[v];o.push(f),n[2]=f}else o.push(n[2])})),o}},{key:"interpolateRotations",value:function(e,t,r,l){var c=[],v=[];c.push(e.times[0]),v.push(y.Rd.degToRad(e.values[0])),v.push(y.Rd.degToRad(t.values[0])),v.push(y.Rd.degToRad(r.values[0]));for(var i=1;i<e.values.length;i++){var f=[e.values[i-1],t.values[i-1],r.values[i-1]];if(!(isNaN(f[0])||isNaN(f[1])||isNaN(f[2]))){var h=f.map(y.Rd.degToRad),d=[e.values[i],t.values[i],r.values[i]];if(!(isNaN(d[0])||isNaN(d[1])||isNaN(d[2]))){var m=d.map(y.Rd.degToRad),w=[d[0]-f[0],d[1]-f[1],d[2]-f[2]],k=[Math.abs(w[0]),Math.abs(w[1]),Math.abs(w[2])];if(k[0]>=180||k[1]>=180||k[2]>=180){var I=Math.max.apply(Math,k)/180,T=Object(n.a)(y.hc,Object(o.a)(h).concat([l])),x=Object(n.a)(y.hc,Object(o.a)(m).concat([l])),E=(new y.if).setFromEuler(T),A=(new y.if).setFromEuler(x);E.dot(A)&&A.set(-A.x,-A.y,-A.z,-A.w);for(var N=e.times[i-1],O=e.times[i]-N,D=new y.if,P=new y.hc,R=0;R<1;R+=1/I)D.copy(E.clone().slerp(A.clone(),R)),c.push(N+R*O),P.setFromQuaternion(D,l),v.push(P.x),v.push(P.y),v.push(P.z)}else c.push(e.times[i]),v.push(y.Rd.degToRad(e.values[i])),v.push(y.Rd.degToRad(t.values[i])),v.push(y.Rd.degToRad(r.values[i]))}}}return[c,v]}}])}(),me=function(){return Object(f.a)((function e(){Object(v.a)(this,e)}),[{key:"getPrevNode",value:function(){return this.nodeStack[this.currentIndent-2]}},{key:"getCurrentNode",value:function(){return this.nodeStack[this.currentIndent-1]}},{key:"getCurrentProp",value:function(){return this.currentProp}},{key:"pushStack",value:function(e){this.nodeStack.push(e),this.currentIndent+=1}},{key:"popStack",value:function(){this.nodeStack.pop(),this.currentIndent-=1}},{key:"setCurrentProp",value:function(e,t){this.currentProp=e,this.currentPropName=t}},{key:"parse",value:function(text){this.currentIndent=0,this.allNodes=new we,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var e=this,t=text.split(/[\r\n]+/);return t.forEach((function(line,i){var r=line.match(/^[\s\t]*;/),n=line.match(/^[\s\t]*$/);if(!r&&!n){var o=line.match("^\\t{"+e.currentIndent+"}(\\w+):(.*){",""),l=line.match("^\\t{"+e.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=line.match("^\\t{"+(e.currentIndent-1)+"}}");o?e.parseNodeBegin(line,o):l?e.parseNodeProperty(line,l,t[++i]):c?e.popStack():line.match(/^[^\s\t}]/)&&e.parseNodePropertyContinued(line)}})),this.allNodes}},{key:"parseNodeBegin",value:function(line,e){var t=e[1].trim().replace(/^"/,"").replace(/"$/,""),r=e[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),n={name:t},o=this.parseNodeAttr(r),l=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(t,n):t in l?("PoseNode"===t?l.PoseNode.push(n):void 0!==l[t].id&&(l[t]={},l[t][l[t].id]=l[t]),""!==o.id&&(l[t][o.id]=n)):"number"==typeof o.id?(l[t]={},l[t][o.id]=n):"Properties70"!==t&&(l[t]="PoseNode"===t?[n]:n),"number"==typeof o.id&&(n.id=o.id),""!==o.name&&(n.attrName=o.name),""!==o.type&&(n.attrType=o.type),this.pushStack(n)}},{key:"parseNodeAttr",value:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var r="",n="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:r,type:n}}},{key:"parseNodeProperty",value:function(line,e,t){var r=e[1].replace(/^"/,"").replace(/"$/,"").trim(),n=e[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===n&&(n=t.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){var l=n.split(",").slice(1),c=parseInt(l[0]),v=parseInt(l[1]),f=n.split(",").slice(3);r="connections",function(a,b){for(var i=0,e=a.length,t=b.length;i<t;i++,e++)a[e]=b[i]}(n=[c,v],f=f.map((function(e){return e.trim().replace(/^"/,"")}))),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=n),r in o&&Array.isArray(o[r])?o[r].push(n):"a"!==r?o[r]=n:o.a=n,this.setCurrentProp(o,r),"a"===r&&","!==n.slice(-1)&&(o.a=Oe(n))}else this.parseNodeSpecialProperty(line,r,n)}},{key:"parseNodePropertyContinued",value:function(line){var e=this.getCurrentNode();e.a+=line,","!==line.slice(-1)&&(e.a=Oe(e.a))}},{key:"parseNodeSpecialProperty",value:function(line,e,t){var r=t.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),n=r[0],o=r[1],l=r[2],c=r[3],v=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":v=parseFloat(v);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":v=Oe(v)}this.getPrevNode()[n]={type:o,type2:l,flag:c,value:v},this.setCurrentProp(this.getPrevNode(),n)}}])}(),ge=function(){return Object(f.a)((function e(){Object(v.a)(this,e)}),[{key:"parse",value:function(e){var t=new ye(e);t.skip(23);var r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);for(var n=new we;!this.endOfContent(t);){var o=this.parseNode(t,r);null!==o&&n.add(o.name,o)}return n}},{key:"endOfContent",value:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}},{key:"parseNode",value:function(e,t){var r={},n=t>=7500?e.getUint64():e.getUint32(),o=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();var l=e.getUint8(),c=e.getString(l);if(0===n)return null;for(var v=[],i=0;i<o;i++)v.push(this.parseProperty(e));var f=v.length>0?v[0]:"",h=v.length>1?v[1]:"",d=v.length>2?v[2]:"";for(r.singleProperty=1===o&&e.getOffset()===n;n>e.getOffset();){var m=this.parseNode(e,t);null!==m&&this.parseSubNode(c,r,m)}return r.propertyList=v,"number"==typeof f&&(r.id=f),""!==h&&(r.attrName=h),""!==d&&(r.attrType=d),""!==c&&(r.name=c),r}},{key:"parseSubNode",value:function(e,t,r){if(!0===r.singleProperty){var n=r.propertyList[0];Array.isArray(n)?(t[r.name]=r,r.a=n):t[r.name]=n}else if("Connections"===e&&"C"===r.name){var o=[];r.propertyList.forEach((function(e,i){0!==i&&o.push(e)})),void 0===t.connections&&(t.connections=[]),t.connections.push(o)}else if("Properties70"===r.name){Object.keys(r).forEach((function(e){t[e]=r[e]}))}else if("Properties70"===e&&"P"===r.name){var l,c=r.propertyList[0],v=r.propertyList[1],f=r.propertyList[2],h=r.propertyList[3];0===c.indexOf("Lcl ")&&(c=c.replace("Lcl ","Lcl_")),0===v.indexOf("Lcl ")&&(v=v.replace("Lcl ","Lcl_")),l="Color"===v||"ColorRGB"===v||"Vector"===v||"Vector3D"===v||0===v.indexOf("Lcl_")?[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:r.propertyList[4],t[c]={type:v,type2:f,flag:h,value:l}}else void 0===t[r.name]?"number"==typeof r.id?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:"PoseNode"===r.name?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):void 0===t[r.name][r.id]&&(t[r.name][r.id]=r)}},{key:"parseProperty",value:function(e){var t,r=e.getString(1);switch(r){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return t=e.getUint32(),e.getArrayBuffer(t);case"S":return t=e.getUint32(),e.getString(t);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var n=e.getUint32(),o=e.getUint32(),l=e.getUint32();if(0===o)switch(r){case"b":case"c":return e.getBooleanArray(n);case"d":return e.getFloat64Array(n);case"f":return e.getFloat32Array(n);case"i":return e.getInt32Array(n);case"l":return e.getInt64Array(n)}var data=J(new Uint8Array(e.getArrayBuffer(l))),c=new ye(data.buffer);switch(r){case"b":case"c":return c.getBooleanArray(n);case"d":return c.getFloat64Array(n);case"f":return c.getFloat32Array(n);case"i":return c.getInt32Array(n);case"l":return c.getInt64Array(n)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+r)}}}])}(),ye=function(){return Object(f.a)((function e(t,r){Object(v.a)(this,e),this.dv=new DataView(t),this.offset=0,this.littleEndian=void 0===r||r,this._textDecoder=new TextDecoder}),[{key:"getOffset",value:function(){return this.offset}},{key:"size",value:function(){return this.dv.buffer.byteLength}},{key:"skip",value:function(e){this.offset+=e}},{key:"getBoolean",value:function(){return!(1&~this.getUint8())}},{key:"getBooleanArray",value:function(e){for(var a=[],i=0;i<e;i++)a.push(this.getBoolean());return a}},{key:"getUint8",value:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e}},{key:"getInt16",value:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}},{key:"getInt32",value:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}},{key:"getInt32Array",value:function(e){for(var a=[],i=0;i<e;i++)a.push(this.getInt32());return a}},{key:"getUint32",value:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}},{key:"getInt64",value:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e}},{key:"getInt64Array",value:function(e){for(var a=[],i=0;i<e;i++)a.push(this.getInt64());return a}},{key:"getUint64",value:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}},{key:"getFloat32",value:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}},{key:"getFloat32Array",value:function(e){for(var a=[],i=0;i<e;i++)a.push(this.getFloat32());return a}},{key:"getFloat64",value:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}},{key:"getFloat64Array",value:function(e){for(var a=[],i=0;i<e;i++)a.push(this.getFloat64());return a}},{key:"getArrayBuffer",value:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}},{key:"getString",value:function(e){var t=this.offset,a=new Uint8Array(this.dv.buffer,t,e);this.skip(e);var r=a.indexOf(0);return r>=0&&(a=new Uint8Array(this.dv.buffer,t,r)),this._textDecoder.decode(a)}}])}(),we=function(){return Object(f.a)((function e(){Object(v.a)(this,e)}),[{key:"add",value:function(e,t){this[e]=t}}])}();function be(text){var e=text.match(/FBXVersion: (\d+)/);if(e)return parseInt(e[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function ke(time){return time/46186158e3}var Ie=[];function Te(e,t,r,n){var o;switch(n.mappingType){case"ByPolygonVertex":o=e;break;case"ByPolygon":o=t;break;case"ByVertice":o=r;break;case"AllSame":o=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(o=n.indices[o]);var l=o*n.dataSize,c=l+n.dataSize;return function(a,b,e,t){for(var i=e,r=0;i<t;i++,r++)a[r]=b[i];return a}(Ie,n.buffer,l,c)}var xe=new y.hc,Ee=new y.Eh;function Ae(e){var t=new y.Ud,r=new y.Ud,n=new y.Ud,o=new y.Ud,l=new y.Ud,c=new y.Ud,v=new y.Ud,f=new y.Ud,h=new y.Ud,d=new y.Ud,m=new y.Ud,w=new y.Ud,k=e.inheritType?e.inheritType:0;e.translation&&t.setPosition(Ee.fromArray(e.translation));var I=Ne(0);if(e.preRotation){var T=e.preRotation.map(y.Rd.degToRad);T.push(I),r.makeRotationFromEuler(xe.fromArray(T))}if(e.rotation){var x=e.rotation.map(y.Rd.degToRad);x.push(e.eulerOrder||I),n.makeRotationFromEuler(xe.fromArray(x))}if(e.postRotation){var E=e.postRotation.map(y.Rd.degToRad);E.push(I),o.makeRotationFromEuler(xe.fromArray(E)),o.invert()}e.scale&&l.scale(Ee.fromArray(e.scale)),e.scalingOffset&&v.setPosition(Ee.fromArray(e.scalingOffset)),e.scalingPivot&&c.setPosition(Ee.fromArray(e.scalingPivot)),e.rotationOffset&&f.setPosition(Ee.fromArray(e.rotationOffset)),e.rotationPivot&&h.setPosition(Ee.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(m.copy(e.parentMatrix),d.copy(e.parentMatrixWorld));var A=r.clone().multiply(n).multiply(o),N=new y.Ud;N.extractRotation(d);var O=new y.Ud;O.copyPosition(d);var D=O.clone().invert().multiply(d),P=N.clone().invert().multiply(D),R=l,S=new y.Ud;if(0===k)S.copy(N).multiply(A).multiply(P).multiply(R);else if(1===k)S.copy(N).multiply(P).multiply(A).multiply(R);else{var F=(new y.Ud).scale((new y.Eh).setFromMatrixScale(m)).clone().invert(),C=P.clone().multiply(F);S.copy(N).multiply(A).multiply(C).multiply(R)}var L=h.clone().invert(),M=c.clone().invert(),j=t.clone().multiply(f).multiply(h).multiply(r).multiply(n).multiply(o).multiply(L).multiply(v).multiply(c).multiply(l).multiply(M),U=(new y.Ud).copyPosition(j),B=d.clone().multiply(U);return w.copyPosition(B),(j=w.clone().multiply(S)).premultiply(d.invert()),j}function Ne(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function Oe(e){return e.split(",").map((function(e){return parseFloat(e)}))}function De(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=e.byteLength),(new TextDecoder).decode(new Uint8Array(e,t,r))}}}]);